import{r as t,u as ms,l as gs,R as Ve,j as e,T as I,I as q,d as Qe,W as Ee,e as Oe,L as Ye,f as xs,H as se,g as X,M as ps,h as bs,i as Cs,k as ws,m as js,n as Ss,o as ys,A as Ke,p as pe,q as Je,s as be,t as Ce,v as ke,B as O,D as ks,F as R,w as Bs,x as Ds,y as vs,z as Fs,C as Xe,E as Is,G as Rs,J as Ze,K as Ns,S as Ts,V as Ms,N as Ue,O as As,P as es,Q as ss,U as Ls,X as Vs,Y as Es,Z as Ps,_ as zs,$ as We,a0 as p,a1 as Os,a2 as Us,a3 as Be,a4 as H,a5 as Ne,a6 as ae,a7 as re,a8 as ie,a9 as le,aa as Ws,ab as He,ac as ts,ad as ee,ae as Hs,af as $s,ag as _s,ah as $e,ai as je,aj as qs,ak as Se,al as de,am as Te,an as Me,ao as Gs,ap as Qs,aq as ns,ar as Pe,as as Ys,at as Ks,au as Js,av as Xs,aw as ls,ax as os,ay as ge,az as as,aA as xe,aB as Zs,aC as Ae,aD as et,aE as st,aF as tt,aG as nt,aH as lt,aI as ot,aJ as at,aK as rt,aL as it,aM as ct,aN as dt,aO as ut,aP as ht,aQ as ft}from"./vendor.js";import{_ as Y}from"./lodash.js";import{A as he}from"./ag-grid-react.js";import"./ag-grid-community.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();const mt="/assets/Titan.png";function ue(s=[]){return(Array.isArray(s)?s:[s]).map(a=>(delete a["Branch Info"],a))}function De(s,l,a){return`${s==""?"Uncategorised":s} ${l==""?"Unversioned":l} ${String(a).split("\\").at(-1)}`}function gt(s){return String(s).split("\\").at(-1)}const xt="http://localhost:4000",pt="40px";function ce(s,l="info",a=3e3,n=!1){return{position:"top",variant:"solid",title:n?"Server Notification":"Client Notification",description:s,status:l,duration:a,isClosable:!0}}const rs=t.createContext({socket:null,toast:null,config:null,updateConfig:s=>{},isDebug:!1,setIsDebug:s=>{},configurableRowData:[],setConfigurableRowData:s=>{},branchInfos:{},setBranchInfos:s=>{},branchTableGridRef:null,selectedBranches:[],setSelectedBranches:s=>{},showSelectedBranchesLog:!1,setShowSelectedBranchesLog:s=>{},customScripts:[],setCustomScripts:s=>{},isCommitMode:!1,setIsCommitMode:s=>{},selectedBranchStatuses:[],setSelectedBranchStatuses:s=>{},localChangesGridRef:null,untrackedChangesGridRef:null,showCommitView:!1,setShowCommitView:s=>{},sourceBranch:null,setSourceBranch:s=>{},branchOptions:[],issueNumber:{},setIssueNumber:s=>{},commitMessage:"",setCommitMessage:s=>{},selectedLocalChanges:[],setSelectedLocalChanges:s=>{},selectedUntrackedChanges:[],setSelectedUntrackedChanges:s=>{},socketPayload:null,setSocketPayload:s=>{},postCommitData:{},setPostCommitData:s=>{},logData:[],setLogData:s=>{}}),z=()=>t.useContext(rs),bt=({children:s})=>{const[l,a]=t.useState(null),[n,r]=t.useState(null),i=ms(),[o,c]=t.useState(()=>localStorage.getItem("isDebug")==="true");t.useEffect(()=>{const C=gs(xt);return r(C),C.on("connect",()=>{C.emit("titan-config-get","fetch"),C.once("titan-config-get",E=>{a(E),E||i(ce("Couldn't load data from the server","error",0))})}),C.on("notification",E=>{i(ce(E.description,E.status,E.duration,!0))}),C.on("disconnect",()=>{i(ce("Server Has Been Disconnected","warning",0,!0))}),C.on("reconnect",()=>{i(ce("Server Has Been Reconnected","success",2e3,!0))}),()=>{C.disconnect()}},[]),t.useEffect(()=>{localStorage.setItem("isDebug",String(o))},[o]);const d=t.useCallback(C=>{C!=null&&(console.debug("Saving config:",C),n==null||n.emit("titan-config-set",C))},[n]),u=t.useCallback(C=>{a(E=>{const V=C(E);return Y.isEqual(E,V)?E:(d(V),V)})},[a,d]),[h,g]=t.useState([]),[x,L]=t.useState({}),F=t.useRef(null),[f,m]=t.useState([]),[b,w]=t.useState(!1),[T,N]=t.useState([]),[M,k]=t.useState(!1),[D,B]=t.useState([]),A=t.useRef(null),G=t.useRef(null),[U,y]=t.useState(!1),[P,$]=t.useState(null),Z=t.useMemo(()=>{let C=l&&l.commitOptions&&l.commitOptions.useFolderOnlySource,E=h.filter(V=>V["Branch Folder"]&&V["Branch Version"]&&V["SVN Branch"]&&V["Branch Folder"]!==""&&V["Branch Version"]!==""&&V["SVN Branch"]!=="");return C&&(E=E.reduce((V,Ie)=>(V.some(Re=>Re["Branch Folder"]===Ie["Branch Folder"])||V.push(Ie),V),[])),E.map(V=>({value:V.id,label:C?V["Branch Folder"]:De(V["Branch Folder"],V["Branch Version"],V["SVN Branch"])}))},[l,f,h]),[K,te]=t.useState({}),[j,v]=t.useState(""),[_,S]=t.useState([]),[W,me]=t.useState([]),[ve,Fe]=t.useState(null),[we,Q]=t.useState({}),[J,ne]=Ve.useState([]);return t.useEffect(()=>{B([]),y(!1)},[h]),t.useEffect(()=>{window.electron&&window.electron.fetchCustomScripts().then(C=>{if(C.success){N(C.scripts);return}i(ce(C.error,"error",0,!0))})},[h]),t.useEffect(()=>{if(!M||!U)return;const C=setTimeout(()=>{var E;(E=document.getElementById("sectionCommit"))==null||E.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100);return()=>clearTimeout(C)},[M,U]),t.useEffect(()=>{if(f.length<1||U){f.length<1&&k(!1);return}B([]),Fe(null),ue(f).forEach(C=>{console.debug("Emitting svn-status-single for branch:",C),n==null||n.emit("svn-status-single",{selectedBranch:C})})},[n,f,U]),t.useEffect(()=>{const C=()=>{y(!1)};return n==null||n.on("branch-refresh-unseen",C),()=>n==null?void 0:n.off("branch-refresh-unseen",C)},[n]),t.useEffect(()=>{const C=E=>{o&&console.debug("Received branch status data:",E),B(V=>[...V,E])};return n==null||n.on("branch-status-single",C),()=>n==null?void 0:n.off("branch-status-single",C)},[n]),t.useEffect(()=>{ne([])},[f]),t.useEffect(()=>{J.length===0&&n&&m(C=>(C.length>0&&n.emit("svn-log-selected",{selectedBranches:f}),C))},[J,n]),t.useEffect(()=>{const C=E=>{console.debug("Received svn-log-result from socket in SectionBranchLog component in background"),ne(V=>V.some(Re=>Re.id===E.id)?V:[...V,E])};return n==null||n.on("svn-log-result",C),()=>n==null?void 0:n.off("svn-log-result",C)},[n]),e.jsx(rs.Provider,{value:{socket:n,toast:i,config:l,updateConfig:u,isDebug:o,setIsDebug:c,configurableRowData:h,setConfigurableRowData:g,branchInfos:x,setBranchInfos:L,branchTableGridRef:F,selectedBranches:f,setSelectedBranches:m,showSelectedBranchesLog:b,setShowSelectedBranchesLog:w,customScripts:T,setCustomScripts:N,isCommitMode:M,setIsCommitMode:k,selectedBranchStatuses:D,setSelectedBranchStatuses:B,localChangesGridRef:A,untrackedChangesGridRef:G,showCommitView:U,setShowCommitView:y,sourceBranch:P,setSourceBranch:$,branchOptions:Z,issueNumber:K,setIssueNumber:te,commitMessage:j,setCommitMessage:v,selectedLocalChanges:_,setSelectedLocalChanges:S,selectedUntrackedChanges:W,setSelectedUntrackedChanges:me,socketPayload:ve,setSocketPayload:Fe,postCommitData:we,setPostCommitData:Q,logData:J,setLogData:ne},children:s})};function fe(){const{socket:s}=z(),l=t.useCallback(()=>{s==null||s.emit("titan-config-open",{})},[s]),a=t.useCallback((u,h,g,x)=>{s==null||s.emit("svn-update-single",{id:u,branch:h,version:g,folder:x})},[s]),n=t.useCallback((u,h,g,x)=>{s==null||s.emit("svn-info-single",{id:u,branch:h,version:g,folder:x})},[s]),r=t.useCallback(u=>{s==null||s.emit("svn-commit",u)},[s]),i=t.useCallback(u=>{s==null||s.emit("svn-files-revert",{filesToProcess:u})},[s]),o=t.useCallback(u=>{s==null||s.emit("svn-files-add-remove",{filesToProcess:u})},[s]),c=t.useCallback((u,h,g,x=null)=>{s==null||s.emit("trello-search-names-card",{key:u,token:h,query:g,limit:x})},[s]),d=t.useCallback((u,h,g,x)=>{s==null||s.emit("trello-update-card",{key:u,token:h,trelloData:g,commitResponses:x})},[s]);return{emitOpenConfig:l,emitUpdateSingle:a,emitInfoSingle:n,emitCommitPayload:r,emitFilesRevert:i,emitFilesAddRemove:o,emitTrelloCardNamesSearch:c,emitTrelloCardUpdate:d}}function oe(){const{toast:s}=z(),l=t.useCallback((a="",n="info",r=3e3,i=null)=>{const o=ce(a,n,r);if(s)return s(o);if(i)return i(o)},[s]);return{toast:s,RaiseClientNotificaiton:l}}function Le(s){const{icon:l,onClick:a,colorScheme:n,label:r,size:i}=s,o=t.useCallback(()=>{a&&a()},[a]);return e.jsx(I,{label:window.electron?r:"Feature must be used in desktop application",hasArrow:!0,children:e.jsx(q,{"aria-label":r,size:i,icon:l,onClick:o,colorScheme:n,isDisabled:!window.electron})})}function ye(s){const{icon:l,onClick:a,colorScheme:n,label:r,size:i,placement:o,isDisabled:c=!1}=s,d=t.useCallback(()=>{a&&a()},[a]);return r&&o?e.jsx(I,{label:r,hasArrow:!0,placement:o,children:e.jsx(q,{"aria-label":r,size:i,icon:l,onClick:d,colorScheme:n,isDisabled:c})}):e.jsx(q,{"aria-label":r,size:i,icon:l,onClick:d,colorScheme:n,isDisabled:c})}function Ct(){const{isDebug:s,setIsDebug:l}=z(),{emitOpenConfig:a}=fe(),{RaiseClientNotificaiton:n}=oe(),{colorMode:r,toggleColorMode:i}=Qe(),o=t.useCallback(()=>{window.electron&&window.electron.getAppVersion().then(g=>{n(`Application Version: v${g}`,"info",2e3)})},[n]),c=t.useCallback(()=>{window.location.reload()},[]),d=t.useCallback(()=>{window.electron.checkForUpdates().then(g=>{console.debug("Check for updates result: ",g)}),window.electron.on("update-not-available",()=>{n("Titan is up to date","info",3e3),window.electron.removeAllListeners("update-not-available")})},[n]),u=t.useCallback(()=>{a()},[a]),h=t.useCallback(()=>{l(g=>!g)},[l]);return e.jsxs(Ee,{my:5,spacingY:5,justify:"space-between",children:[e.jsxs(Oe,{alignItems:"center",children:[e.jsx(Ye,{onClick:o,children:e.jsx(xs,{src:mt,alt:"Titan Logo",boxSize:"100px",mr:5,borderRadius:"full"})}),e.jsx(se,{as:"h2",size:"2xl",noOfLines:1,className:"animation-fadein-forward",children:"Welcome back"}),e.jsx(se,{as:"h2",size:"2xl",noOfLines:1,p:2,className:"animation-handwave",children:"ðŸ‘‹"})]}),e.jsxs(Oe,{alignItems:"center",columnGap:2,children:[e.jsx(ye,{icon:e.jsx(X,{as:r==="light"?ps:bs}),onClick:i,colorScheme:"yellow",label:"Toggle Light/Dark Mode",placement:"bottom-start",size:"md"}),e.jsx(ye,{icon:e.jsx(X,{as:Cs}),onClick:c,colorScheme:"yellow",label:"Reload",placement:"bottom-start",size:"md"}),e.jsx(Le,{icon:e.jsx(X,{as:ws}),onClick:d,colorScheme:"yellow",label:"Check For Updates",size:"md"}),e.jsx(ye,{icon:e.jsx(X,{as:js}),onClick:u,colorScheme:"yellow",label:"Open Config File",placement:"bottom-start",size:"md"}),e.jsx(ye,{icon:s?e.jsx(X,{as:ys}):e.jsx(X,{as:Ss}),onClick:h,colorScheme:"yellow",label:`Current Debug Mode: ${s?"on":"off"}`,placement:"bottom-start",size:"md"})]})]})}function wt({isAlertOpen:s,onCloseAlert:l,cancelRef:a,removeSelectedRows:n}){return e.jsx(Ke,{isOpen:s,leastDestructiveRef:a,onClose:l,children:e.jsx(pe,{children:e.jsxs(Je,{children:[e.jsx(be,{fontSize:"lg",fontWeight:"bold",children:"Delete Selected Rows"}),e.jsx(Ce,{children:"Are you sure you want to delete the selected rows? This action cannot be undone."}),e.jsxs(ke,{children:[e.jsx(O,{ref:a,onClick:l,children:"Cancel"}),e.jsx(O,{colorScheme:"red",onClick:n,ml:3,children:"Delete"})]})]})})})}function _e(){const{innerWidth:s,innerHeight:l}=window;return{width:s,height:l}}function jt(){const[s,l]=t.useState(_e());return t.useEffect(()=>{function a(){l(_e())}return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),s}function St({rowData:s,onRowValueChanged:l}){const{config:a,branchTableGridRef:n,updateConfig:r,isDebug:i,selectedBranches:o,setSelectedBranches:c,setSelectedBranchStatuses:d,customScripts:u,setShowCommitView:h}=z(),g=jt(),[x,L]=t.useState(g.height>768),F=t.useCallback(k=>{window.electron.openSvnResolve({fullPath:k["SVN Branch"]}).then(D=>{console.log("Resolve Conflict Result: ",D)})},[]),f=t.useCallback((k,D,B)=>{window.electron.runCustomScript({scriptType:k,scriptPath:D,branchData:B}).then(A=>{console.log("Custom Script Result: ",A)})},[]),m=t.useCallback(k=>{const D={...k,id:String(Date.now()),"Branch Info":"Copied"};r(B=>({...B,branches:ue([...B.branches,D])}))},[r]),b=t.useCallback(k=>{var B,A,G,U;const D=(A=(B=n==null?void 0:n.current)==null?void 0:B.api)==null?void 0:A.getSelectedNodes().map(y=>y.data);if(i&&console.log("SectionBranches.jsx: onSelectionChanged - event",k),i&&console.log("SectionBranches.jsx: onSelectionChanged - selectedBranches",o),(k==null?void 0:k.source)=="rowDataChanged"){const y=o.map(P=>P.id);(U=(G=n==null?void 0:n.current)==null?void 0:G.api)==null||U.forEachNode(P=>{y.includes(P.data.id)&&P.setSelected(!0)});return}else["api"].includes(k==null?void 0:k.source)||(c(D),d([]),h(!1))},[i,n,o,c,h]),w=t.useCallback(k=>{const D=[];k.api.forEachNode(B=>D.push(B.data)),i&&console.debug("SectionBranches.jsx: onRowDragEnd - movedRowData",D),r(B=>({...B,branches:ue(D)}))},[r,i]),T=t.useCallback(k=>{const D=a==null?void 0:a.branchFolderColours[k.data["Branch Folder"]];return{backgroundColor:D?`${D}20`:"transparent"}},[a==null?void 0:a.branchFolderColours]),N=t.useMemo(()=>({resizable:!0,wrapText:!0,autoHeight:!0,filter:!0,suppressMovable:!0,editable:!0,wrapHeaderText:!0,autoHeaderHeight:!0}),[]),M=t.useMemo(()=>{const k=[{headerCheckboxSelection:!0,checkboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,width:25,resizable:!1,suppressMovable:!1,filter:!1,editable:!1,headerClass:"branch-table-header-cell",cellClass:"branch-table-body-cell"},{field:"Branch Folder",resizable:!1,width:130,valueFormatter:D=>D.value.toUpperCase()},{field:"Branch Version",resizable:!1,width:130},{field:"SVN Branch",flex:1.5},{field:"Branch Info",editable:!1,resizable:!1,width:150},{headerName:"",flex:.5,resizable:!0,sortable:!1,filter:!1,editable:!1,cellRenderer:D=>e.jsxs(R,{columnGap:1,children:[String(D.data["Branch Info"]).toLowerCase().includes("ðŸ¤¬")?e.jsx(Le,{icon:e.jsx(Bs,{}),onClick:()=>F(D.data),colorScheme:"yellow",label:"Resolve Conflicts",size:"sm"}):null,u.map(B=>e.jsx(Le,{icon:e.jsx(Ds,{}),onClick:()=>f(B.type,B.path,D.data),colorScheme:"yellow",label:B.fileName,size:"sm"}))]})}];return x?[{field:"",rowDrag:!0,resizable:!1,filter:!1,suppressMovable:!1,editable:!1,width:20,cellRenderer:ks,headerClass:"branch-table-header-cell",cellClass:"branch-table-body-cell"},...k]:k},[x,u,m]);return t.useEffect(()=>{L(g.height>768)},[g]),e.jsx("div",{className:"ag-theme-balham-dark compact",style:{height:x?"auto":"428px",width:"100%"},children:e.jsx(he,{ref:n,rowData:s,defaultColDef:N,columnDefs:M,stopEditingWhenCellsLoseFocus:!0,getRowStyle:T,onRowDragEnd:w,domLayout:x?"autoHeight":"normal",suppressRowClickSelection:!0,rowSelection:"multiple",rowMultiSelectWithClick:!0,animateRows:!0,rowDragManaged:!0,onSelectionChanged:b,onRowValueChanged:l,columnMenu:"new",editType:"fullRow",deltaRowDataMode:!0,getRowNodeId:k=>k.id,immutableData:!0,suppressFlash:!0,enableCellTextSelection:!0,ensureDomOrder:!0,pagination:!x,paginationAutoPageSize:!1,paginationPageSizeSelector:!1,paginationPageSize:10})})}function yt(){const{updateConfig:s,isDebug:l,socket:a,configurableRowData:n,setConfigurableRowData:r,branchInfos:i,config:o,setBranchInfos:c,setSelectedBranches:d,setSelectedBranchStatuses:u,showCommitView:h,setShowCommitView:g}=z(),[x,L]=t.useState([]),F=t.useCallback(f=>{l&&console.log("AG Grid: onRowValueChanged - event",f),l&&console.log("AG Grid: onRowValueChanged - rowDataBranches",x),s(m=>({...m,branches:ue(x)}))},[x,s,l]);return t.useEffect(()=>{const f=Y.debounce(()=>{const m=n.map(b=>({...b,"Branch Info":i[b.id]||"Unrefreshed"}));L(b=>Y.isEqual(m,b)?b:m)},300);return f(),()=>f.cancel()},[n,i]),t.useEffect(()=>{r(f=>o&&o.branches&&!Y.isEqual(o.branches,f)?o.branches:f)},[o]),t.useEffect(()=>{const f=m=>{c(b=>{const w={...b,[m.id]:m.info};return console.debug("branch-info-single data received:",m),console.debug("branch-info-single newBranchInfos",w),d(T=>(T.find(M=>M.id===m.id)&&h&&(u([]),g(!1)),T)),w})};return a==null||a.on("branch-info-single",f),()=>a==null?void 0:a.off("branch-info-single")},[a,h]),{rowDataBranches:x,setRowDataBranches:L,onRowValueChanged:F}}function kt(){const{socket:s,updateConfig:l,isDebug:a,setShowSelectedBranchesLog:n,configurableRowData:r,branchTableGridRef:i,selectedBranches:o,setSelectedBranches:c,isCommitMode:d,setIsCommitMode:u,setShowCommitView:h}=z(),{emitUpdateSingle:g,emitInfoSingle:x}=fe(),{RaiseClientNotificaiton:L}=oe(),[F,f]=t.useState(!1),m=t.useRef(),b=()=>f(!1),{rowDataBranches:w,setRowDataBranches:T,onRowValueChanged:N}=yt(),[M,k]=t.useState(0),[D,B]=t.useState([]),A=t.useCallback(()=>{var j,v;a&&console.log("SectionBranches.jsx: clearSelection: START"),(v=(j=i==null?void 0:i.current)==null?void 0:j.api)==null||v.deselectAll(),c([]),u(!1)},[a,i,c]),G=t.useCallback(()=>{var v,_;const j=(_=(v=i==null?void 0:i.current)==null?void 0:v.api)==null?void 0:_.getSelectedNodes().map(S=>S.data);c(j),f(!0)},[i,c]),U=t.useCallback(()=>{const j={id:String(Date.now()),"Branch Folder":"","Branch Version":"","SVN Branch":"","Branch Info":""};l(v=>({...v,branches:ue([...v.branches,j])}))},[l]),y=t.useCallback(()=>{o.forEach(j=>{g(j.id,j["SVN Branch"],j["Branch Version"],j["Branch Folder"])})},[o,g]),P=t.useCallback(()=>{D.forEach(j=>{g(j.id,j["SVN Branch"],j["Branch Version"],j["Branch Folder"])})},[D,g]),$=t.useCallback(()=>{const j=o.map(_=>_.id),v=w.filter(_=>!j.includes(_.id));console.log("SectionBranches.jsx: removeSelectedRows - updatedData",v),l(_=>({..._,branches:ue(v)})),A(),b()},[o,w,l]),Z=t.useCallback(()=>{n(!0)},[]);t.useCallback(()=>{T(j=>{const v=[...j];return o.forEach(_=>{const S=v.findIndex(W=>W.id===_.id);v[S]["Branch Info"]="Refreshing"}),v}),o.forEach(j=>{x(j.id,j["SVN Branch"],j["Branch Version"],j["Branch Folder"])})},[o,x]);const K=t.useCallback(()=>{if(d)return;L("Refreshing all branches. Please wait until this is done!","info",3e3);const j=Date.now();r.forEach(v=>{x(v.id,v["SVN Branch"],v["Branch Version"],v["Branch Folder"])}),k(j)},[r,x,L,d]),te=t.useCallback(()=>{u(j=>!j),h(!1)},[u]);return t.useEffect(()=>{const j=w.filter(v=>String(v["Branch Info"]).toLowerCase().includes("-"));B(j)},[w]),t.useEffect(()=>{const v=Date.now();if(r.length>0){v-M>3e5&&K();const _=setInterval(()=>{K()},3e5);return()=>clearInterval(_)}},[r,M,K]),t.useEffect(()=>{const j=v=>{a&&console.debug("branch-success-single data received:",v),x(v.id,v.branch,v.version,v.folder)};return s==null||s.on("branch-success-single",j),()=>s==null?void 0:s.off("branch-success-single",j)},[a,s,x]),e.jsxs("div",{children:[e.jsxs(Ee,{mb:4,justify:"space-between",children:[e.jsxs(R,{columnGap:2,children:[e.jsx(I,{label:"Requires at least 1 branch",isDisabled:o.length>0,hasArrow:!0,children:e.jsxs(O,{onClick:y,leftIcon:e.jsx(X,{as:vs}),colorScheme:"yellow",isDisabled:o.length<1,children:["Update ",o.length>0?`${o.length} Branch`:"",o.length>1?"es":""]})}),e.jsx(I,{label:"Requires at least 1 branch",isDisabled:o.length>0,hasArrow:!0,children:e.jsx(O,{onClick:te,leftIcon:e.jsx(X,{as:d?Fs:Xe}),colorScheme:"yellow",isDisabled:o.length<1,children:d?"Undo Commit":"Commit"})}),e.jsx(I,{label:"Requires at least 1 branch",isDisabled:o.length>0,hasArrow:!0,children:e.jsx(O,{onClick:Z,leftIcon:e.jsx(Is,{}),colorScheme:"yellow",isDisabled:o.length<1,children:"View Logs"})})]}),e.jsx(R,{columnGap:2,children:e.jsx(I,{label:"No outdated branches to update",isDisabled:D.length>0,hasArrow:!0,children:e.jsx(O,{onClick:P,leftIcon:e.jsx(Rs,{}),colorScheme:"yellow",isDisabled:D.length<1,children:"Update All"})})})]}),e.jsx(St,{rowData:w,onRowValueChanged:N}),e.jsxs(R,{columnGap:2,mt:4,children:[e.jsx(I,{label:"Please select at least 1 branch",isDisabled:o.length>0,hasArrow:!0,children:e.jsxs(O,{onClick:A,leftIcon:e.jsx(Ze,{}),colorScheme:"red",isDisabled:o.length<1,children:["Deselect ",o.length>0?`${o.length} Branch`:"",o.length>1?"es":""]})}),e.jsx(I,{label:"Please select at least 1 branch",isDisabled:o.length>0,hasArrow:!0,children:e.jsxs(O,{onClick:G,leftIcon:e.jsx(Ns,{}),colorScheme:"red",isDisabled:o.length<1,children:["Delete ",o.length>0?`${o.length} Branch`:"",o.length>1?"es":""]})}),e.jsx(O,{onClick:U,leftIcon:e.jsx(Ts,{boxSize:8}),colorScheme:"green",children:"New Row"})]}),e.jsx(wt,{isAlertOpen:F,onCloseAlert:b,cancelRef:m,removeSelectedRows:$})]})}function is(s){const{data:l,onDiffResult:a}=s,n=t.useCallback(async()=>{try{const r=await window.electron.openTortoiseSVNDiff({fullPath:l["Full Path"],branchFolder:l["Branch Folder"],branchVersion:l["Branch Version"]});a(r)}catch(r){a({success:!1,error:r.message})}},[l,a]);return e.jsx(q,{"aria-label":"Diff",size:"sm",icon:e.jsx(Ms,{}),onClick:n,colorScheme:"yellow"})}function cs(){const{config:s}=z(),{emitTrelloCardNamesSearch:l,emitTrelloCardUpdate:a}=fe(),n=s==null?void 0:s.trelloIntegration,r=(n==null?void 0:n.key)||null,i=(n==null?void 0:n.token)||null,o=r&&i&&r.trim()!==""&&i.trim()!==""&&r.toUpperCase()!=="TRELLO_API_KEY"&&i.toUpperCase!=="TRELLO_TOKEN";return{key:r,token:i,isTrelloIntegrationEnabled:o,emitTrelloCardNamesSearch:l,emitTrelloCardUpdate:a}}function Bt({isModalOpen:s,closeModal:l}){const{socket:a,setIsCommitMode:n,setSelectedBranchStatuses:r,setShowCommitView:i,socketPayload:o,postCommitData:c,setPostCommitData:d}=z(),{emitUpdateSingle:u,emitCommitPayload:h}=fe(),{key:g,token:x,isTrelloIntegrationEnabled:L,emitTrelloCardUpdate:F}=cs(),{RaiseClientNotificaiton:f}=oe(),[m,b]=t.useState([]),{onCopy:w,value:T,setValue:N,hasCopied:M}=Ue(""),{onCopy:k,value:D,setValue:B,hasCopied:A}=Ue(""),G=t.useCallback(S=>{S.success?f("TortoiseSVN diff opened successfully","success",3e3):f(`Error opening TortoiseSVN diff: ${JSON.stringify(S.error,null,4)}`,"error",0)},[f]),U=[{title:"Review",description:"Confirm SVN changes"},{title:"Commit",description:"Commit changes"},{title:"Complete",description:"Process Completed"}],{activeStep:y,setActiveStep:P}=As({index:1,count:U.length}),$=t.useMemo(()=>({resizable:!1,wrapText:!0,autoHeight:!0,filter:!0,suppressMovable:!0,editable:!1,wrapHeaderText:!0,autoHeaderHeight:!0}),[]),Z=t.useMemo(()=>[{field:"Branch Folder"},{field:"Branch Version",sort:"asc"},{field:"File Path",flex:1},{field:"Local Status",headerTooltip:"Working Copy"},{headerName:"Diff",filter:!1,sortable:!1,cellRenderer:is,cellRendererParams:{onDiffResult:G},width:90}],[]),K=t.useCallback((S,W=!0)=>{const me="â€‹".repeat(7),ve=S.includes("MarkupSupport")?`\r
${me}`:`\r
`,we=m.sort((Q,J)=>Q["Branch Version"].localeCompare(J["Branch Version"])).map(Q=>{const J=[];S.includes("BranchFolder")&&J.push(Q["Branch Folder"]),S.includes("BranchVersion")&&J.push(Q["Branch Version"]),S.includes("SVNBranch")&&J.push(Q.branchPathFolder);let ne=J.join(" ").trim();if(S.includes("IssueNumber")){const E=Q.branchIssueNumber;ne+=` Issue [${E}]`}const C=Q.revision?Q.revision:Q.errorMessage||"Error";return ne+=` Revision [${C}]`,ne});return W?we.join(ve):we},[m,o]),te=t.useCallback(S=>{const W=K(S);N(W)},[K,N]),j=t.useCallback(()=>{P(S=>S-1)},[P]),v=t.useCallback(()=>{if(c.type!=="trello"){f("Trello Autofill is not enabled for this commit","error");return}const S=c.data,W=K(["BranchFolder","BranchVersion","IssueNumber"],!1);F(g,x,S,W),f("Updating Trello card with commit information","info"),d(null)},[c,f,K]),_=t.useCallback(()=>{P(S=>{switch(S){case 1:h(o);case 2:N(""),B("");break;case 3:return w(),f("Updating selected branches! Please wait","info",1500),m.forEach(W=>{u(W.branchId,W["SVN Branch"],W["Branch Version"],W["Branch Folder"])}),n(!1),r([]),i(!1),l(),1}return S+1})},[P,h,o,N,B,w,f,m,u,n,r,i,l]);return t.useEffect(()=>{P(1),b([]),N(""),B("")},[s,b]),t.useEffect(()=>{!s||y!=0||(l(),P(1),b([]),N(""),B(""))},[y,s]),t.useEffect(()=>{!s||y!=3||(f("The commit process has been completed successfully","success",5e3),te(["BranchFolder","BranchVersion"]),B(o.commitMessage||""))},[f,y,s,te]),t.useEffect(()=>{const S=W=>{b(me=>[...me,W])};return a==null||a.on("svn-commit-status-live",S),()=>a==null?void 0:a.off("svn-commit-status-live",S)},[a]),t.useEffect(()=>{if(y!=2)return;const S=setTimeout(()=>{m.length>0&&m[0].bulkCommitLength==m.length&&P(3)},3e3);return()=>clearTimeout(S)},[y,m]),t.useEffect(()=>{(M||A)&&f("Copied to Clipboard","success",1500)},[M,A,f]),!s||!o?e.jsx(e.Fragment,{}):e.jsxs(es,{isOpen:s,onClose:l,isCentered:!0,motionPreset:"slideInBottom",scrollBehavior:"inside",size:"xl",closeOnOverlayClick:y==1,children:[e.jsx(pe,{}),e.jsxs(ss,{maxH:"85%",maxW:"95%",children:[e.jsxs(be,{display:"flex",justifyContent:"space-between",maxWidth:y==1?"94%":"100%",children:[e.jsx(se,{as:"h2",size:"lg",children:"Commit Selected Files"}),e.jsx(Ls,{index:y-1,mb:0,size:"sm",colorScheme:"yellow",children:U.map((S,W)=>e.jsxs(Vs,{children:[e.jsx(Es,{children:e.jsx(Ps,{complete:e.jsx(zs,{}),incomplete:e.jsx(We,{}),active:e.jsx(We,{})})}),e.jsx(p,{flexShrink:"0",children:e.jsx(Os,{children:S.title})}),e.jsx(Us,{})]},W))})]}),y==1?e.jsx(Be,{size:"lg",py:6}):e.jsx(e.Fragment,{}),e.jsx(Ce,{children:e.jsxs(p,{children:[y!=1?e.jsx(e.Fragment,{}):e.jsxs(p,{children:[e.jsxs(p,{mb:4,children:[e.jsx(H,{fontWeight:600,children:"Please confirm that the following information is correct before proceeding to commit your files:"}),e.jsxs(Ne,{spacing:3,children:[e.jsxs(ae,{children:[e.jsx(re,{as:ie,color:"yellow.500"}),"Source Branch: ",e.jsx(le,{children:De(o.sourceBranch["Branch Folder"],o.sourceBranch["Branch Version"],o.sourceBranch["SVN Branch"])})]}),e.jsxs(ae,{children:[e.jsx(re,{as:ie,color:"yellow.500"}),"Issue Numbers:"," ",e.jsx(le,{children:Object.entries(o.issueNumber).map(S=>`${S[1]} (${S[0]})`).join(", ")})]}),e.jsxs(ae,{children:[e.jsx(re,{as:ie,color:"yellow.500"}),"Commit Message: ",e.jsx(le,{children:o.commitMessage})]}),e.jsxs(ae,{children:[e.jsx(re,{as:ie,color:"yellow.500"}),"Example:"," ",e.jsxs(le,{children:["Issue ",o.issueNumber[o.sourceBranch["Branch Folder"]]," (",o.sourceBranch["Branch Folder"]," ",o.sourceBranch["Branch Version"],"): ",o.commitMessage]})]})]})]}),e.jsx(p,{children:e.jsx("div",{className:"ag-theme-balham-dark compact",style:{height:"350px",width:"100%"},children:e.jsx(he,{rowData:o.filesToProcess,defaultColDef:$,columnDefs:Z,domLayout:"normal",columnMenu:"new",pagination:!0,paginationAutoPageSize:!0})})})]}),y!=2?e.jsx(e.Fragment,{}):e.jsxs(p,{children:[e.jsxs(H,{fontWeight:600,children:["Please wait while the files are being committed to the SVN repository.",e.jsx("br",{}),"Current live status of the commit process:"]}),e.jsx(p,{children:e.jsx(Ne,{spacing:3,children:m.map((S,W)=>e.jsxs(ae,{children:[e.jsx(re,{as:S.errorMessage?Ws:ie,color:S.errorMessage?"red.500":"yellow.500"}),S.branchString,":Â ",e.jsx(le,{children:S.errorMessage||S.revision})]},W))})})]}),y!=3?e.jsx(e.Fragment,{}):e.jsxs(p,{children:[e.jsx(p,{mb:4,children:e.jsxs(H,{fontWeight:600,children:["The commit process has been completed successfully.",e.jsx("br",{}),"Please find your revisions here for view and copy:"]})}),e.jsxs(R,{columnGap:10,alignItems:"center",children:[e.jsxs(p,{children:[e.jsx(se,{as:"h3",size:"md",children:"SVN Revisions"}),e.jsx(p,{children:e.jsx("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:T})})]}),e.jsx(p,{children:e.jsx(I,{hasArrow:!0,label:"Copy to clipboard",children:e.jsx(q,{"aria-label":"Copy To Clipboard",onClick:w,icon:e.jsx(He,{}),colorScheme:"yellow"})})})]}),e.jsxs(p,{my:4,children:[e.jsx(H,{fontWeight:600,children:"Modify the clipboard text to include..."}),e.jsx(ts,{colorScheme:"yellow",defaultValue:["BranchFolder","BranchVersion"],onChange:te,children:e.jsxs(Ee,{children:[e.jsx(ee,{value:"BranchFolder",children:"Branch Folder"}),e.jsx(ee,{value:"BranchVersion",children:"Branch Version"}),e.jsx(ee,{value:"SVNBranch",children:"SVN Branch"}),e.jsx(ee,{value:"IssueNumber",children:"Issue Number"}),e.jsx(ee,{value:"MarkupSupport",children:"Markup Support"})]})})]}),e.jsxs(R,{columnGap:10,alignItems:"center",children:[e.jsxs(p,{children:[e.jsx(H,{fontWeight:600,children:"Here is your SVN commit message for the source branch:"}),o.sourceBranch&&o.sourceBranch["Branch Folder"]&&o.sourceBranch["Branch Version"]?e.jsx(le,{children:`Issue ${o.issueNumber[o.sourceBranch["Branch Folder"]]} (${o.sourceBranch["Branch Folder"]} ${o.sourceBranch["Branch Version"]}): ${D}`}):e.jsx(le,{children:"Source information is undefined. Please check that you have entered the correct details otherwise contact the developer!"})]}),e.jsx(I,{hasArrow:!0,label:"Copy to clipboard",children:e.jsx(q,{"aria-label":"Copy To Clipboard",onClick:k,icon:e.jsx(He,{}),colorScheme:"yellow"})})]})]})]})}),e.jsx(ke,{children:e.jsxs(R,{flex:1,justifyContent:"space-between",children:[e.jsx(R,{columnGap:2,children:e.jsx(I,{hasArrow:!0,label:"Cannot undo the commit currently",isDisabled:y<2,children:e.jsx(O,{onClick:j,mr:3,isDisabled:y>=2,children:y==1?"Cancel":"Previous"})})}),e.jsxs(R,{columnGap:2,children:[y==3?e.jsx(I,{hasArrow:!0,label:"Requires Trello Autofill",isDisabled:(c==null?void 0:c.type)==="trello"&&L,children:e.jsx(O,{colorScheme:"yellow",leftIcon:e.jsx(X,{as:Hs}),onClick:v,isDisabled:(c==null?void 0:c.type)!="trello"||!L,children:"Update Card"})}):e.jsx(e.Fragment,{}),e.jsx(I,{hasArrow:!0,label:"Cannot undo the commit currently",isDisabled:y!=2,children:e.jsx(O,{colorScheme:"yellow",onClick:_,isDisabled:y==2,children:y==U.length?"Complete":"Next"})})]})]})})]})]})}function Dt({fileUpdates:s}){return e.jsx(p,{children:Object.keys(s).length>0?e.jsxs(p,{children:[e.jsx(H,{mb:4,children:"Below are the list of files which have been changed on your machine but there exists a newer version of them in the repository:"}),e.jsx(p,{maxHeight:"200px",overflowY:"auto",children:e.jsxs($s,{children:[e.jsx(_s,{children:e.jsxs($e,{children:[e.jsx(je,{children:"Branch"}),e.jsx(je,{children:"Path"}),e.jsx(je,{children:e.jsx(I,{label:"Working Copy",hasArrow:!0,children:"Local Status"})}),e.jsx(je,{children:e.jsx(I,{label:"Repository",hasArrow:!0,children:"Remote Status"})})]})}),e.jsx(qs,{children:Object.keys(s).map(l=>e.jsx(Ve.Fragment,{children:s[l].map((a,n)=>e.jsxs($e,{children:[e.jsx(Se,{children:l}),e.jsx(Se,{children:a.pathDisplay}),e.jsx(Se,{children:a.wcStatus}),e.jsx(Se,{children:a.reposStatus})]},n))},l))})]})}),e.jsx(H,{mt:4,children:"If you wish to commit these files, please update the associated branches!"})]}):e.jsx(p,{children:e.jsx(H,{children:"Your selected branches do not contain any changed files for which a newer version exists in the repository."})})})}function vt({rowDataLocalChanges:s,setRowDataLocalChanges:l,defaultColDefsCommit:a}){const{localChangesGridRef:n,isDebug:r,selectedBranches:i,showCommitView:o,setSelectedLocalChanges:c,selectedLocalChanges:d}=z(),{emitFilesRevert:u}=fe(),{RaiseClientNotificaiton:h}=oe(),[g,x]=t.useState(""),L=t.useCallback(()=>{u(d)},[u,d]),F=t.useCallback(w=>{x(w.target.value)},[x]),f=t.useCallback(w=>{var M,k,D,B;if(console.debug("PanelLocalChanges.jsx: onFileViewSelectionChanged - event",w),String(w==null?void 0:w.source).toLowerCase().includes("api"))return;let T=(k=(M=n==null?void 0:n.current)==null?void 0:M.api)==null?void 0:k.getSelectedNodes().map(A=>A.data);r&&console.debug("PanelLocalChanges.jsx: onFileViewSelectionChanged - selectedBranches",T);const N=T.filter(A=>A["Local Status"].toLowerCase()==="added");(B=(D=n==null?void 0:n.current)==null?void 0:D.api)==null||B.forEachNode(A=>{N.some(U=>U["File Path"].includes(A.data["File Path"])&&U["File Path"]!==A.data["File Path"])&&A.data["Local Status"].toLowerCase()==="added"&&!A.isSelected()&&(A.setSelected(!0),T.push(A.data),console.debug("PanelLocalChanges.jsx (onFileViewSelectionChanged): Adding ancestor node: ",A))}),c(T)},[n,r,c]),m=t.useCallback(w=>{w.success?h("TortoiseSVN diff opened successfully","success",3e3):h(`Error opening TortoiseSVN diff: ${JSON.stringify(w.error,null,4)}`,"error",0)},[h]),b=t.useMemo(()=>[{headerCheckboxSelection:!0,checkboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,width:20,resizable:!1,suppressMovable:!1,filter:!1,editable:!1,headerClass:"branch-table-header-cell",cellClass:"branch-table-body-cell"},{field:"Branch Folder"},{field:"Branch Version",sort:"asc",sortIndex:0},{field:"File Path",flex:1,sort:"asc",sortIndex:2},{field:"Local Status",headerTooltip:"Working Copy",sort:"asc",sortIndex:1},{headerName:"Diff",filter:!1,sortable:!1,resizable:!1,cellRenderer:is,cellRendererParams:{onDiffResult:m},width:90}],[]);return t.useEffect(()=>{i.length<1||o||(x(""),l([]),c([]))},[i,o]),e.jsx(p,{children:s.length>0?e.jsxs(p,{children:[e.jsxs(R,{mb:4,alignItems:"center",children:[e.jsx(H,{mr:2,fontWeight:"600",whiteSpace:"nowrap",children:"Quick Filter:"}),e.jsx(de,{placeholder:"Type to search...",onInput:F,width:"100%"})]}),e.jsx("div",{className:"ag-theme-balham-dark compact",style:{height:"480px",width:"100%"},children:e.jsx(he,{ref:n,rowData:s,defaultColDef:a,columnDefs:b,onSelectionChanged:f,quickFilterText:g,domLayout:"normal",rowSelection:"multiple",suppressRowClickSelection:!0,rowMultiSelectWithClick:!0,animateRows:!0,columnMenu:"new",enableCellTextSelection:!0,ensureDomOrder:!0,pagination:!0,paginationAutoPageSize:!0})}),e.jsx(R,{mt:4,columnGap:2,justifyContent:"flex-end",children:e.jsx(I,{label:"Requires you to select at least 1 file",hasArrow:!0,isDisabled:d.length>0,children:e.jsx(O,{onClick:L,colorScheme:"red",isDisabled:d.length<1,children:"Revert Selected"})})})]}):e.jsx(p,{children:e.jsx(H,{children:"Your selected branches do not contain any files to commit."})})})}function Ft({rowDataUntrackedChanges:s,setRowDataUntrackedChanges:l,defaultColDefsCommit:a}){const{untrackedChangesGridRef:n,selectedUntrackedChanges:r,setSelectedUntrackedChanges:i,isDebug:o,selectedBranches:c,showCommitView:d}=z(),{emitFilesAddRemove:u,emitFilesRevert:h}=fe(),[g,x]=t.useState(""),L=t.useCallback(w=>{x(w.target.value)},[x]),F=t.useCallback(()=>{var T,N;const w=(N=(T=n==null?void 0:n.current)==null?void 0:T.api)==null?void 0:N.getSelectedNodes().map(M=>M.data);o&&console.debug("PanelUntrackedChanges.jsx (onUnseenFilesSelectionChanged): selectedBranches",w),i(w)},[n,o]),f=t.useCallback(()=>{u(r)},[u,r]),m=t.useCallback(()=>{h(r)},[h,r]),b=t.useMemo(()=>[{headerCheckboxSelection:!0,checkboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,width:20,resizable:!1,suppressMovable:!1,filter:!1,editable:!1,headerClass:"branch-table-header-cell",cellClass:"branch-table-body-cell"},{field:"Branch Folder"},{field:"Branch Version",sort:"asc",sortIndex:0},{field:"File Path",flex:1,sort:"asc",sortIndex:1},{field:"Local Status",headerTooltip:"Working Copy"}],[]);return t.useEffect(()=>{c.length<1||d||(x(""),l([]),i([]))},[c,d]),e.jsx(p,{children:s.length>0?e.jsxs(p,{children:[e.jsx(H,{mb:4,children:"Below are the list of files which are either unversioned or missing in the repository:"}),e.jsxs(R,{mb:4,alignItems:"center",children:[e.jsx(H,{mr:2,fontWeight:"600",whiteSpace:"nowrap",children:"Quick Filter:"}),e.jsx(de,{placeholder:"Type to search...",onInput:L,width:"100%"})]}),e.jsx("div",{className:"ag-theme-balham-dark compact",style:{height:"390px",width:"100%"},children:e.jsx(he,{ref:n,rowData:s,defaultColDef:a,columnDefs:b,onSelectionChanged:F,quickFilterText:g,domLayout:"normal",rowSelection:"multiple",rowMultiSelectWithClick:!0,animateRows:!0,columnMenu:"new",enableCellTextSelection:!0,ensureDomOrder:!0,pagination:!0,paginationAutoPageSize:!0})}),e.jsxs(R,{mt:4,columnGap:2,justifyContent:"flex-end",children:[e.jsx(I,{label:"Requires you to select at least 1 file",hasArrow:!0,isDisabled:r.length>0,children:e.jsxs(O,{onClick:f,colorScheme:"green",isDisabled:r.length<1,children:["Add/Remove ",r.length," File",r.length>1?"s":""]})}),e.jsx(I,{label:"Requires you to select at least 1 file",hasArrow:!0,isDisabled:r.length>0,children:e.jsxs(O,{onClick:m,colorScheme:"red",isDisabled:r.length<1,children:["Revert ",r.length," File",r.length>1?"s":""]})})]})]}):e.jsx(p,{children:e.jsx(H,{children:"Your selected branches do not contain any unversioned or missing files."})})})}function ze(){const{config:s}=z();return s&&s.commitOptions?s.commitOptions:null}function qe({branchFolder:s}){const{issueNumber:l,setIssueNumber:a,selectedBranches:n}=z(),r=ze(),i=t.useCallback(d=>{const u=String(d.target.value||"").trim();/^\d*$/.test(u)&&a(h=>({...h,[s]:u}))},[s,a]),o=!s,c=!s||!(r!=null&&r.useIssuePerFolder)?!0:n==null?void 0:n.map(d=>d["Branch Folder"]).includes(s);return t.useEffect(()=>(s&&a(d=>({...d,[s]:""})),()=>{s&&Object.keys(l).includes(s)&&a(d=>Y.omit(d,[s]))}),[s,a]),e.jsx(I,{label:"Please select source branch first!",isDisabled:!o,hasArrow:!0,children:e.jsxs(Te,{isDisabled:o,isRequired:c,children:[e.jsx(Me,{children:s?`Issue Number For ${s}`:"Issue Number"}),e.jsx(de,{value:l[s]||"",onInput:i,placeholder:"Enter number"})]},s)})}function ds(){const{configurableRowData:s,sourceBranch:l,selectedBranches:a}=z(),n=t.useCallback(c=>s&&s.length>0?s.find(d=>d.id==c)["Branch Folder"]:"",[s]),r=t.useMemo(()=>{if(!(l!=null&&l.value))return[];const c=n(l.value);return[...new Set(a.filter(d=>d["Branch Folder"]!==c).map(d=>d["Branch Folder"]))]},[l,a,n]),i=t.useCallback(c=>s&&s.length>0?s.find(d=>d.id==c)["Branch Version"]:"",[s]),o=t.useCallback(c=>s&&s.length>0?s.find(d=>d.id==c)["SVN Branch"]:"",[s]);return{getBranchFolderById:n,selectedBranchFolders:r,getBranchVersionById:i,getSvnBranchById:o}}function It({openMessageAutoFillModal:s}){const{sourceBranch:l,setSourceBranch:a,branchOptions:n,setIssueNumber:r,commitMessage:i,setCommitMessage:o,isCommitMode:c,selectedBranches:d}=z(),u=ze(),{getBranchFolderById:h,selectedBranchFolders:g}=ds(),x=t.useCallback(F=>{a(F)},[a]),L=t.useCallback(F=>{o(String(F.target.value).replace(/["`]/g,"'"))},[o]);return t.useEffect(()=>{c&&(a(null),r({}))},[c]),t.useEffect(()=>{u!=null&&u.reusePreviousCommitMessage||o("")},[u==null?void 0:u.reusePreviousCommitMessage,o,c]),t.useEffect(()=>{r(F=>Object.fromEntries(Object.entries(F).filter(([f])=>d.some(m=>m["Branch Folder"]===f))))},[d]),e.jsx(p,{children:e.jsxs(R,{columnGap:3,children:[e.jsxs(p,{flexGrow:1,children:[e.jsxs(R,{columnGap:2,mb:2,children:[e.jsx(p,{width:"50%",children:e.jsxs(Te,{isRequired:!0,children:[e.jsx(Me,{children:"Source Branch"}),e.jsx(Gs,{value:l,onChange:x,options:n,placeholder:"SVN Branch you're commiting from",selectedOptionStyle:"check",selectedOptionColorScheme:"yellow",isClearable:!0,classNamePrefix:"chakra-react-select"})]})}),e.jsx(R,{width:"50%",alignItems:"flex-end",columnGap:2,children:e.jsx(qe,{branchFolder:l&&l.value?h(l.value):null})})]}),e.jsxs(R,{columnGap:2,height:"auto",children:[e.jsxs(Te,{width:u!=null&&u.useIssuePerFolder?"50%":"100%",isRequired:!0,children:[e.jsx(Me,{children:"Commit Message"}),e.jsx(Qs,{placeholder:"Enter Commit Message",height:"76%",resize:"none",onInput:L,value:i})]}),u!=null&&u.useIssuePerFolder?l!=null&&l.value?e.jsx(R,{width:"50%",flexDir:"column",rowGap:2,children:g.map(F=>e.jsx(qe,{branchFolder:F},F))}):e.jsx(p,{width:"50%",textAlign:"center",m:"auto",children:e.jsx(H,{fontSize:"lg",fontWeight:"600",color:"yellow.500",children:"Please select source branch first!"})}):null]})]}),e.jsx(p,{pt:8,children:e.jsx(I,{label:l!=null&&l.value?"Auto Fill Message":"Please select source branch first!",hasArrow:!0,placement:"bottom-end",children:e.jsx(q,{colorScheme:"yellow","aria-label":"Auto Fill Message",size:"md",onClick:()=>s(),icon:e.jsx(ns,{}),isDisabled:!(l!=null&&l.value)})})})]})})}function Rt({openCommitModal:s}){const{setShowCommitView:l,selectedLocalChanges:a,sourceBranch:n,issueNumber:r,commitMessage:i,setSocketPayload:o,configurableRowData:c,selectedBranches:d}=z(),{RaiseClientNotificaiton:u}=oe(),h=ze(),{selectedBranchFolders:g}=ds(),x=t.useCallback(()=>{l(!1)},[l]),L=t.useCallback(()=>{if(!n||n.value===""){u("Please select the source branch to proceed!","error");return}const F=c.find(b=>b.id==n.value),f=h!=null&&h.useIssuePerFolder?g.every(b=>r[b]&&r[b]!==""):!0,m=h!=null&&h.useIssuePerFolder&&!d.some(b=>b["Branch Folder"]===F["Branch Folder"])||r[F["Branch Folder"]];if(!r||Y.isEmpty(r)||!f||!m){u("Please provide the issue number to proceed!","error");return}if(!i||i.trim()===""){u("Please provide the commit message to proceed!","error");return}o({sourceBranch:F,issueNumber:r,commitMessage:i,filesToProcess:a,commitOptions:h}),s()},[u,n,c,h,g,r,d,i,a]);return e.jsx(p,{children:e.jsxs(R,{columnGap:2,justifyContent:"center",children:[e.jsx(O,{onClick:x,leftIcon:e.jsx(Pe,{}),colorScheme:"yellow",children:"Refresh Process"}),e.jsx(I,{label:"Select at least 1 file",hasArrow:!0,isDisabled:a.length>0,children:e.jsxs(O,{onClick:L,leftIcon:e.jsx(X,{as:Xe}),colorScheme:"yellow",isDisabled:a.length<1,children:["Commit ",a.length>0?`${a.length} File`:"",a.length>1?"s":""]})})]})})}function Nt(){const{selectedBranches:s,logData:l,setLogData:a}=z(),[n,r]=t.useState([]),[i,o]=t.useState(""),c=t.useCallback(h=>{o(h.target.value)},[o]),d=t.useCallback(()=>{a([])},[a]),u=l.length===s.length;return t.useEffect(()=>{if(l.length===0)return;const h=l.map(g=>g.logs).flat();r(g=>Y.isEqual(g,h)?g:h)},[l]),{rowDataLogs:n,quickFilterLogsText:i,setQuickFilterLogsText:o,onQuickFilterLogsInputChanged:c,refreshLogs:d,areLogsFetched:u}}function Tt({rowDataLogs:s,quickFilterLogsText:l,setAutoFillSelection:a=null,isAutofill:n=!1}){const r=t.useMemo(()=>({sortable:!0,resizable:!1,wrapText:!0,autoHeight:!0,filter:!0,suppressMovable:!0,editable:!1,wrapHeaderText:!0,autoHeaderHeight:!0}),[]),i=t.useMemo(()=>{const d=[{field:"revision",headerName:"Revision",sort:"desc",width:130},{field:"date",headerName:"Date",sortable:!1},{field:"branchFolder",headerName:"Branch Folder",width:135},{field:"branchVersion",headerName:"Branch Version",width:125},{field:"author",headerName:"Author"},{field:"message",headerName:"Message",flex:1}];return n?[{checkboxSelection:!0,width:20,resizable:!1,suppressMovable:!1,filter:!1,editable:!1,headerClass:"branch-table-header-cell",cellClass:"branch-table-body-cell"},...d]:d},[n]),o=t.useRef(null),c=t.useCallback(()=>{var d,u;if(a){const h=(u=(d=o==null?void 0:o.current)==null?void 0:d.api)==null?void 0:u.getSelectedNodes().map(g=>g.data);a(h[0]||null)}},[a]);return e.jsx("div",{className:"ag-theme-balham-dark compact",style:{height:n?"90%":"85%",width:"100%"},children:e.jsx(he,{ref:o,rowData:s,defaultColDef:r,columnDefs:i,onSelectionChanged:c,quickFilterText:l,domLayout:"normal",columnMenu:"new",rowSelection:"single",suppressRowClickSelection:!n,animateRows:!1,immutableData:!0,suppressFlash:!0,enableCellTextSelection:!0,ensureDomOrder:!0,pagination:!0,paginationAutoPageSize:!0})})}function us({setAutoFillSelection:s=!1,isAutofill:l=!1}){const{selectedBranches:a,logData:n}=z(),{rowDataLogs:r,quickFilterLogsText:i,onQuickFilterLogsInputChanged:o,refreshLogs:c,areLogsFetched:d}=Nt();return d?e.jsxs(p,{h:"100%",children:[e.jsxs(R,{mb:4,width:"100%",alignItems:"center",columnGap:4,children:[e.jsxs(R,{alignItems:"center",width:"100%",children:[e.jsx(H,{mr:2,fontWeight:"600",whiteSpace:"nowrap",children:"Quick Filter:"}),e.jsx(de,{placeholder:"Type to search...",onInput:o,width:"100%"})]}),e.jsx(p,{children:e.jsx(I,{label:"Refresh",hasArrow:!0,children:e.jsx(q,{onClick:c,icon:e.jsx(Pe,{}),colorScheme:"yellow","aria-label":"Refresh"})})})]}),e.jsx(Tt,{rowDataLogs:r,quickFilterLogsText:i,setAutoFillSelection:s,isAutofill:l})]}):e.jsxs(p,{children:[e.jsxs(p,{mb:4,children:[e.jsx(H,{fontWeight:600,children:"Showing SVN Log for the following branches:"}),e.jsx(Ne,{spacing:3,children:a.map(u=>{const h=n.find(g=>g.id===u.id);return e.jsxs(ae,{display:"flex",alignItems:"center",children:[e.jsx(re,{w:30,h:30,as:h?ie:Ys,color:"yellow.500"}),De(u["Branch Folder"],u["Branch Version"],u["SVN Branch"])]},u.branchId)})})]}),e.jsx(R,{justifyContent:"center",children:e.jsx(Ks,{value:n.length/a.length*360,color:"yellow.300",size:"100px",children:e.jsxs(Js,{children:[n.length," / ",a.length]})})})]})}function Mt(s){const{data:l}=s,a=async()=>{window.open(l.url,"_blank")};return e.jsx(q,{"aria-label":"Diff",size:"sm",icon:e.jsx(Xs,{}),onClick:a,colorScheme:"yellow"})}function At({rowDataTrello:s,quickFilterTrelloText:l,setAutoFillSelection:a}){const n=t.useMemo(()=>({sortable:!0,resizable:!1,wrapText:!0,autoHeight:!0,filter:!0,suppressMovable:!0,editable:!1,wrapHeaderText:!0,autoHeaderHeight:!0}),[]),r=t.useMemo(()=>[{checkboxSelection:!0,width:20,resizable:!1,suppressMovable:!1,filter:!1,editable:!1,headerClass:"branch-table-header-cell",cellClass:"branch-table-body-cell"},{field:"name",headerName:"Name",flex:1},{field:"lastActivityDate",headerName:"Last Activity Date"},{field:"url",headerName:"Goto Trello",filter:!1,sortable:!1,resizable:!1,cellRenderer:Mt,width:120}],[]),i=t.useRef(null),o=t.useCallback(()=>{var d,u;const c=(u=(d=i==null?void 0:i.current)==null?void 0:d.api)==null?void 0:u.getSelectedNodes().map(h=>h.data);a(c[0]||null)},[a]);return e.jsx("div",{className:"ag-theme-balham-dark compact",style:{height:"80%",width:"100%"},children:e.jsx(he,{ref:i,rowData:s,defaultColDef:n,columnDefs:r,onSelectionChanged:o,quickFilterText:l,domLayout:"normal",columnMenu:"new",rowSelection:"single",suppressRowClickSelection:!1,animateRows:!1,enableCellTextSelection:!0,pagination:!0,paginationAutoPageSize:!0})})}function Lt({setAutoFillSelection:s}){const{socket:l}=z(),{key:a,token:n,isTrelloIntegrationEnabled:r,emitTrelloCardNamesSearch:i}=cs(),[o,c]=t.useState(""),[d,u]=t.useState(""),[h,g]=t.useState([]),x=t.useCallback(Y.debounce(m=>{m.trim()!==""&&i(a,n,m)},400),[a,n,i]),L=t.useCallback(m=>{c(String(m.target.value).trim())},[c]),F=t.useCallback(()=>{o.trim()!==""&&i(a,n,o)},[o,a,n,i]),f=t.useCallback(m=>{u(m.target.value)},[]);return t.useEffect(()=>(x(o),()=>x.cancel()),[o,x]),t.useEffect(()=>{const m=b=>{g(b&&b.length>0?b:[])};return l==null||l.on("trello-result-search-names-card",m),()=>l==null?void 0:l.off("trello-result-search-names-card",m)},[l]),r?e.jsxs(p,{h:"100%",children:[e.jsxs(R,{mb:4,width:"100%",alignItems:"center",columnGap:4,children:[e.jsxs(R,{alignItems:"center",width:"100%",children:[e.jsx(H,{mr:2,fontWeight:"600",whiteSpace:"nowrap",children:"Trello Query:"}),e.jsx(de,{placeholder:"Type to search...",onInput:L,width:"100%"})]}),e.jsx(p,{children:e.jsx(I,{label:"Resubmit Query",hasArrow:!0,children:e.jsx(q,{onClick:F,icon:e.jsx(Pe,{}),colorScheme:"yellow","aria-label":"Resubmit"})})})]}),e.jsx(R,{mb:4,width:"100%",alignItems:"center",columnGap:4,children:e.jsxs(R,{alignItems:"center",width:"100%",children:[e.jsx(H,{mr:2,fontWeight:"600",whiteSpace:"nowrap",children:"Quick Filter:"}),e.jsx(de,{placeholder:"Type to search...",onInput:f,width:"100%"})]})}),e.jsx(At,{rowDataTrello:h,quickFilterTrelloText:d,setAutoFillSelection:s})]}):e.jsx(p,{h:"100%",p:4,children:e.jsxs(H,{fontSize:"lg",fontWeight:"600",color:"red.500",children:["You need to"," ",e.jsxs(Ye,{href:"https://help.merge.dev/en/articles/8757597-trello-how-do-i-link-my-account",isExternal:!0,color:"yellow.500",children:["set up Trello Integration ",e.jsx(ns,{mx:"2px"})]})," ","in the configuration file to use this feature."]})})}function Vt({isModalOpen:s,closeModal:l}){const{setIssueNumber:a,setCommitMessage:n,setPostCommitData:r}=z(),[i,o]=t.useState(0),[c,d]=t.useState([null,null]),[u,h]=t.useState(!0),g=t.useCallback(f=>{o(f),d(f===0?m=>[m[0],null]:m=>[null,m[1]])},[o]),x=t.useCallback(f=>{d(m=>[f,...m.slice(1)])},[d]),L=t.useCallback(f=>{d(m=>[m[0],f])},[d]),F=t.useCallback(()=>{console.debug("Selected tab index:",i),console.debug("Selected autofill selection:",JSON.stringify(c,null,4));let f=c[i];if(i===0){const m=f.message,b=m.match(/\s*(Issue)*\s*(\d+)\s*/),w=b?b[2]:null,T=m.replace(/\s*(Issue)*\s*(\d+)?\s*(\([^\)]+\))*\s?:?\s*/,"");w&&a(N=>Object.fromEntries(Object.keys(N).map(M=>[M,w]))),T.trim()!==""&&n(T)}else{const m=f.name,b=m.match(/\s*(Issue)*\s*(\d+)\s*/),w=b?b[2]:null,T=m.replace(/\s*(Issue)*\s*(\d+)/,"");w&&a(N=>Object.fromEntries(Object.keys(N).map(M=>[M,w]))),T.trim()!==""&&n(T),r({type:"trello",data:f})}l()},[i,c,a,n,r,l]);return t.useEffect(()=>{h(!(c.length==2&&(c[0]||c[1])))},[c]),t.useEffect(()=>{d([null,null]),o(0)},[s]),e.jsxs(es,{isOpen:s,onClose:l,isCentered:!0,motionPreset:"slideInBottom",scrollBehavior:"inside",size:"xl",closeOnOverlayClick:!0,children:[e.jsx(pe,{}),e.jsxs(ss,{maxH:"95%",maxW:"95%",children:[e.jsx(be,{children:e.jsx(se,{as:"h2",size:"lg",children:"Autofill Commit Message"})}),e.jsx(Be,{size:"lg"}),e.jsx(Ce,{children:e.jsx(p,{height:"70vh",children:e.jsxs(ls,{variant:"solid-rounded",colorScheme:"yellow",defaultIndex:0,isLazy:!0,h:"100%",onChange:f=>g(f),children:[e.jsxs(os,{children:[e.jsx(ge,{children:"SVN Logs"}),e.jsx(ge,{children:"Trello"})]}),e.jsxs(as,{h:"90%",children:[e.jsx(xe,{px:0,pb:0,h:"100%",children:e.jsx(us,{setAutoFillSelection:x,isAutofill:!0})}),e.jsx(xe,{px:0,pb:0,h:"100%",children:e.jsx(Lt,{setAutoFillSelection:L})})]})]})})}),e.jsxs(ke,{children:[e.jsx(O,{mr:3,onClick:()=>l(),children:"Cancel"}),e.jsx(I,{hasArrow:!0,label:"Please select exactly one row!",placement:"top-start",isDisabled:!u,children:e.jsx(O,{colorScheme:"yellow",onClick:F,isDisabled:u,children:"Select"})})]})]})]})}function Et(){const{config:s,updateConfig:l,setSourceBranch:a,setIssueNumber:n}=z(),[r,i]=t.useState({}),o=t.useCallback((c,d)=>{i(u=>({...u,[c]:d}))},[i]);return t.useEffect(()=>{!s||Y.isEmpty(s)||(s.commitOptions?i(s.commitOptions):l(c=>({...c,commitOptions:{useFolderOnlySource:!1,useIssuePerFolder:!1,reusePreviousCommitMessage:!1}})))},[s]),t.useEffect(()=>{Y.isEmpty(r)||l(c=>Y.isEqual(c.commitOptions,r)?c:{...c,commitOptions:r})},[r]),t.useEffect(()=>{a(null)},[r==null?void 0:r.useFolderOnlySource,a]),t.useEffect(()=>{n({})},[r==null?void 0:r.useIssuePerFolder,n]),e.jsxs(p,{mb:4,children:[e.jsx(se,{as:"h6",size:"sm",children:"Commit Options"}),e.jsx(ts,{colorScheme:"yellow",children:e.jsxs(Zs,{direction:"row",spacing:4,mt:2,children:[e.jsx(ee,{isChecked:r.useFolderOnlySource,onChange:c=>o("useFolderOnlySource",c.target.checked),children:e.jsx(I,{label:"Removes extra branch details from source branch.",hasArrow:!0,placement:"bottom-start",children:"Use Folder Only Source Branch?"})}),e.jsx(ee,{isChecked:r.useIssuePerFolder,onChange:c=>o("useIssuePerFolder",c.target.checked),children:e.jsx(I,{label:"Allows users to input issue number for each branch folder.",hasArrow:!0,placement:"bottom-start",children:"Use 1 Issue Per Folder?"})}),e.jsx(ee,{isChecked:r.reusePreviousCommitMessage,onChange:c=>o("reusePreviousCommitMessage",c.target.checked),children:e.jsx(I,{label:"Reuses the commit message from the previous commit made in Titan.",hasArrow:!0,children:"Reuse Previous Commit Message?"})})]})})]})}function Pt(){const{isDebug:s,setIsCommitMode:l,selectedBranchStatuses:a,showCommitView:n,setShowCommitView:r,selectedBranches:i,configurableRowData:o}=z(),[c,d]=t.useState({}),[u,h]=t.useState([]),[g,x]=t.useState([]),{isOpen:L,onOpen:F,onClose:f}=Ae(),{isOpen:m,onOpen:b,onClose:w}=Ae(),T=t.useMemo(()=>({resizable:!0,wrapText:!0,autoHeight:!0,filter:!0,suppressMovable:!0,editable:!1,wrapHeaderText:!0,autoHeaderHeight:!0}),[]);t.useEffect(()=>{if(i.length<1||n){i.length<1&&l(!1);return}d({})},[i,n]),t.useEffect(()=>{s&&(console.debug("Branch Status Rows:",a),console.debug("Selected Rows:",i))},[s,a,i]),t.useEffect(()=>{a.length===i.length&&(a.forEach(B=>{let A=B.id,G=B.status.filesToCommit,U=B.status.filesToUpdate;const y=o.find(P=>P.id===A);if(U.length>0){const P=De(y["Branch Folder"],y["Branch Version"],y["SVN Branch"]);d($=>({...$,[P]:[...$[P]||[],...U]}))}if(G.length>0){const P=G.map($=>({branchId:A,"Branch Folder":y["Branch Folder"],"Branch Version":y["Branch Version"],"SVN Branch":y["SVN Branch"],"Full Path":$.path,"File Path":`${gt(B.status.branch)}\\${$.pathDisplay}`,"Local Status":$.wcStatus}));h($=>[...$,...P.filter(Z=>!["unversioned","missing"].includes(Z["Local Status"]))]),x($=>[...$,...P.filter(Z=>["unversioned","missing"].includes(Z["Local Status"]))])}}),r(!0))},[a,i,o]);const N=Object.keys(c).length>0,M=u.length>0,k=g.length>0,D=N||M||k;return e.jsxs(p,{children:[e.jsx(Et,{}),e.jsx(p,{mb:6,children:e.jsx(It,{openMessageAutoFillModal:b})}),e.jsx(et,{isLoaded:n&&D,startColor:"yelow.500",endColor:"yellow.500",children:e.jsxs(ls,{variant:"solid-rounded",colorScheme:"yellow",defaultIndex:N?0:M?1:2,isLazy:!1,children:[e.jsxs(os,{children:[e.jsx(ge,{isDisabled:!N,children:e.jsx(I,{label:"No files to update!",hasArrow:!0,isDisabled:N,children:"Files to Update"})}),e.jsx(ge,{isDisabled:!M,children:e.jsx(I,{label:"No files to commit!",hasArrow:!0,isDisabled:M,children:"Local Changes"})}),e.jsx(ge,{isDisabled:!k,children:e.jsx(I,{label:"No unversioned/missing files!",hasArrow:!0,isDisabled:k,children:"Untracked Changes"})})]}),e.jsxs(as,{children:[e.jsx(xe,{px:0,children:e.jsx(Dt,{fileUpdates:c})}),e.jsx(xe,{px:0,children:e.jsx(vt,{rowDataLocalChanges:u,setRowDataLocalChanges:h,defaultColDefsCommit:T})}),e.jsx(xe,{px:0,children:e.jsx(Ft,{rowDataUntrackedChanges:g,setRowDataUntrackedChanges:x,defaultColDefsCommit:T})})]})]})}),n&&!D?e.jsxs(H,{mt:4,className:"animation-pulse",fontWeight:600,textAlign:"center",children:["No changes have been spotted!",e.jsx("br",{}),"Please use the refresh button ðŸ‘‡ if you have recently made a change"]}):e.jsx(e.Fragment,{}),e.jsx(p,{mt:6,children:e.jsx(Rt,{openCommitModal:F})}),e.jsx(Bt,{isModalOpen:L,closeModal:f}),e.jsx(Vt,{isModalOpen:m,closeModal:w})]})}function zt(){const{showSelectedBranchesLog:s,setShowSelectedBranchesLog:l}=z();return e.jsxs(st,{isOpen:s,onClose:()=>l(!1),placement:"left",size:"full",children:[e.jsx(pe,{}),e.jsxs(tt,{children:[e.jsx(Be,{size:"lg"}),e.jsx(be,{children:"Selected Branches: SVN Log"}),e.jsx(Ce,{children:e.jsx(p,{height:"100%",children:e.jsx(us,{})})})]})]})}function Ot(){const{toast:s,RaiseClientNotificaiton:l}=oe(),{isOpen:a,onOpen:n,onClose:r}=Ae(),i=t.useRef(),[o,c]=t.useState(!1);t.useEffect(()=>{if(!window.electron){l("Electron context is not available. Updates cannot be checked.","warning",5e3);return}return window.electron.on("update-available",()=>{s.closeAll(),n()}),window.electron.on("update-error",h=>{l(`An error occurred while checking for updates: ${h}`,"error",5e3),c(!1)}),()=>{window.electron.removeAllListeners("update-available"),window.electron.removeAllListeners("update-error")}},[s,n]);const d=t.useCallback(()=>{r(),l("You may update the application later by manually triggering an update check or wait until Titan does this","info",5e3)},[r,l]),u=t.useCallback(()=>{if(o){l("Update is already in progress. Please wait.","info",5e3);return}window.electron?(c(!0),window.electron.downloadUpdate().catch(h=>{c(!1),l(`An error occurred while downloading the update: ${h}`,"error",5e3)}),window.electron.on("update-downloaded",()=>{l("Update has been downloaded successfully. Titan will now restart to apply the update.","info",5e3),window.electron.removeAllListeners("update-downloaded"),r()}),window.electron.on("update-not-available",()=>{l("Titan is up to date","info",3e3),window.electron.removeAllListeners("update-not-available"),c(!1),r()})):l("Cannot update Titan in a non-desktop application environment","error",5e3)},[o,l,c,r]);return e.jsx(Ke,{isOpen:a,leastDestructiveRef:i,onClose:r,motionPreset:"slideInBottom",closeOnOverlayClick:!o,children:e.jsx(pe,{children:e.jsxs(Je,{children:[e.jsx(be,{fontSize:"lg",fontWeight:"bold",children:"Update Available"}),o?e.jsx(e.Fragment,{}):e.jsx(Be,{}),e.jsxs(Ce,{children:[o?"Downloading the update. Please wait...":"A new version of Titan is available. Would you like to download and install the update?",o?e.jsx(R,{justify:"center",mt:4,children:e.jsx(nt,{size:"xl",thickness:"4px",speed:"0.65s",color:"yellow.500",ml:4})}):e.jsx(e.Fragment,{})]}),e.jsxs(ke,{children:[e.jsx(O,{colorScheme:"red",ref:i,onClick:d,isDisabled:o,children:"Cancel"}),e.jsx(O,{colorScheme:"yellow",onClick:u,ml:3,isDisabled:o,children:"Confirm"})]})]})})})}function Ut(){if(!window.electron)return e.jsx(e.Fragment,{});const{colorMode:s}=Qe(),l=t.useCallback(()=>{window.electron.minimizeWindow()},[]),a=t.useCallback(()=>{window.electron.maximizeWindow()},[]),n=t.useCallback(()=>{window.electron.closeWindow()},[]);return e.jsx(lt.header,{w:"100%",position:"fixed",bgColor:s==="light"?"cornsilk":"#121212",className:"titanHead",zIndex:9999999,top:0,children:e.jsxs(R,{justifyContent:"space-between",alignItems:"center",p:2,position:"static",children:[e.jsx(se,{as:"h6",size:"sm",noOfLines:1,className:"animation-fadein-left-forward",children:"Titan"}),e.jsxs(R,{alignItems:"center",columnGap:2,flexWrap:"nowrap",wrap:"nowrap",children:[e.jsx(q,{"aria-label":"Minimize",size:"xs",icon:e.jsx(ot,{}),onClick:l,colorScheme:"gray",_hover:{bg:"#FAF089",color:"#1A202C"}}),e.jsx(q,{"aria-label":"Maximize",size:"xs",icon:e.jsx(at,{}),onClick:a,colorScheme:"gray",_hover:{bg:"#FAF089",color:"#1A202C"}}),e.jsx(q,{"aria-label":"Close",size:"xs",icon:e.jsx(Ze,{}),onClick:n,colorScheme:"gray",_hover:{bg:"#FEB2B2",color:"#1A202C"}})]})]})})}function Wt(){const{isCommitMode:s,selectedBranches:l,configurableRowData:a}=z(),{RaiseClientNotificaiton:n}=oe();return t.useEffect(()=>{if(window.electron)return window.electron.onAppClosing(()=>{n("App is closing, performing cleanup...","info",0),window.electron.closeWindow()}),()=>{window.electron.removeAppClosingListener()};console.warn("Electron specific logic is not available in browser mode.")},[]),e.jsxs(p,{className:"titanBody",children:[e.jsx(Ut,{}),e.jsxs(p,{p:10,children:[e.jsx(Ct,{}),e.jsx(Ot,{}),e.jsxs(R,{rowGap:4,flexDirection:"column",children:[e.jsx(p,{children:e.jsx(kt,{})}),e.jsx(rt,{in:s,animateOpacity:!0,children:e.jsxs(p,{id:"sectionCommit",children:[e.jsxs(se,{as:"h2",size:"lg",noOfLines:1,mb:4,className:"animation-pulse",lineHeight:"1.4",children:["Committing ",l.length==a.length?"All":`${l.length}/${a.length}`," Branch",l.length==1?"":"es"]}),e.jsx(Pt,{})]})})]}),e.jsx(zt,{})]})]})}const{definePartsStyle:hs,defineMultiStyleConfig:fs}=ht(ft.keys),Ht=hs({overlay:{bg:"blackAlpha.900"},dialog:{bg:"gray.900",color:"white",boxShadow:"rgba(255, 255, 255, 0.07) 0px 0px 20px 7px"},header:{bg:"gray.900",color:"white",borderRadius:"20px",p:4},body:{p:4,color:"white"},footer:{bg:"gray.900",p:4,color:"white",borderRadius:"20px"}}),$t=fs({baseStyle:Ht}),_t=hs({overlay:{bg:"blackAlpha.900"},dialog:{mt:pt,bg:"gray.900",color:"white",boxShadow:"rgba(255, 255, 255, 0.07) 0px 0px 20px 7px"},header:{bg:"gray.900",color:"white",borderRadius:"20px",p:4},body:{p:4,color:"white"},footer:{bg:"gray.900",p:2,color:"white",borderRadius:"20px"}}),qt=fs({baseStyle:_t}),Gt={initialColorMode:"dark",useSystemColorMode:!1},Ge=it({config:Gt,components:{Modal:$t,Drawer:qt}});ct.createRoot(document.getElementById("root")).render(e.jsx(Ve.StrictMode,{children:e.jsxs(dt,{theme:Ge,children:[e.jsx(ut,{initialColorMode:Ge.config.initialColorMode}),e.jsx(bt,{children:e.jsx(Wt,{})})]})}));
