import{r as t,u as ms,l as gs,R as Ee,j as e,T as I,I as _,d as Ge,W as Pe,e as Oe,L as Qe,f as xs,H as ee,g as Y,M as bs,h as ps,i as Cs,k as ws,m as js,n as Ss,o as ys,A as Ye,p as Ce,q as Ke,s as we,t as je,v as Be,B as z,D as ks,F as N,w as Bs,C as Te,x as De,y as Ds,z as vs,E as Je,G as Fs,J as Is,K as Xe,N as Rs,S as Ns,V as Ts,O as Ue,P as Ms,Q as Ze,U as es,X as As,Y as Ls,Z as Vs,_ as Es,$ as Ps,a0 as We,a1 as p,a2 as zs,a3 as Os,a4 as ve,a5 as U,a6 as Me,a7 as ae,a8 as re,a9 as ie,aa as le,ab as Us,ac as ss,ad as Z,ae as Ws,af as Hs,ag as $s,ah as He,ai as ye,aj as _s,ak as ke,al as de,am as Ae,an as Le,ao as qs,ap as Gs,aq as ts,ar as Qs,as as Ys,at as Ks,au as Js,av as ns,aw as ls,ax as be,ay as os,az as pe,aA as Xs,aB as Ve,aC as Zs,aD as et,aE as st,aF as tt,aG as nt,aH as lt,aI as ot,aJ as at,aK as rt,aL as it,aM as ct,aN as dt,aO as ut}from"./vendor.js";import{_ as G}from"./lodash.js";import{A as he}from"./ag-grid-react.js";import"./ag-grid-community.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();const ht="/assets/Titan.png";function ue(s=[]){return(Array.isArray(s)?s:[s]).map(a=>(delete a["Branch Info"],a))}function Fe(s,o,a){return`${s==""?"Uncategorised":s} ${o==""?"Unversioned":o} ${String(a).split("\\").at(-1)}`}function ft(s){return String(s).split("\\").at(-1)}const mt="http://localhost:4000",gt="40px";function ce(s,o="info",a=3e3,n=!1){return{position:"top",variant:"solid",title:n?"Server Notification":"Client Notification",description:s,status:o,duration:a,isClosable:!0}}const as=t.createContext({socket:null,toast:null,config:null,updateConfig:s=>{},isDebug:!1,setIsDebug:s=>{},configurableRowData:[],setConfigurableRowData:s=>{},branchInfos:{},setBranchInfos:s=>{},branchTableGridRef:null,selectedBranches:[],setSelectedBranches:s=>{},showSelectedBranchesLog:!1,setShowSelectedBranchesLog:s=>{},customScripts:[],setCustomScripts:s=>{},isCommitMode:!1,setIsCommitMode:s=>{},selectedBranchStatuses:[],setSelectedBranchStatuses:s=>{},localChangesGridRef:null,untrackedChangesGridRef:null,showCommitView:!1,setShowCommitView:s=>{},sourceBranch:null,setSourceBranch:s=>{},branchOptions:[],issueNumber:{},setIssueNumber:s=>{},commitMessage:"",setCommitMessage:s=>{},selectedLocalChanges:[],setSelectedLocalChanges:s=>{},selectedUntrackedChanges:[],setSelectedUntrackedChanges:s=>{},socketPayload:null,setSocketPayload:s=>{},postCommitData:{},setPostCommitData:s=>{},logData:[],setLogData:s=>{}}),P=()=>t.useContext(as),xt=({children:s})=>{const[o,a]=t.useState(null),[n,r]=t.useState(null),i=ms(),[l,c]=t.useState(()=>localStorage.getItem("isDebug")==="true");t.useEffect(()=>{const j=gs(mt);return r(j),j.on("connect",()=>{j.emit("titan-config-get","fetch"),j.once("titan-config-get",V=>{a(V),V||i(ce("Couldn't load data from the server","error",0))})}),j.on("notification",V=>{i(ce(V.description,V.status,V.duration,!0))}),j.on("disconnect",()=>{i(ce("Server Has Been Disconnected","warning",0,!0))}),j.on("reconnect",()=>{i(ce("Server Has Been Reconnected","success",2e3,!0))}),()=>{j.disconnect()}},[]),t.useEffect(()=>{localStorage.setItem("isDebug",String(l))},[l]);const d=t.useCallback(j=>{j!=null&&(console.debug("Saving config:",j),n==null||n.emit("titan-config-set",j))},[n]),u=t.useCallback(j=>{a(V=>{const L=j(V);return G.isEqual(V,L)?V:(d(L),L)})},[a,d]),[h,x]=t.useState([]),[b,R]=t.useState({}),B=t.useRef(null),[m,g]=t.useState([]),[w,k]=t.useState(!1),[v,T]=t.useState([]),[C,D]=t.useState(!1),[A,M]=t.useState([]),E=t.useRef(null),$=t.useRef(null),[O,y]=t.useState(!1),[W,H]=t.useState(null),K=t.useMemo(()=>{let j=o&&o.commitOptions&&o.commitOptions.useFolderOnlySource,V=h.filter(L=>L["Branch Folder"]&&L["Branch Version"]&&L["SVN Branch"]&&L["Branch Folder"]!==""&&L["Branch Version"]!==""&&L["SVN Branch"]!=="");return j&&(V=V.reduce((L,Re)=>(L.some(Ne=>Ne["Branch Folder"]===Re["Branch Folder"])||L.push(Re),L),[])),V.map(L=>({value:L.id,label:j?L["Branch Folder"]:Fe(L["Branch Folder"],L["Branch Version"],L["SVN Branch"])}))},[o,m,h]),[X,se]=t.useState({}),[te,me]=t.useState(""),[S,f]=t.useState([]),[F,J]=t.useState([]),[ge,Ie]=t.useState(null),[Se,q]=t.useState({}),[Q,ne]=Ee.useState([]);return t.useEffect(()=>{M([]),y(!1)},[h]),t.useEffect(()=>{window.electron&&window.electron.fetchCustomScripts().then(j=>{if(j.success){T(j.scripts);return}i(ce(j.error,"error",0,!0))})},[h]),t.useEffect(()=>{if(!C||!O)return;const j=setTimeout(()=>{var V;(V=document.getElementById("sectionCommit"))==null||V.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100);return()=>clearTimeout(j)},[C,O]),t.useEffect(()=>{if(m.length<1||O){m.length<1&&D(!1);return}M([]),Ie(null),ue(m).forEach(j=>{console.debug("Emitting svn-status-single for branch:",j),n==null||n.emit("svn-status-single",{selectedBranch:j})})},[n,m,O]),t.useEffect(()=>{const j=()=>{y(!1)};return n==null||n.on("branch-refresh-unseen",j),()=>n==null?void 0:n.off("branch-refresh-unseen",j)},[n]),t.useEffect(()=>{const j=V=>{l&&console.debug("Received branch status data:",V),M(L=>[...L,V])};return n==null||n.on("branch-status-single",j),()=>n==null?void 0:n.off("branch-status-single",j)},[n]),t.useEffect(()=>{ne([])},[m]),t.useEffect(()=>{Q.length===0&&n&&g(j=>(j.length>0&&n.emit("svn-log-selected",{selectedBranches:m}),j))},[Q,n]),t.useEffect(()=>{const j=V=>{console.debug("Received svn-log-result from socket in SectionBranchLog component in background"),ne(L=>L.some(Ne=>Ne.id===V.id)?L:[...L,V])};return n==null||n.on("svn-log-result",j),()=>n==null?void 0:n.off("svn-log-result",j)},[n]),e.jsx(as.Provider,{value:{socket:n,toast:i,config:o,updateConfig:u,isDebug:l,setIsDebug:c,configurableRowData:h,setConfigurableRowData:x,branchInfos:b,setBranchInfos:R,branchTableGridRef:B,selectedBranches:m,setSelectedBranches:g,showSelectedBranchesLog:w,setShowSelectedBranchesLog:k,customScripts:v,setCustomScripts:T,isCommitMode:C,setIsCommitMode:D,selectedBranchStatuses:A,setSelectedBranchStatuses:M,localChangesGridRef:E,untrackedChangesGridRef:$,showCommitView:O,setShowCommitView:y,sourceBranch:W,setSourceBranch:H,branchOptions:K,issueNumber:X,setIssueNumber:se,commitMessage:te,setCommitMessage:me,selectedLocalChanges:S,setSelectedLocalChanges:f,selectedUntrackedChanges:F,setSelectedUntrackedChanges:J,socketPayload:ge,setSocketPayload:Ie,postCommitData:Se,setPostCommitData:q,logData:Q,setLogData:ne},children:s})};function fe(){const{socket:s}=P(),o=t.useCallback(()=>{s==null||s.emit("titan-config-open",{})},[s]),a=t.useCallback((u,h,x,b)=>{s==null||s.emit("svn-update-single",{id:u,branch:h,version:x,folder:b})},[s]),n=t.useCallback((u,h,x,b)=>{s==null||s.emit("svn-info-single",{id:u,branch:h,version:x,folder:b})},[s]),r=t.useCallback(u=>{s==null||s.emit("svn-commit",u)},[s]),i=t.useCallback(u=>{s==null||s.emit("svn-files-revert",{filesToProcess:u})},[s]),l=t.useCallback(u=>{s==null||s.emit("svn-files-add-remove",{filesToProcess:u})},[s]),c=t.useCallback((u,h,x,b=null)=>{s==null||s.emit("trello-search-names-card",{key:u,token:h,query:x,limit:b})},[s]),d=t.useCallback((u,h,x,b)=>{s==null||s.emit("trello-update-card",{key:u,token:h,trelloData:x,commitResponses:b})},[s]);return{emitOpenConfig:o,emitUpdateSingle:a,emitInfoSingle:n,emitCommitPayload:r,emitFilesRevert:i,emitFilesAddRemove:l,emitTrelloCardNamesSearch:c,emitTrelloCardUpdate:d}}function oe(){const{toast:s}=P(),o=t.useCallback((a="",n="info",r=3e3,i=null)=>{const l=ce(a,n,r);if(s)return s(l);if(i)return i(l)},[s]);return{toast:s,RaiseClientNotificaiton:o}}function rs(s){const{icon:o,onClick:a,colorScheme:n,label:r,size:i}=s,l=t.useCallback(()=>{a&&a()},[a]);return e.jsx(I,{label:window.electron?r:"Feature must be used in desktop application",children:e.jsx(_,{"aria-label":r,size:i,icon:o,onClick:l,colorScheme:n,isDisabled:!window.electron})})}function xe(s){const{icon:o,onClick:a,colorScheme:n,label:r,size:i,placement:l,isDisabled:c=!1}=s,d=t.useCallback(()=>{a&&a()},[a]);return r&&l?e.jsx(I,{label:r,hasArrow:!0,placement:l,children:e.jsx(_,{"aria-label":r,size:i,icon:o,onClick:d,colorScheme:n,isDisabled:c})}):e.jsx(_,{"aria-label":r,size:i,icon:o,onClick:d,colorScheme:n,isDisabled:c})}function bt(){const{isDebug:s,setIsDebug:o}=P(),{emitOpenConfig:a}=fe(),{RaiseClientNotificaiton:n}=oe(),{colorMode:r,toggleColorMode:i}=Ge(),l=t.useCallback(()=>{window.electron&&window.electron.getAppVersion().then(x=>{n(`Application Version: v${x}`,"info",2e3)})},[n]),c=t.useCallback(()=>{window.location.reload()},[]),d=t.useCallback(()=>{window.electron.checkForUpdates().then(x=>{console.debug("Check for updates result: ",x)}),window.electron.on("update-not-available",()=>{n("Titan is up to date","info",3e3),window.electron.removeAllListeners("update-not-available")})},[n]),u=t.useCallback(()=>{a()},[a]),h=t.useCallback(()=>{o(x=>!x)},[o]);return e.jsxs(Pe,{my:5,spacingY:5,justify:"space-between",children:[e.jsxs(Oe,{alignItems:"center",children:[e.jsx(Qe,{onClick:l,children:e.jsx(xs,{src:ht,alt:"Titan Logo",boxSize:"100px",mr:5,borderRadius:"full"})}),e.jsx(ee,{as:"h2",size:"2xl",noOfLines:1,className:"animation-fadein-forward",children:"Welcome back"}),e.jsx(ee,{as:"h2",size:"2xl",noOfLines:1,p:2,className:"animation-handwave",children:"ðŸ‘‹"})]}),e.jsxs(Oe,{alignItems:"center",columnGap:2,children:[e.jsx(xe,{icon:e.jsx(Y,{as:r==="light"?bs:ps}),onClick:i,colorScheme:"yellow",label:"Toggle Light/Dark Mode",placement:"bottom-start",size:"md"}),e.jsx(xe,{icon:e.jsx(Y,{as:Cs}),onClick:c,colorScheme:"yellow",label:"Reload",placement:"bottom-start",size:"md"}),e.jsx(rs,{icon:e.jsx(Y,{as:ws}),onClick:d,colorScheme:"yellow",label:"Check For Updates",size:"md"}),e.jsx(xe,{icon:e.jsx(Y,{as:js}),onClick:u,colorScheme:"yellow",label:"Open Config File",placement:"bottom-start",size:"md"}),e.jsx(xe,{icon:s?e.jsx(Y,{as:ys}):e.jsx(Y,{as:Ss}),onClick:h,colorScheme:"yellow",label:`Current Debug Mode: ${s?"on":"off"}`,placement:"bottom-start",size:"md"})]})]})}function pt({isAlertOpen:s,onCloseAlert:o,cancelRef:a,removeSelectedRows:n}){return e.jsx(Ye,{isOpen:s,leastDestructiveRef:a,onClose:o,children:e.jsx(Ce,{children:e.jsxs(Ke,{children:[e.jsx(we,{fontSize:"lg",fontWeight:"bold",children:"Delete Selected Rows"}),e.jsx(je,{children:"Are you sure you want to delete the selected rows? This action cannot be undone."}),e.jsxs(Be,{children:[e.jsx(z,{ref:a,onClick:o,children:"Cancel"}),e.jsx(z,{colorScheme:"red",onClick:n,ml:3,children:"Delete"})]})]})})})}function $e(){const{innerWidth:s,innerHeight:o}=window;return{width:s,height:o}}function Ct(){const[s,o]=t.useState($e());return t.useEffect(()=>{function a(){o($e())}return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),s}function wt({rowData:s,onRowValueChanged:o}){const{config:a,branchTableGridRef:n,updateConfig:r,isDebug:i,selectedBranches:l,setSelectedBranches:c,setSelectedBranchStatuses:d,customScripts:u,setShowCommitView:h}=P(),x=Ct(),[b,R]=t.useState(x.height>768),B=t.useCallback((C,D,A)=>{window.electron.runCustomScript({scriptType:C,scriptPath:D,branchData:A}).then(M=>{console.log("Custom Script Result: ",M)})},[]),m=t.useCallback(C=>{const D={...C,id:String(Date.now()),"Branch Info":"Copied"};r(A=>({...A,branches:ue([...A.branches,D])}))},[r]),g=t.useCallback(C=>{var A,M,E,$;const D=(M=(A=n==null?void 0:n.current)==null?void 0:A.api)==null?void 0:M.getSelectedNodes().map(O=>O.data);if(i&&console.log("SectionBranches.jsx: onSelectionChanged - event",C),i&&console.log("SectionBranches.jsx: onSelectionChanged - selectedBranches",l),(C==null?void 0:C.source)=="rowDataChanged"){const O=l.map(y=>y.id);($=(E=n==null?void 0:n.current)==null?void 0:E.api)==null||$.forEachNode(y=>{O.includes(y.data.id)&&y.setSelected(!0)});return}else["api"].includes(C==null?void 0:C.source)||(c(D),d([]),h(!1))},[i,n,l,c,h]),w=t.useCallback(C=>{const D=[];C.api.forEachNode(A=>D.push(A.data)),i&&console.debug("SectionBranches.jsx: onRowDragEnd - movedRowData",D),r(A=>({...A,branches:ue(D)}))},[r,i]),k=t.useCallback(C=>{const D=a==null?void 0:a.branchFolderColours[C.data["Branch Folder"]];return{backgroundColor:D?`${D}20`:"transparent"}},[a==null?void 0:a.branchFolderColours]),v=t.useMemo(()=>({resizable:!0,wrapText:!0,autoHeight:!0,filter:!0,suppressMovable:!0,editable:!0,wrapHeaderText:!0,autoHeaderHeight:!0}),[]),T=t.useMemo(()=>{const C=[{headerCheckboxSelection:!0,checkboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,width:25,resizable:!1,suppressMovable:!1,filter:!1,editable:!1,headerClass:"branch-table-header-cell",cellClass:"branch-table-body-cell"},{field:"Branch Folder",resizable:!1,width:130,valueFormatter:D=>D.value.toUpperCase()},{field:"Branch Version",resizable:!1,width:130},{field:"SVN Branch",flex:1.5},{field:"Branch Info",editable:!1,resizable:!1,width:150},{headerName:"",flex:.5,resizable:!0,sortable:!1,filter:!1,editable:!1,cellRenderer:D=>e.jsxs(N,{columnGap:1,children:[u.map(A=>e.jsx(rs,{icon:e.jsx(Bs,{}),onClick:()=>B(A.type,A.path,D.data),colorScheme:"yellow",label:A.fileName,size:"sm"})),e.jsx(xe,{icon:e.jsx(Te,{}),onClick:()=>m(D.data),colorScheme:"yellow",label:"Copy Row",size:"sm"})]})}];return b?[{field:"",rowDrag:!0,resizable:!1,filter:!1,suppressMovable:!1,editable:!1,width:20,cellRenderer:ks,headerClass:"branch-table-header-cell",cellClass:"branch-table-body-cell"},...C]:C},[b,u,m]);return t.useEffect(()=>{R(x.height>768)},[x]),e.jsx("div",{className:"ag-theme-balham-dark compact",style:{height:b?"auto":"428px",width:"100%"},children:e.jsx(he,{ref:n,rowData:s,defaultColDef:v,columnDefs:T,stopEditingWhenCellsLoseFocus:!0,getRowStyle:k,onRowDragEnd:w,domLayout:b?"autoHeight":"normal",suppressRowClickSelection:!0,rowSelection:"multiple",rowMultiSelectWithClick:!0,animateRows:!0,rowDragManaged:!0,onSelectionChanged:g,onRowValueChanged:o,columnMenu:"new",editType:"fullRow",deltaRowDataMode:!0,getRowNodeId:C=>C.id,immutableData:!0,suppressFlash:!0,enableCellTextSelection:!0,ensureDomOrder:!0,pagination:!b,paginationAutoPageSize:!1,paginationPageSizeSelector:!1,paginationPageSize:10})})}function jt(){const{updateConfig:s,isDebug:o,socket:a,configurableRowData:n,setConfigurableRowData:r,branchInfos:i,config:l,setBranchInfos:c,setSelectedBranches:d,setSelectedBranchStatuses:u,showCommitView:h,setShowCommitView:x}=P(),[b,R]=t.useState([]),B=t.useCallback(m=>{o&&console.log("AG Grid: onRowValueChanged - event",m),o&&console.log("AG Grid: onRowValueChanged - rowDataBranches",b),s(g=>({...g,branches:ue(b)}))},[b,s,o]);return t.useEffect(()=>{const m=G.debounce(()=>{const g=n.map(w=>({...w,"Branch Info":i[w.id]||"Unrefreshed"}));R(w=>G.isEqual(g,w)?w:g)},300);return m(),()=>m.cancel()},[n,i]),t.useEffect(()=>{r(m=>l&&l.branches&&!G.isEqual(l.branches,m)?l.branches:m)},[l]),t.useEffect(()=>{const m=g=>{c(w=>{const k={...w,[g.id]:g.info};return console.debug("branch-info-single data received:",g),console.debug("branch-info-single newBranchInfos",k),d(v=>(v.find(C=>C.id===g.id)&&h&&(u([]),x(!1)),v)),k})};return a==null||a.on("branch-info-single",m),()=>a==null?void 0:a.off("branch-info-single")},[a,h]),{rowDataBranches:b,setRowDataBranches:R,onRowValueChanged:B}}function St(){const{socket:s,updateConfig:o,isDebug:a,setShowSelectedBranchesLog:n,configurableRowData:r,branchTableGridRef:i,selectedBranches:l,setSelectedBranches:c,isCommitMode:d,setIsCommitMode:u,setSelectedBranchStatuses:h,setShowCommitView:x}=P(),{emitUpdateSingle:b,emitInfoSingle:R}=fe(),{RaiseClientNotificaiton:B}=oe(),[m,g]=t.useState(!1),w=t.useRef(),k=()=>g(!1),{rowDataBranches:v,setRowDataBranches:T,onRowValueChanged:C}=jt(),[D,A]=t.useState(0),[M,E]=t.useState([]),$=t.useCallback(()=>{var S,f;a&&console.log("SectionBranches.jsx: clearSelection: START"),(f=(S=i==null?void 0:i.current)==null?void 0:S.api)==null||f.deselectAll(),c([]),u(!1)},[a,i,c]),O=t.useCallback(()=>{var f,F;const S=(F=(f=i==null?void 0:i.current)==null?void 0:f.api)==null?void 0:F.getSelectedNodes().map(J=>J.data);c(S),g(!0)},[i,c]),y=t.useCallback(()=>{const S={id:String(Date.now()),"Branch Folder":"","Branch Version":"","SVN Branch":"","Branch Info":""};o(f=>({...f,branches:ue([...f.branches,S])}))},[o]),W=t.useCallback(()=>{l.forEach(S=>{b(S.id,S["SVN Branch"],S["Branch Version"],S["Branch Folder"])})},[l,b]),H=t.useCallback(()=>{M.forEach(S=>{b(S.id,S["SVN Branch"],S["Branch Version"],S["Branch Folder"])})},[M,b]),K=t.useCallback(()=>{const S=l.map(F=>F.id),f=v.filter(F=>!S.includes(F.id));console.log("SectionBranches.jsx: removeSelectedRows - updatedData",f),o(F=>({...F,branches:ue(f)})),$(),k()},[l,v,o]),X=t.useCallback(()=>{n(!0)},[]),se=t.useCallback(()=>{T(S=>{const f=[...S];return l.forEach(F=>{const J=f.findIndex(ge=>ge.id===F.id);f[J]["Branch Info"]="Refreshing"}),f}),l.forEach(S=>{R(S.id,S["SVN Branch"],S["Branch Version"],S["Branch Folder"])})},[l,R]),te=t.useCallback(()=>{if(d)return;B("Refreshing all branches. Please wait until this is done!","info",3e3);const S=Date.now();r.forEach(f=>{R(f.id,f["SVN Branch"],f["Branch Version"],f["Branch Folder"])}),A(S)},[r,R,B,d]),me=t.useCallback(()=>{u(S=>!S),x(!1)},[u]);return t.useEffect(()=>{const S=v.filter(f=>String(f["Branch Info"]).toLowerCase().includes("-"));E(S)},[v]),t.useEffect(()=>{const f=Date.now();if(r.length>0){f-D>3e5&&te();const F=setInterval(()=>{te()},3e5);return()=>clearInterval(F)}},[r,D,te]),t.useEffect(()=>{const S=f=>{a&&console.debug("branch-success-single data received:",f),R(f.id,f.branch,f.version,f.folder)};return s==null||s.on("branch-success-single",S),()=>s==null?void 0:s.off("branch-success-single",S)},[a,s,R]),e.jsxs("div",{children:[e.jsxs(Pe,{mb:4,justify:"space-between",children:[e.jsxs(N,{columnGap:2,children:[e.jsx(I,{label:"Requires at least 1 branch",isDisabled:l.length>0,hasArrow:!0,children:e.jsxs(z,{onClick:se,leftIcon:e.jsx(De,{}),colorScheme:"yellow",isDisabled:l.length<1,children:["Refresh ",l.length>0?`${l.length} Branch`:"",l.length>1?"es":""]})}),e.jsx(I,{label:"Requires at least 1 branch",isDisabled:l.length>0,hasArrow:!0,children:e.jsxs(z,{onClick:W,leftIcon:e.jsx(Y,{as:Ds}),colorScheme:"yellow",isDisabled:l.length<1,children:["Update ",l.length>0?`${l.length} Branch`:"",l.length>1?"es":""]})}),e.jsx(I,{label:"Requires at least 1 branch",isDisabled:l.length>0,hasArrow:!0,children:e.jsx(z,{onClick:me,leftIcon:e.jsx(Y,{as:d?vs:Je}),colorScheme:"yellow",isDisabled:l.length<1,children:d?"Undo Commit":"Commit"})}),e.jsx(I,{label:"Requires at least 1 branch",isDisabled:l.length>0,hasArrow:!0,children:e.jsx(z,{onClick:X,leftIcon:e.jsx(Fs,{}),colorScheme:"yellow",isDisabled:l.length<1,children:"View Logs"})})]}),e.jsx(N,{columnGap:2,children:e.jsx(I,{label:"No outdated branches to update",isDisabled:M.length>0,hasArrow:!0,children:e.jsx(z,{onClick:H,leftIcon:e.jsx(Is,{}),colorScheme:"yellow",isDisabled:M.length<1,children:"Update Outdated"})})})]}),e.jsx(wt,{rowData:v,onRowValueChanged:C}),e.jsxs(N,{columnGap:2,mt:4,children:[e.jsx(I,{label:"Please select at least 1 branch",isDisabled:l.length>0,hasArrow:!0,children:e.jsxs(z,{onClick:$,leftIcon:e.jsx(Xe,{}),colorScheme:"red",isDisabled:l.length<1,children:["Deselect ",l.length>0?`${l.length} Branch`:"",l.length>1?"es":""]})}),e.jsx(I,{label:"Please select at least 1 branch",isDisabled:l.length>0,hasArrow:!0,children:e.jsxs(z,{onClick:O,leftIcon:e.jsx(Rs,{}),colorScheme:"red",isDisabled:l.length<1,children:["Delete ",l.length>0?`${l.length} Branch`:"",l.length>1?"es":""]})}),e.jsx(z,{onClick:y,leftIcon:e.jsx(Ns,{boxSize:8}),colorScheme:"green",children:"New Row"})]}),e.jsx(pt,{isAlertOpen:m,onCloseAlert:k,cancelRef:w,removeSelectedRows:K})]})}function is(s){const{data:o,onDiffResult:a}=s,n=t.useCallback(async()=>{try{const r=await window.electron.openTortoiseSVNDiff({fullPath:o["Full Path"],branchFolder:o["Branch Folder"],branchVersion:o["Branch Version"]});a(r)}catch(r){a({success:!1,error:r.message})}},[o,a]);return e.jsx(_,{"aria-label":"Diff",size:"sm",icon:e.jsx(Ts,{}),onClick:n,colorScheme:"yellow"})}function cs(){const{config:s}=P(),{emitTrelloCardNamesSearch:o,emitTrelloCardUpdate:a}=fe(),n=s==null?void 0:s.trelloIntegration,r=(n==null?void 0:n.key)||null,i=(n==null?void 0:n.token)||null,l=r&&i&&r.trim()!==""&&i.trim()!==""&&r.toUpperCase()!=="TRELLO_API_KEY"&&i.toUpperCase!=="TRELLO_TOKEN";return{key:r,token:i,isTrelloIntegrationEnabled:l,emitTrelloCardNamesSearch:o,emitTrelloCardUpdate:a}}function yt({isModalOpen:s,closeModal:o}){const{socket:a,setIsCommitMode:n,setSelectedBranchStatuses:r,setShowCommitView:i,socketPayload:l,postCommitData:c,setPostCommitData:d}=P(),{emitUpdateSingle:u,emitCommitPayload:h}=fe(),{key:x,token:b,isTrelloIntegrationEnabled:R,emitTrelloCardUpdate:B}=cs(),{RaiseClientNotificaiton:m}=oe(),[g,w]=t.useState([]),{onCopy:k,value:v,setValue:T,hasCopied:C}=Ue(""),{onCopy:D,value:A,setValue:M,hasCopied:E}=Ue(""),$=t.useCallback(f=>{f.success?m("TortoiseSVN diff opened successfully","success",3e3):m(`Error opening TortoiseSVN diff: ${JSON.stringify(f.error,null,4)}`,"error",0)},[m]),O=[{title:"Review",description:"Confirm SVN changes"},{title:"Commit",description:"Commit changes"},{title:"Complete",description:"Process Completed"}],{activeStep:y,setActiveStep:W}=Ms({index:1,count:O.length}),H=t.useMemo(()=>({resizable:!1,wrapText:!0,autoHeight:!0,filter:!0,suppressMovable:!0,editable:!1,wrapHeaderText:!0,autoHeaderHeight:!0}),[]),K=t.useMemo(()=>[{field:"Branch Folder"},{field:"Branch Version",sort:"asc"},{field:"File Path",flex:1},{field:"Local Status",headerTooltip:"Working Copy"},{headerName:"Diff",filter:!1,sortable:!1,cellRenderer:is,cellRendererParams:{onDiffResult:$},width:90}],[]),X=t.useCallback((f,F=!0)=>{const J="â€‹".repeat(7),ge=f.includes("MarkupSupport")?`\r
${J}`:`\r
`,Se=g.sort((q,Q)=>q["Branch Version"].localeCompare(Q["Branch Version"])).map(q=>{const Q=[];f.includes("BranchFolder")&&Q.push(q["Branch Folder"]),f.includes("BranchVersion")&&Q.push(q["Branch Version"]),f.includes("SVNBranch")&&Q.push(q.branchPathFolder);let ne=Q.join(" ").trim();if(f.includes("IssueNumber")){const V=q.branchIssueNumber;ne+=` Issue [${V}]`}const j=q.revision?q.revision:q.errorMessage||"Error";return ne+=` Revision [${j}]`,ne});return F?Se.join(ge):Se},[g,l]),se=t.useCallback(f=>{const F=X(f);T(F)},[X,T]),te=t.useCallback(()=>{W(f=>f-1)},[W]),me=t.useCallback(()=>{if(c.type!=="trello"){m("Trello Autofill is not enabled for this commit","error");return}const f=c.data,F=X(["BranchFolder","BranchVersion","IssueNumber"],!1);B(x,b,f,F),m("Updating Trello card with commit information","info"),d(null)},[c,m,X]),S=t.useCallback(()=>{W(f=>{switch(f){case 1:h(l);case 2:T(""),M("");break;case 3:return k(),m("Updating selected branches! Please wait","info",1500),g.forEach(F=>{u(F.branchId,F["SVN Branch"],F["Branch Version"],F["Branch Folder"])}),n(!1),r([]),i(!1),o(),1}return f+1})},[W,h,l,T,M,k,m,g,u,n,r,i,o]);return t.useEffect(()=>{W(1),w([]),T(""),M("")},[s,w]),t.useEffect(()=>{!s||y!=0||(o(),W(1),w([]),T(""),M(""))},[y,s]),t.useEffect(()=>{!s||y!=3||(m("The commit process has been completed successfully","success",5e3),se(["BranchFolder","BranchVersion","SVNBranch"]),M(l.commitMessage||""))},[m,y,s,se]),t.useEffect(()=>{const f=F=>{w(J=>[...J,F])};return a==null||a.on("svn-commit-status-live",f),()=>a==null?void 0:a.off("svn-commit-status-live",f)},[a]),t.useEffect(()=>{if(y!=2)return;const f=setTimeout(()=>{g.length>0&&g[0].bulkCommitLength==g.length&&W(3)},3e3);return()=>clearTimeout(f)},[y,g]),t.useEffect(()=>{(C||E)&&m("Copied to Clipboard","success",1500)},[C,E,m]),!s||!l?e.jsx(e.Fragment,{}):e.jsxs(Ze,{isOpen:s,onClose:o,isCentered:!0,motionPreset:"slideInBottom",scrollBehavior:"inside",size:"xl",closeOnOverlayClick:y==1,children:[e.jsx(Ce,{}),e.jsxs(es,{maxH:"85%",maxW:"95%",children:[e.jsxs(we,{display:"flex",justifyContent:"space-between",maxWidth:y==1?"94%":"100%",children:[e.jsx(ee,{as:"h2",size:"lg",children:"Commit Selected Files"}),e.jsx(As,{index:y-1,mb:0,size:"sm",colorScheme:"yellow",children:O.map((f,F)=>e.jsxs(Ls,{children:[e.jsx(Vs,{children:e.jsx(Es,{complete:e.jsx(Ps,{}),incomplete:e.jsx(We,{}),active:e.jsx(We,{})})}),e.jsx(p,{flexShrink:"0",children:e.jsx(zs,{children:f.title})}),e.jsx(Os,{})]},F))})]}),y==1?e.jsx(ve,{size:"lg",py:6}):e.jsx(e.Fragment,{}),e.jsx(je,{children:e.jsxs(p,{children:[y!=1?e.jsx(e.Fragment,{}):e.jsxs(p,{children:[e.jsxs(p,{mb:4,children:[e.jsx(U,{fontWeight:600,children:"Please confirm that the following information is correct before proceeding to commit your files:"}),e.jsxs(Me,{spacing:3,children:[e.jsxs(ae,{children:[e.jsx(re,{as:ie,color:"yellow.500"}),"Source Branch: ",e.jsx(le,{children:Fe(l.sourceBranch["Branch Folder"],l.sourceBranch["Branch Version"],l.sourceBranch["SVN Branch"])})]}),e.jsxs(ae,{children:[e.jsx(re,{as:ie,color:"yellow.500"}),"Issue Numbers: ",e.jsx(le,{children:Object.entries(l.issueNumber).map(f=>`${f[1]} (${f[0]})`).join(", ")})]}),e.jsxs(ae,{children:[e.jsx(re,{as:ie,color:"yellow.500"}),"Commit Message: ",e.jsx(le,{children:l.commitMessage})]}),e.jsxs(ae,{children:[e.jsx(re,{as:ie,color:"yellow.500"}),"Example:"," ",e.jsxs(le,{children:["Issue ",l.issueNumber[l.sourceBranch["Branch Folder"]]," (",l.sourceBranch["Branch Folder"]," ",l.sourceBranch["Branch Version"],"): ",l.commitMessage]})]})]})]}),e.jsx(p,{children:e.jsx("div",{className:"ag-theme-balham-dark compact",style:{height:"350px",width:"100%"},children:e.jsx(he,{rowData:l.filesToProcess,defaultColDef:H,columnDefs:K,domLayout:"normal",columnMenu:"new",pagination:!0,paginationAutoPageSize:!0})})})]}),y!=2?e.jsx(e.Fragment,{}):e.jsxs(p,{children:[e.jsxs(U,{fontWeight:600,children:["Please wait while the files are being committed to the SVN repository.",e.jsx("br",{}),"Current live status of the commit process:"]}),e.jsx(p,{children:e.jsx(Me,{spacing:3,children:g.map((f,F)=>e.jsxs(ae,{children:[e.jsx(re,{as:f.errorMessage?Us:ie,color:f.errorMessage?"red.500":"yellow.500"}),f.branchString,":Â ",e.jsx(le,{children:f.errorMessage||f.revision})]},F))})})]}),y!=3?e.jsx(e.Fragment,{}):e.jsxs(p,{children:[e.jsx(p,{mb:4,children:e.jsxs(U,{fontWeight:600,children:["The commit process has been completed successfully.",e.jsx("br",{}),"Please find your revisions here for view and copy:"]})}),e.jsxs(N,{columnGap:10,alignItems:"center",children:[e.jsxs(p,{children:[e.jsx(ee,{as:"h3",size:"md",children:"SVN Revisions"}),e.jsx(p,{children:e.jsx("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:v})})]}),e.jsx(p,{children:e.jsx(I,{hasArrow:!0,label:"Copy to clipboard",children:e.jsx(_,{"aria-label":"Copy To Clipboard",onClick:k,icon:e.jsx(Te,{}),colorScheme:"yellow"})})})]}),e.jsxs(p,{my:4,children:[e.jsx(U,{fontWeight:600,children:"Modify the clipboard text to include..."}),e.jsx(ss,{colorScheme:"yellow",defaultValue:["BranchFolder","BranchVersion"],onChange:se,children:e.jsxs(Pe,{children:[e.jsx(Z,{value:"BranchFolder",children:"Branch Folder"}),e.jsx(Z,{value:"BranchVersion",children:"Branch Version"}),e.jsx(Z,{value:"SVNBranch",children:"SVN Branch"}),e.jsx(Z,{value:"IssueNumber",children:"Issue Number"}),e.jsx(Z,{value:"MarkupSupport",children:"Markup Support"})]})})]}),e.jsxs(N,{columnGap:10,alignItems:"center",children:[e.jsxs(p,{children:[e.jsx(U,{fontWeight:600,children:"Here is your SVN commit message for the source branch:"}),l.sourceBranch&&l.sourceBranch["Branch Folder"]&&l.sourceBranch["Branch Version"]?e.jsx(le,{children:`Issue ${l.issueNumber[l.sourceBranch["Branch Folder"]]} (${l.sourceBranch["Branch Folder"]} ${l.sourceBranch["Branch Version"]}): ${A}`}):e.jsx(le,{children:"Source information is undefined. Please check that you have entered the correct details otherwise contact the developer!"})]}),e.jsx(I,{hasArrow:!0,label:"Copy to clipboard",children:e.jsx(_,{"aria-label":"Copy To Clipboard",onClick:D,icon:e.jsx(Te,{}),colorScheme:"yellow"})})]})]})]})}),e.jsx(Be,{children:e.jsxs(N,{flex:1,justifyContent:"space-between",children:[e.jsx(N,{columnGap:2,children:e.jsx(I,{hasArrow:!0,label:"Cannot undo the commit currently",isDisabled:y<2,children:e.jsx(z,{onClick:te,mr:3,isDisabled:y>=2,children:y==1?"Cancel":"Previous"})})}),e.jsxs(N,{columnGap:2,children:[e.jsx(I,{hasArrow:!0,label:"Requires Trello Autofill",isDisabled:(c==null?void 0:c.type)==="trello"&&R,children:e.jsx(z,{colorScheme:"yellow",leftIcon:e.jsx(Y,{as:Ws}),onClick:me,isDisabled:y<3||(c==null?void 0:c.type)!="trello"||!R,children:"Update Card"})}),e.jsx(I,{hasArrow:!0,label:"Cannot undo the commit currently",isDisabled:y!=2,children:e.jsx(z,{colorScheme:"yellow",onClick:S,isDisabled:y==2,children:y==O.length?"Complete":"Next"})})]})]})})]})]})}function kt({fileUpdates:s}){return e.jsx(p,{children:Object.keys(s).length>0?e.jsxs(p,{children:[e.jsx(U,{mb:4,children:"Below are the list of files which have been changed on your machine but there exists a newer version of them in the repository:"}),e.jsx(p,{maxHeight:"200px",overflowY:"auto",children:e.jsxs(Hs,{children:[e.jsx($s,{children:e.jsxs(He,{children:[e.jsx(ye,{children:"Branch"}),e.jsx(ye,{children:"Path"}),e.jsx(ye,{children:e.jsx(I,{label:"Working Copy",hasArrow:!0,children:"Local Status"})}),e.jsx(ye,{children:e.jsx(I,{label:"Repository",hasArrow:!0,children:"Remote Status"})})]})}),e.jsx(_s,{children:Object.keys(s).map(o=>e.jsx(Ee.Fragment,{children:s[o].map((a,n)=>e.jsxs(He,{children:[e.jsx(ke,{children:o}),e.jsx(ke,{children:a.pathDisplay}),e.jsx(ke,{children:a.wcStatus}),e.jsx(ke,{children:a.reposStatus})]},n))},o))})]})}),e.jsx(U,{mt:4,children:"If you wish to commit these files, please update the associated branches!"})]}):e.jsx(p,{children:e.jsx(U,{children:"Your selected branches do not contain any changed files for which a newer version exists in the repository."})})})}function Bt({rowDataLocalChanges:s,setRowDataLocalChanges:o,defaultColDefsCommit:a}){const{localChangesGridRef:n,isDebug:r,selectedBranches:i,showCommitView:l,setSelectedLocalChanges:c,selectedLocalChanges:d}=P(),{emitFilesRevert:u}=fe(),{RaiseClientNotificaiton:h}=oe(),[x,b]=t.useState(""),R=t.useCallback(()=>{u(d)},[u,d]),B=t.useCallback(k=>{b(k.target.value)},[b]),m=t.useCallback(k=>{var C,D,A,M;if(console.debug("PanelLocalChanges.jsx: onFileViewSelectionChanged - event",k),String(k==null?void 0:k.source).toLowerCase().includes("api"))return;let v=(D=(C=n==null?void 0:n.current)==null?void 0:C.api)==null?void 0:D.getSelectedNodes().map(E=>E.data);r&&console.debug("PanelLocalChanges.jsx: onFileViewSelectionChanged - selectedBranches",v);const T=v.filter(E=>E["Local Status"].toLowerCase()==="added");(M=(A=n==null?void 0:n.current)==null?void 0:A.api)==null||M.forEachNode(E=>{T.some(O=>O["File Path"].includes(E.data["File Path"])&&O["File Path"]!==E.data["File Path"])&&E.data["Local Status"].toLowerCase()==="added"&&!E.isSelected()&&(E.setSelected(!0),v.push(E.data),console.debug("PanelLocalChanges.jsx (onFileViewSelectionChanged): Adding ancestor node: ",E))}),c(v)},[n,r,c]),g=t.useCallback(k=>{k.success?h("TortoiseSVN diff opened successfully","success",3e3):h(`Error opening TortoiseSVN diff: ${JSON.stringify(k.error,null,4)}`,"error",0)},[h]),w=t.useMemo(()=>[{headerCheckboxSelection:!0,checkboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,width:20,resizable:!1,suppressMovable:!1,filter:!1,editable:!1,headerClass:"branch-table-header-cell",cellClass:"branch-table-body-cell"},{field:"Branch Folder"},{field:"Branch Version",sort:"asc",sortIndex:0},{field:"File Path",flex:1,sort:"asc",sortIndex:2},{field:"Local Status",headerTooltip:"Working Copy",sort:"asc",sortIndex:1},{headerName:"Diff",filter:!1,sortable:!1,resizable:!1,cellRenderer:is,cellRendererParams:{onDiffResult:g},width:90}],[]);return t.useEffect(()=>{i.length<1||l||(b(""),o([]),c([]))},[i,l]),e.jsx(p,{children:s.length>0?e.jsxs(p,{children:[e.jsxs(N,{mb:4,alignItems:"center",children:[e.jsx(U,{mr:2,fontWeight:"600",whiteSpace:"nowrap",children:"Quick Filter:"}),e.jsx(de,{placeholder:"Type to search...",onInput:B,width:"100%"})]}),e.jsx("div",{className:"ag-theme-balham-dark compact",style:{height:"480px",width:"100%"},children:e.jsx(he,{ref:n,rowData:s,defaultColDef:a,columnDefs:w,onSelectionChanged:m,quickFilterText:x,domLayout:"normal",rowSelection:"multiple",suppressRowClickSelection:!0,rowMultiSelectWithClick:!0,animateRows:!0,columnMenu:"new",enableCellTextSelection:!0,ensureDomOrder:!0,pagination:!0,paginationAutoPageSize:!0})}),e.jsx(N,{mt:4,columnGap:2,justifyContent:"flex-end",children:e.jsx(I,{label:"Requires you to select at least 1 file",hasArrow:!0,isDisabled:d.length>0,children:e.jsx(z,{onClick:R,colorScheme:"red",isDisabled:d.length<1,children:"Revert Selected"})})})]}):e.jsx(p,{children:e.jsx(U,{children:"Your selected branches do not contain any files to commit."})})})}function Dt({rowDataUntrackedChanges:s,setRowDataUntrackedChanges:o,defaultColDefsCommit:a}){const{untrackedChangesGridRef:n,selectedUntrackedChanges:r,setSelectedUntrackedChanges:i,isDebug:l,selectedBranches:c,showCommitView:d}=P(),{emitFilesAddRemove:u,emitFilesRevert:h}=fe(),[x,b]=t.useState(""),R=t.useCallback(k=>{b(k.target.value)},[b]),B=t.useCallback(()=>{var v,T;const k=(T=(v=n==null?void 0:n.current)==null?void 0:v.api)==null?void 0:T.getSelectedNodes().map(C=>C.data);l&&console.debug("PanelUntrackedChanges.jsx (onUnseenFilesSelectionChanged): selectedBranches",k),i(k)},[n,l]),m=t.useCallback(()=>{u(r)},[u,r]),g=t.useCallback(()=>{h(r)},[h,r]),w=t.useMemo(()=>[{headerCheckboxSelection:!0,checkboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,width:20,resizable:!1,suppressMovable:!1,filter:!1,editable:!1,headerClass:"branch-table-header-cell",cellClass:"branch-table-body-cell"},{field:"Branch Folder"},{field:"Branch Version",sort:"asc",sortIndex:0},{field:"File Path",flex:1,sort:"asc",sortIndex:1},{field:"Local Status",headerTooltip:"Working Copy"}],[]);return t.useEffect(()=>{c.length<1||d||(b(""),o([]),i([]))},[c,d]),e.jsx(p,{children:s.length>0?e.jsxs(p,{children:[e.jsx(U,{mb:4,children:"Below are the list of files which are either unversioned or missing in the repository:"}),e.jsxs(N,{mb:4,alignItems:"center",children:[e.jsx(U,{mr:2,fontWeight:"600",whiteSpace:"nowrap",children:"Quick Filter:"}),e.jsx(de,{placeholder:"Type to search...",onInput:R,width:"100%"})]}),e.jsx("div",{className:"ag-theme-balham-dark compact",style:{height:"390px",width:"100%"},children:e.jsx(he,{ref:n,rowData:s,defaultColDef:a,columnDefs:w,onSelectionChanged:B,quickFilterText:x,domLayout:"normal",rowSelection:"multiple",rowMultiSelectWithClick:!0,animateRows:!0,columnMenu:"new",enableCellTextSelection:!0,ensureDomOrder:!0,pagination:!0,paginationAutoPageSize:!0})}),e.jsxs(N,{mt:4,columnGap:2,justifyContent:"flex-end",children:[e.jsx(I,{label:"Requires you to select at least 1 file",hasArrow:!0,isDisabled:r.length>0,children:e.jsxs(z,{onClick:m,colorScheme:"green",isDisabled:r.length<1,children:["Add/Remove ",r.length," File",r.length>1?"s":""]})}),e.jsx(I,{label:"Requires you to select at least 1 file",hasArrow:!0,isDisabled:r.length>0,children:e.jsxs(z,{onClick:g,colorScheme:"red",isDisabled:r.length<1,children:["Revert ",r.length," File",r.length>1?"s":""]})})]})]}):e.jsx(p,{children:e.jsx(U,{children:"Your selected branches do not contain any unversioned or missing files."})})})}function ze(){const{config:s}=P();return s&&s.commitOptions?s.commitOptions:null}function _e({branchFolder:s}){const{issueNumber:o,setIssueNumber:a,selectedBranches:n}=P(),r=ze(),i=t.useCallback(d=>{const u=String(d.target.value||"").trim();/^\d*$/.test(u)&&a(h=>({...h,[s]:u}))},[s,a]),l=!s,c=!s||!(r!=null&&r.useIssuePerFolder)?!0:n==null?void 0:n.map(d=>d["Branch Folder"]).includes(s);return t.useEffect(()=>(s&&a(d=>({...d,[s]:""})),()=>{s&&Object.keys(o).includes(s)&&a(d=>G.omit(d,[s]))}),[s,a]),e.jsx(I,{label:"Please select source branch first!",isDisabled:!l,hasArrow:!0,children:e.jsxs(Ae,{isDisabled:l,isRequired:c,children:[e.jsx(Le,{children:s?`Issue Number For ${s}`:"Issue Number"}),e.jsx(de,{value:o[s]||"",onInput:i,placeholder:"Enter number"})]},s)})}function ds(){const{configurableRowData:s,sourceBranch:o,selectedBranches:a}=P(),n=t.useCallback(c=>s&&s.length>0?s.find(d=>d.id==c)["Branch Folder"]:"",[s]),r=t.useMemo(()=>{if(!(o!=null&&o.value))return[];const c=n(o.value);return[...new Set(a.filter(d=>d["Branch Folder"]!==c).map(d=>d["Branch Folder"]))]},[o,a,n]),i=t.useCallback(c=>s&&s.length>0?s.find(d=>d.id==c)["Branch Version"]:"",[s]),l=t.useCallback(c=>s&&s.length>0?s.find(d=>d.id==c)["SVN Branch"]:"",[s]);return{getBranchFolderById:n,selectedBranchFolders:r,getBranchVersionById:i,getSvnBranchById:l}}function vt({openMessageAutoFillModal:s}){const{sourceBranch:o,setSourceBranch:a,branchOptions:n,setIssueNumber:r,commitMessage:i,setCommitMessage:l,isCommitMode:c,selectedBranches:d}=P(),u=ze(),{getBranchFolderById:h,selectedBranchFolders:x}=ds(),b=t.useCallback(B=>{a(B)},[a]),R=t.useCallback(B=>{l(String(B.target.value).replace(/["`]/g,"'"))},[l]);return t.useEffect(()=>{c&&(a(null),r({}))},[c]),t.useEffect(()=>{u!=null&&u.reusePreviousCommitMessage||l("")},[u==null?void 0:u.reusePreviousCommitMessage,l,c]),t.useEffect(()=>{r(B=>Object.fromEntries(Object.entries(B).filter(([m])=>d.some(g=>g["Branch Folder"]===m))))},[d]),e.jsx(p,{children:e.jsxs(N,{columnGap:3,children:[e.jsxs(p,{flexGrow:1,children:[e.jsxs(N,{columnGap:2,mb:2,children:[e.jsx(p,{width:"50%",children:e.jsxs(Ae,{isRequired:!0,children:[e.jsx(Le,{children:"Source Branch"}),e.jsx(qs,{value:o,onChange:b,options:n,placeholder:"SVN Branch you're commiting from",selectedOptionStyle:"check",selectedOptionColorScheme:"yellow",isClearable:!0,classNamePrefix:"chakra-react-select"})]})}),e.jsx(N,{width:"50%",alignItems:"flex-end",columnGap:2,children:e.jsx(_e,{branchFolder:o&&o.value?h(o.value):null})})]}),e.jsxs(N,{columnGap:2,height:"auto",children:[e.jsxs(Ae,{width:u!=null&&u.useIssuePerFolder?"50%":"100%",isRequired:!0,children:[e.jsx(Le,{children:"Commit Message"}),e.jsx(Gs,{placeholder:"Enter Commit Message",height:"76%",resize:"none",onInput:R,value:i})]}),u!=null&&u.useIssuePerFolder?o!=null&&o.value?e.jsx(N,{width:"50%",flexDir:"column",rowGap:2,children:x.map(B=>e.jsx(_e,{branchFolder:B},B))}):e.jsx(p,{width:"50%",textAlign:"center",m:"auto",children:e.jsx(U,{fontSize:"lg",fontWeight:"600",color:"yellow.500",children:"Please select source branch first!"})}):null]})]}),e.jsx(p,{pt:8,children:e.jsx(I,{label:o!=null&&o.value?"Auto Fill Message":"Please select source branch first!",hasArrow:!0,placement:"bottom-end",children:e.jsx(_,{colorScheme:"yellow","aria-label":"Auto Fill Message",size:"md",onClick:()=>s(),icon:e.jsx(ts,{}),isDisabled:!(o!=null&&o.value)})})})]})})}function Ft({openCommitModal:s}){const{setShowCommitView:o,selectedLocalChanges:a,sourceBranch:n,issueNumber:r,commitMessage:i,setSocketPayload:l,configurableRowData:c,selectedBranches:d}=P(),{RaiseClientNotificaiton:u}=oe(),h=ze(),{selectedBranchFolders:x}=ds(),b=t.useCallback(()=>{o(!1)},[o]),R=t.useCallback(()=>{if(!n||n.value===""){u("Please select the source branch to proceed!","error");return}const B=c.find(w=>w.id==n.value),m=h!=null&&h.useIssuePerFolder?x.every(w=>r[w]&&r[w]!==""):!0,g=h!=null&&h.useIssuePerFolder&&!d.some(w=>w["Branch Folder"]===B["Branch Folder"])||r[B["Branch Folder"]];if(!r||G.isEmpty(r)||!m||!g){u("Please provide the issue number to proceed!","error");return}if(!i||i.trim()===""){u("Please provide the commit message to proceed!","error");return}l({sourceBranch:B,issueNumber:r,commitMessage:i,filesToProcess:a,commitOptions:h}),s()},[u,n,c,h,x,r,d,i,a]);return e.jsx(p,{children:e.jsxs(N,{columnGap:2,justifyContent:"center",children:[e.jsx(z,{onClick:b,leftIcon:e.jsx(De,{}),colorScheme:"yellow",children:"Refresh Process"}),e.jsx(I,{label:"Select at least 1 file",hasArrow:!0,isDisabled:a.length>0,children:e.jsxs(z,{onClick:R,leftIcon:e.jsx(Y,{as:Je}),colorScheme:"yellow",isDisabled:a.length<1,children:["Commit ",a.length>0?`${a.length} File`:"",a.length>1?"s":""]})})]})})}function It(){const{selectedBranches:s,logData:o,setLogData:a}=P(),[n,r]=t.useState([]),[i,l]=t.useState(""),c=t.useCallback(h=>{l(h.target.value)},[l]),d=t.useCallback(()=>{a([])},[a]),u=o.length===s.length;return t.useEffect(()=>{if(o.length===0)return;const h=o.map(x=>x.logs).flat();r(x=>G.isEqual(x,h)?x:h)},[o]),{rowDataLogs:n,quickFilterLogsText:i,setQuickFilterLogsText:l,onQuickFilterLogsInputChanged:c,refreshLogs:d,areLogsFetched:u}}function Rt({rowDataLogs:s,quickFilterLogsText:o,setAutoFillSelection:a=null,isAutofill:n=!1}){const r=t.useMemo(()=>({sortable:!0,resizable:!1,wrapText:!0,autoHeight:!0,filter:!0,suppressMovable:!0,editable:!1,wrapHeaderText:!0,autoHeaderHeight:!0}),[]),i=t.useMemo(()=>{const d=[{field:"revision",headerName:"Revision",sort:"desc",width:130},{field:"date",headerName:"Date",sortable:!1},{field:"branchFolder",headerName:"Branch Folder",width:135},{field:"branchVersion",headerName:"Branch Version",width:125},{field:"author",headerName:"Author"},{field:"message",headerName:"Message",flex:1}];return n?[{checkboxSelection:!0,width:20,resizable:!1,suppressMovable:!1,filter:!1,editable:!1,headerClass:"branch-table-header-cell",cellClass:"branch-table-body-cell"},...d]:d},[n]),l=t.useRef(null),c=t.useCallback(()=>{var d,u;if(a){const h=(u=(d=l==null?void 0:l.current)==null?void 0:d.api)==null?void 0:u.getSelectedNodes().map(x=>x.data);a(h[0]||null)}},[a]);return e.jsx("div",{className:"ag-theme-balham-dark compact",style:{height:n?"90%":"85%",width:"100%"},children:e.jsx(he,{ref:l,rowData:s,defaultColDef:r,columnDefs:i,onSelectionChanged:c,quickFilterText:o,domLayout:"normal",columnMenu:"new",rowSelection:"single",suppressRowClickSelection:!n,animateRows:!1,immutableData:!0,suppressFlash:!0,enableCellTextSelection:!0,ensureDomOrder:!0,pagination:!0,paginationAutoPageSize:!0})})}function us({setAutoFillSelection:s=!1,isAutofill:o=!1}){const{selectedBranches:a,logData:n}=P(),{rowDataLogs:r,quickFilterLogsText:i,onQuickFilterLogsInputChanged:l,refreshLogs:c,areLogsFetched:d}=It();return d?e.jsxs(p,{h:"100%",children:[e.jsxs(N,{mb:4,width:"100%",alignItems:"center",columnGap:4,children:[e.jsxs(N,{alignItems:"center",width:"100%",children:[e.jsx(U,{mr:2,fontWeight:"600",whiteSpace:"nowrap",children:"Quick Filter:"}),e.jsx(de,{placeholder:"Type to search...",onInput:l,width:"100%"})]}),e.jsx(p,{children:e.jsx(I,{label:"Refresh",hasArrow:!0,children:e.jsx(_,{onClick:c,icon:e.jsx(De,{}),colorScheme:"yellow","aria-label":"Refresh"})})})]}),e.jsx(Rt,{rowDataLogs:r,quickFilterLogsText:i,setAutoFillSelection:s,isAutofill:o})]}):e.jsxs(p,{children:[e.jsxs(p,{mb:4,children:[e.jsx(U,{fontWeight:600,children:"Showing SVN Log for the following branches:"}),e.jsx(Me,{spacing:3,children:a.map(u=>{const h=n.find(x=>x.id===u.id);return e.jsxs(ae,{display:"flex",alignItems:"center",children:[e.jsx(re,{w:30,h:30,as:h?ie:Qs,color:"yellow.500"}),Fe(u["Branch Folder"],u["Branch Version"],u["SVN Branch"])]},u.branchId)})})]}),e.jsx(N,{justifyContent:"center",children:e.jsx(Ys,{value:n.length/a.length*360,color:"yellow.300",size:"100px",children:e.jsxs(Ks,{children:[n.length," / ",a.length]})})})]})}function Nt(s){const{data:o}=s,a=async()=>{window.open(o.url,"_blank")};return e.jsx(_,{"aria-label":"Diff",size:"sm",icon:e.jsx(Js,{}),onClick:a,colorScheme:"yellow"})}function Tt({rowDataTrello:s,quickFilterTrelloText:o,setAutoFillSelection:a}){const n=t.useMemo(()=>({sortable:!0,resizable:!1,wrapText:!0,autoHeight:!0,filter:!0,suppressMovable:!0,editable:!1,wrapHeaderText:!0,autoHeaderHeight:!0}),[]),r=t.useMemo(()=>[{checkboxSelection:!0,width:20,resizable:!1,suppressMovable:!1,filter:!1,editable:!1,headerClass:"branch-table-header-cell",cellClass:"branch-table-body-cell"},{field:"name",headerName:"Name",flex:1},{field:"lastActivityDate",headerName:"Last Activity Date"},{field:"url",headerName:"Goto Trello",filter:!1,sortable:!1,resizable:!1,cellRenderer:Nt,width:120}],[]),i=t.useRef(null),l=t.useCallback(()=>{var d,u;const c=(u=(d=i==null?void 0:i.current)==null?void 0:d.api)==null?void 0:u.getSelectedNodes().map(h=>h.data);a(c[0]||null)},[a]);return e.jsx("div",{className:"ag-theme-balham-dark compact",style:{height:"80%",width:"100%"},children:e.jsx(he,{ref:i,rowData:s,defaultColDef:n,columnDefs:r,onSelectionChanged:l,quickFilterText:o,domLayout:"normal",columnMenu:"new",rowSelection:"single",suppressRowClickSelection:!1,animateRows:!1,enableCellTextSelection:!0,pagination:!0,paginationAutoPageSize:!0})})}function Mt({setAutoFillSelection:s}){const{socket:o}=P(),{key:a,token:n,isTrelloIntegrationEnabled:r,emitTrelloCardNamesSearch:i}=cs(),[l,c]=t.useState(""),[d,u]=t.useState(""),[h,x]=t.useState([]),b=t.useCallback(G.debounce(g=>{g.trim()!==""&&i(a,n,g)},400),[a,n,i]),R=t.useCallback(g=>{c(String(g.target.value).trim())},[c]),B=t.useCallback(()=>{l.trim()!==""&&i(a,n,l)},[l,a,n,i]),m=t.useCallback(g=>{u(g.target.value)},[]);return t.useEffect(()=>(b(l),()=>b.cancel()),[l,b]),t.useEffect(()=>{const g=w=>{x(w&&w.length>0?w:[])};return o==null||o.on("trello-result-search-names-card",g),()=>o==null?void 0:o.off("trello-result-search-names-card",g)},[o]),r?e.jsxs(p,{h:"100%",children:[e.jsxs(N,{mb:4,width:"100%",alignItems:"center",columnGap:4,children:[e.jsxs(N,{alignItems:"center",width:"100%",children:[e.jsx(U,{mr:2,fontWeight:"600",whiteSpace:"nowrap",children:"Trello Query:"}),e.jsx(de,{placeholder:"Type to search...",onInput:R,width:"100%"})]}),e.jsx(p,{children:e.jsx(I,{label:"Resubmit Query",hasArrow:!0,children:e.jsx(_,{onClick:B,icon:e.jsx(De,{}),colorScheme:"yellow","aria-label":"Resubmit"})})})]}),e.jsx(N,{mb:4,width:"100%",alignItems:"center",columnGap:4,children:e.jsxs(N,{alignItems:"center",width:"100%",children:[e.jsx(U,{mr:2,fontWeight:"600",whiteSpace:"nowrap",children:"Quick Filter:"}),e.jsx(de,{placeholder:"Type to search...",onInput:m,width:"100%"})]})}),e.jsx(Tt,{rowDataTrello:h,quickFilterTrelloText:d,setAutoFillSelection:s})]}):e.jsx(p,{h:"100%",p:4,children:e.jsxs(U,{fontSize:"lg",fontWeight:"600",color:"red.500",children:["You need to"," ",e.jsxs(Qe,{href:"https://help.merge.dev/en/articles/8757597-trello-how-do-i-link-my-account",isExternal:!0,color:"yellow.500",children:["set up Trello Integration ",e.jsx(ts,{mx:"2px"})]})," ","in the configuration file to use this feature."]})})}function At({isModalOpen:s,closeModal:o}){const{setIssueNumber:a,setCommitMessage:n,setPostCommitData:r}=P(),[i,l]=t.useState(0),[c,d]=t.useState([null,null]),[u,h]=t.useState(!0),x=t.useCallback(m=>{l(m),d(m===0?g=>[g[0],null]:g=>[null,g[1]])},[l]),b=t.useCallback(m=>{d(g=>[m,...g.slice(1)])},[d]),R=t.useCallback(m=>{d(g=>[g[0],m])},[d]),B=t.useCallback(()=>{console.debug("Selected tab index:",i),console.debug("Selected autofill selection:",JSON.stringify(c,null,4));let m=c[i];if(i===0){const g=m.message,w=g.match(/\s*(Issue)*\s*(\d+)\s*/),k=w?w[2]:null,v=g.replace(/\s*(Issue)*\s*(\d+)?\s*(\([^\)]+\))*\s?:?\s*/,"");k&&a(T=>Object.fromEntries(Object.keys(T).map(C=>[C,k]))),v.trim()!==""&&n(v)}else{const g=m.name,w=g.match(/\s*(Issue)*\s*(\d+)\s*/),k=w?w[2]:null,v=g.replace(/\s*(Issue)*\s*(\d+)/,"");k&&a(T=>Object.fromEntries(Object.keys(T).map(C=>[C,k]))),v.trim()!==""&&n(v),r({type:"trello",data:m})}o()},[i,c,a,n,r,o]);return t.useEffect(()=>{h(!(c.length==2&&(c[0]||c[1])))},[c]),t.useEffect(()=>{d([null,null]),l(0)},[s]),e.jsxs(Ze,{isOpen:s,onClose:o,isCentered:!0,motionPreset:"slideInBottom",scrollBehavior:"inside",size:"xl",closeOnOverlayClick:!0,children:[e.jsx(Ce,{}),e.jsxs(es,{maxH:"95%",maxW:"95%",children:[e.jsx(we,{children:e.jsx(ee,{as:"h2",size:"lg",children:"Autofill Commit Message"})}),e.jsx(ve,{size:"lg"}),e.jsx(je,{children:e.jsx(p,{height:"70vh",children:e.jsxs(ns,{variant:"solid-rounded",colorScheme:"yellow",defaultIndex:0,isLazy:!0,h:"100%",onChange:m=>x(m),children:[e.jsxs(ls,{children:[e.jsx(be,{children:"SVN Logs"}),e.jsx(be,{children:"Trello"})]}),e.jsxs(os,{h:"90%",children:[e.jsx(pe,{px:0,pb:0,h:"100%",children:e.jsx(us,{setAutoFillSelection:b,isAutofill:!0})}),e.jsx(pe,{px:0,pb:0,h:"100%",children:e.jsx(Mt,{setAutoFillSelection:R})})]})]})})}),e.jsxs(Be,{children:[e.jsx(z,{mr:3,onClick:()=>o(),children:"Cancel"}),e.jsx(I,{hasArrow:!0,label:"Please select exactly one row!",placement:"top-start",isDisabled:!u,children:e.jsx(z,{colorScheme:"yellow",onClick:B,isDisabled:u,children:"Select"})})]})]})]})}function Lt(){const{config:s,updateConfig:o,setSourceBranch:a,setIssueNumber:n}=P(),[r,i]=t.useState({}),l=t.useCallback((c,d)=>{i(u=>({...u,[c]:d}))},[i]);return t.useEffect(()=>{!s||G.isEmpty(s)||(s.commitOptions?i(s.commitOptions):o(c=>({...c,commitOptions:{useFolderOnlySource:!1,useIssuePerFolder:!1,reusePreviousCommitMessage:!1}})))},[s]),t.useEffect(()=>{G.isEmpty(r)||o(c=>G.isEqual(c.commitOptions,r)?c:{...c,commitOptions:r})},[r]),t.useEffect(()=>{a(null)},[r==null?void 0:r.useFolderOnlySource,a]),t.useEffect(()=>{n({})},[r==null?void 0:r.useIssuePerFolder,n]),e.jsxs(p,{mb:4,children:[e.jsx(ee,{as:"h6",size:"sm",children:"Commit Options"}),e.jsx(ss,{colorScheme:"yellow",children:e.jsxs(Xs,{direction:"row",spacing:4,mt:2,children:[e.jsx(Z,{isChecked:r.useFolderOnlySource,onChange:c=>l("useFolderOnlySource",c.target.checked),children:e.jsx(I,{label:"Removes extra branch details from source branch.",hasArrow:!0,placement:"bottom-start",children:"Use Folder Only Source Branch?"})}),e.jsx(Z,{isChecked:r.useIssuePerFolder,onChange:c=>l("useIssuePerFolder",c.target.checked),children:e.jsx(I,{label:"Allows users to input issue number for each branch folder.",hasArrow:!0,placement:"bottom-start",children:"Use 1 Issue Per Folder?"})}),e.jsx(Z,{isChecked:r.reusePreviousCommitMessage,onChange:c=>l("reusePreviousCommitMessage",c.target.checked),children:e.jsx(I,{label:"Reuses the commit message from the previous commit made in Titan.",hasArrow:!0,children:"Reuse Previous Commit Message?"})})]})})]})}function Vt(){const{isDebug:s,setIsCommitMode:o,selectedBranchStatuses:a,showCommitView:n,setShowCommitView:r,selectedBranches:i,configurableRowData:l}=P(),[c,d]=t.useState({}),[u,h]=t.useState([]),[x,b]=t.useState([]),{isOpen:R,onOpen:B,onClose:m}=Ve(),{isOpen:g,onOpen:w,onClose:k}=Ve(),v=t.useMemo(()=>({resizable:!0,wrapText:!0,autoHeight:!0,filter:!0,suppressMovable:!0,editable:!1,wrapHeaderText:!0,autoHeaderHeight:!0}),[]);t.useEffect(()=>{if(i.length<1||n){i.length<1&&o(!1);return}d({})},[i,n]),t.useEffect(()=>{s&&(console.debug("Branch Status Rows:",a),console.debug("Selected Rows:",i))},[s,a,i]),t.useEffect(()=>{a.length===i.length&&(a.forEach(M=>{let E=M.id,$=M.status.filesToCommit,O=M.status.filesToUpdate;const y=l.find(W=>W.id===E);if(O.length>0){const W=Fe(y["Branch Folder"],y["Branch Version"],y["SVN Branch"]);d(H=>({...H,[W]:[...H[W]||[],...O]}))}if($.length>0){const W=$.map(H=>({branchId:E,"Branch Folder":y["Branch Folder"],"Branch Version":y["Branch Version"],"SVN Branch":y["SVN Branch"],"Full Path":H.path,"File Path":`${ft(M.status.branch)}\\${H.pathDisplay}`,"Local Status":H.wcStatus}));h(H=>[...H,...W.filter(K=>!["unversioned","missing"].includes(K["Local Status"]))]),b(H=>[...H,...W.filter(K=>["unversioned","missing"].includes(K["Local Status"]))])}}),r(!0))},[a,i,l]);const T=Object.keys(c).length>0,C=u.length>0,D=x.length>0,A=T||C||D;return e.jsxs(p,{children:[e.jsx(Lt,{}),e.jsx(p,{mb:6,children:e.jsx(vt,{openMessageAutoFillModal:w})}),e.jsx(Zs,{isLoaded:n&&A,startColor:"yelow.500",endColor:"yellow.500",children:e.jsxs(ns,{variant:"solid-rounded",colorScheme:"yellow",defaultIndex:T?0:C?1:2,isLazy:!1,children:[e.jsxs(ls,{children:[e.jsx(be,{isDisabled:!T,children:e.jsx(I,{label:"No files to update!",hasArrow:!0,isDisabled:T,children:"Files to Update"})}),e.jsx(be,{isDisabled:!C,children:e.jsx(I,{label:"No files to commit!",hasArrow:!0,isDisabled:C,children:"Local Changes"})}),e.jsx(be,{isDisabled:!D,children:e.jsx(I,{label:"No unversioned/missing files!",hasArrow:!0,isDisabled:D,children:"Untracked Changes"})})]}),e.jsxs(os,{children:[e.jsx(pe,{px:0,children:e.jsx(kt,{fileUpdates:c})}),e.jsx(pe,{px:0,children:e.jsx(Bt,{rowDataLocalChanges:u,setRowDataLocalChanges:h,defaultColDefsCommit:v})}),e.jsx(pe,{px:0,children:e.jsx(Dt,{rowDataUntrackedChanges:x,setRowDataUntrackedChanges:b,defaultColDefsCommit:v})})]})]})}),n&&!A?e.jsxs(U,{mt:4,className:"animation-pulse",fontWeight:600,textAlign:"center",children:["No changes have been spotted!",e.jsx("br",{}),"Please use the refresh button ðŸ‘‡ if you have recently made a change"]}):e.jsx(e.Fragment,{}),e.jsx(p,{mt:6,children:e.jsx(Ft,{openCommitModal:B})}),e.jsx(yt,{isModalOpen:R,closeModal:m}),e.jsx(At,{isModalOpen:g,closeModal:k})]})}function Et(){const{showSelectedBranchesLog:s,setShowSelectedBranchesLog:o}=P();return e.jsxs(et,{isOpen:s,onClose:()=>o(!1),placement:"left",size:"full",children:[e.jsx(Ce,{}),e.jsxs(st,{children:[e.jsx(ve,{size:"lg"}),e.jsx(we,{children:"Selected Branches: SVN Log"}),e.jsx(je,{children:e.jsx(p,{height:"100%",children:e.jsx(us,{})})})]})]})}function Pt(){const{toast:s,RaiseClientNotificaiton:o}=oe(),{isOpen:a,onOpen:n,onClose:r}=Ve(),i=t.useRef(),[l,c]=t.useState(!1);t.useEffect(()=>{if(!window.electron){o("Electron context is not available. Updates cannot be checked.","warning",5e3);return}return window.electron.on("update-available",()=>{s.closeAll(),n()}),window.electron.on("update-error",h=>{o(`An error occurred while checking for updates: ${h}`,"error",5e3),c(!1)}),()=>{window.electron.removeAllListeners("update-available"),window.electron.removeAllListeners("update-error")}},[s,n]);const d=t.useCallback(()=>{r(),o("You may update the application later by manually triggering an update check or wait until Titan does this","info",5e3)},[r,o]),u=t.useCallback(()=>{if(l){o("Update is already in progress. Please wait.","info",5e3);return}window.electron?(c(!0),window.electron.downloadUpdate().catch(h=>{c(!1),o(`An error occurred while downloading the update: ${h}`,"error",5e3)}),window.electron.on("update-downloaded",()=>{o("Update has been downloaded successfully. Titan will now restart to apply the update.","info",5e3),window.electron.removeAllListeners("update-downloaded"),r()}),window.electron.on("update-not-available",()=>{o("Titan is up to date","info",3e3),window.electron.removeAllListeners("update-not-available"),c(!1),r()})):o("Cannot update Titan in a non-desktop application environment","error",5e3)},[l,o,c,r]);return e.jsx(Ye,{isOpen:a,leastDestructiveRef:i,onClose:r,motionPreset:"slideInBottom",closeOnOverlayClick:!l,children:e.jsx(Ce,{children:e.jsxs(Ke,{children:[e.jsx(we,{fontSize:"lg",fontWeight:"bold",children:"Update Available"}),l?e.jsx(e.Fragment,{}):e.jsx(ve,{}),e.jsx(je,{children:"A new version of Titan is available. Would you like to download and install the update?"}),e.jsxs(Be,{children:[e.jsx(z,{colorScheme:"red",ref:i,onClick:d,isDisabled:l,children:"Cancel"}),e.jsx(z,{colorScheme:"yellow",onClick:u,ml:3,isDisabled:l,children:"Confirm"})]})]})})})}function zt(){if(!window.electron)return e.jsx(e.Fragment,{});const{colorMode:s}=Ge(),o=t.useCallback(()=>{window.electron.minimizeWindow()},[]),a=t.useCallback(()=>{window.electron.maximizeWindow()},[]),n=t.useCallback(()=>{window.electron.closeWindow()},[]);return e.jsx(tt.header,{w:"100%",position:"fixed",bgColor:s==="light"?"white":"#121212",className:"titanHead",zIndex:9999999,top:0,children:e.jsxs(N,{justifyContent:"space-between",alignItems:"center",p:2,position:"static",children:[e.jsx(ee,{as:"h6",size:"sm",noOfLines:1,className:"animation-fadein-left-forward",children:"Titan"}),e.jsxs(N,{alignItems:"center",columnGap:2,flexWrap:"nowrap",wrap:"nowrap",children:[e.jsx(_,{"aria-label":"Minimize",size:"xs",icon:e.jsx(nt,{}),onClick:o,colorScheme:"gray",_hover:{bg:"#FAF089",color:"#1A202C"}}),e.jsx(_,{"aria-label":"Maximize",size:"xs",icon:e.jsx(lt,{}),onClick:a,colorScheme:"gray",_hover:{bg:"#FAF089",color:"#1A202C"}}),e.jsx(_,{"aria-label":"Close",size:"xs",icon:e.jsx(Xe,{}),onClick:n,colorScheme:"gray",_hover:{bg:"#FEB2B2",color:"#1A202C"}})]})]})})}function Ot(){const{isCommitMode:s,selectedBranches:o,configurableRowData:a}=P(),{RaiseClientNotificaiton:n}=oe();return t.useEffect(()=>{if(window.electron)return window.electron.onAppClosing(()=>{n("App is closing, performing cleanup...","info",0),window.electron.closeWindow()}),()=>{window.electron.removeAppClosingListener()};console.warn("Electron specific logic is not available in browser mode.")},[]),e.jsxs(p,{className:"titanBody",children:[e.jsx(zt,{}),e.jsxs(p,{p:10,children:[e.jsx(bt,{}),e.jsx(Pt,{}),e.jsxs(N,{rowGap:4,flexDirection:"column",children:[e.jsx(p,{children:e.jsx(St,{})}),e.jsx(ot,{in:s,animateOpacity:!0,children:e.jsxs(p,{id:"sectionCommit",children:[e.jsxs(ee,{as:"h2",size:"lg",noOfLines:1,mb:4,className:"animation-pulse",lineHeight:"1.4",children:["Committing ",o.length==a.length?"All":`${o.length}/${a.length}`," Branch",o.length==1?"":"es"]}),e.jsx(Vt,{})]})})]}),e.jsx(Et,{})]})]})}const{definePartsStyle:hs,defineMultiStyleConfig:fs}=dt(ut.keys),Ut=hs({overlay:{bg:"blackAlpha.900"},dialog:{bg:"gray.900",color:"white",boxShadow:"rgba(255, 255, 255, 0.07) 0px 0px 20px 7px"},header:{bg:"gray.900",color:"white",borderRadius:"20px",p:4},body:{p:4,color:"white"},footer:{bg:"gray.900",p:4,color:"white",borderRadius:"20px"}}),Wt=fs({baseStyle:Ut}),Ht=hs({overlay:{bg:"blackAlpha.900"},dialog:{mt:gt,bg:"gray.900",color:"white",boxShadow:"rgba(255, 255, 255, 0.07) 0px 0px 20px 7px"},header:{bg:"gray.900",color:"white",borderRadius:"20px",p:4},body:{p:4,color:"white"},footer:{bg:"gray.900",p:2,color:"white",borderRadius:"20px"}}),$t=fs({baseStyle:Ht}),_t={initialColorMode:"dark",useSystemColorMode:!1},qe=at({config:_t,components:{Modal:Wt,Drawer:$t}});rt.createRoot(document.getElementById("root")).render(e.jsx(Ee.StrictMode,{children:e.jsxs(it,{theme:qe,children:[e.jsx(ct,{initialColorMode:qe.config.initialColorMode}),e.jsx(xt,{children:e.jsx(Ot,{})})]})}));
