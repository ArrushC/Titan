import{r as t,u as us,l as hs,R as Ae,j as e,d as qe,W as Ve,e as Pe,L as _e,I as fs,H as Z,T as D,f as H,g as K,M as ms,h as gs,i as xs,k as bs,m as ps,n as Cs,A as Ge,o as pe,p as Qe,q as Ce,s as we,t as ye,B as E,D as ws,F as N,V as js,v as Ss,w as ys,C as Ie,x as Be,y as Bs,z as ks,E as Ye,G as Ds,J as vs,K as Ke,N as Fs,S as Is,O as Rs,P as Oe,Q as Ts,U as Je,X as Xe,Y as Ns,Z as Ms,_ as As,$ as Vs,a0 as Ls,a1 as ze,a2 as b,a3 as Es,a4 as Ps,a5 as ke,a6 as P,a7 as Re,a8 as ae,a9 as oe,aa as re,ab as te,ac as Os,ad as Ze,ae as X,af as zs,ag as Us,ah as Ws,ai as Ue,aj as je,ak as Hs,al as Se,am as ie,an as Te,ao as Ne,ap as $s,aq as qs,ar as es,as as _s,at as Gs,au as Qs,av as Ys,aw as ss,ax as ts,ay as xe,az as ns,aA as be,aB as Ks,aC as Me,aD as Js,aE as Xs,aF as Zs,aG as et,aH as st,aI as tt,aJ as nt,aK as lt,aL as at,aM as ot,aN as rt,aO as it,aP as ct}from"./vendor.js";import{_ as G}from"./lodash.js";import{A as de}from"./ag-grid-react.js";import"./ag-grid-community.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=o(r);fetch(r.href,i)}})();const dt="/assets/Titan.png";function ce(s=[]){return(Array.isArray(s)?s:[s]).map(o=>(delete o["Branch Info"],o))}function De(s,a,o){return`${s==""?"Uncategorised":s} ${a==""?"Unversioned":a} ${String(o).split("\\").at(-1)}`}function ut(s){return String(s).split("\\").at(-1)}const ht="http://localhost:4000",ft="40px";function ge(s,a="info",o=3e3,n=!1){return{position:"top",variant:"solid",title:n?"Server Notification":"Client Notification",description:s,status:a,duration:o,isClosable:!0}}const ls=t.createContext({socket:null,toast:null,config:null,updateConfig:s=>{},isDebug:!1,setIsDebug:s=>{},configurableRowData:[],setConfigurableRowData:s=>{},branchInfos:{},setBranchInfos:s=>{},branchTableGridRef:null,selectedBranches:[],setSelectedBranches:s=>{},showSelectedBranchesLog:!1,setShowSelectedBranchesLog:s=>{},isCommitMode:!1,setIsCommitMode:s=>{},selectedBranchStatuses:[],setSelectedBranchStatuses:s=>{},localChangesGridRef:null,untrackedChangesGridRef:null,showCommitView:!1,setShowCommitView:s=>{},sourceBranch:null,setSourceBranch:s=>{},branchOptions:[],issueNumber:{},setIssueNumber:s=>{},commitMessage:"",setCommitMessage:s=>{},selectedLocalChanges:[],setSelectedLocalChanges:s=>{},selectedUntrackedChanges:[],setSelectedUntrackedChanges:s=>{},socketPayload:null,setSocketPayload:s=>{},postCommitData:{},setPostCommitData:s=>{},logData:[],setLogData:s=>{}}),L=()=>t.useContext(ls),mt=({children:s})=>{const[a,o]=t.useState(null),[n,r]=t.useState(null),i=us(),[l,c]=t.useState(()=>localStorage.getItem("isDebug")==="true");t.useEffect(()=>{const j=hs(ht);return r(j),j.on("connect",()=>{j.emit("titan-config-get","fetch"),j.once("titan-config-get",A=>{o(A),A||i(ge("Couldn't load data from the server","error",0))})}),j.on("notification",A=>{i(ge(A.description,A.status,A.duration,!0))}),j.on("disconnect",()=>{i(ge("Server Has Been Disconnected","warning",0,!0))}),j.on("reconnect",()=>{i(ge("Server Has Been Reconnected","success",2e3,!0))}),()=>{j.disconnect()}},[]),t.useEffect(()=>{localStorage.setItem("isDebug",String(l))},[l]);const u=t.useCallback(j=>{j!=null&&(console.debug("Saving config:",j),n==null||n.emit("titan-config-set",j))},[n]),d=t.useCallback(j=>{o(A=>{const M=j(A);return G.isEqual(A,M)?A:(u(M),M)})},[o,u]),[f,p]=t.useState([]),[C,F]=t.useState({}),v=t.useRef(null),[g,m]=t.useState([]),[S,k]=t.useState(!1),[x,w]=t.useState(!1),[B,O]=t.useState([]),$=t.useRef(null),V=t.useRef(null),[T,U]=t.useState(!1),[q,I]=t.useState(null),z=t.useMemo(()=>{let j=a&&a.commitOptions&&a.commitOptions.useFolderOnlySource,A=f.filter(M=>M["Branch Folder"]&&M["Branch Version"]&&M["SVN Branch"]&&M["Branch Folder"]!==""&&M["Branch Version"]!==""&&M["SVN Branch"]!=="");return j&&(A=A.reduce((M,me)=>(M.some(ve=>ve["Branch Folder"]===me["Branch Folder"])||M.push(me),M),[])),A.map(M=>({value:M.id,label:j?M["Branch Folder"]:De(M["Branch Folder"],M["Branch Version"],M["SVN Branch"])}))},[a,g,f]),[W,Y]=t.useState({}),[J,ee]=t.useState(""),[se,he]=t.useState([]),[y,h]=t.useState([]),[R,Q]=t.useState(null),[fe,Ee]=t.useState({}),[le,_]=Ae.useState([]);return t.useEffect(()=>{O([]),U(!1)},[f]),t.useEffect(()=>{if(!x||!T)return;const j=setTimeout(()=>{var A;(A=document.getElementById("sectionCommit"))==null||A.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100);return()=>clearTimeout(j)},[x,T]),t.useEffect(()=>{if(g.length<1||T){g.length<1&&w(!1);return}O([]),Q(null),ce(g).forEach(j=>{console.debug("Emitting svn-status-single for branch:",j),n==null||n.emit("svn-status-single",{selectedBranch:j})})},[n,g,T]),t.useEffect(()=>{const j=()=>{U(!1)};return n==null||n.on("branch-refresh-unseen",j),()=>n==null?void 0:n.off("branch-refresh-unseen",j)},[n]),t.useEffect(()=>{const j=A=>{l&&console.debug("Received branch status data:",A),O(M=>[...M,A])};return n==null||n.on("branch-status-single",j),()=>n==null?void 0:n.off("branch-status-single",j)},[n]),t.useEffect(()=>{_([])},[g]),t.useEffect(()=>{le.length===0&&n&&m(j=>(j.length>0&&n.emit("svn-log-selected",{selectedBranches:g}),j))},[le,n]),t.useEffect(()=>{const j=A=>{console.debug("Received svn-log-result from socket in SectionBranchLog component in background"),_(M=>M.some(ve=>ve.id===A.id)?M:[...M,A])};return n==null||n.on("svn-log-result",j),()=>n==null?void 0:n.off("svn-log-result",j)},[n]),e.jsx(ls.Provider,{value:{socket:n,toast:i,config:a,updateConfig:d,isDebug:l,setIsDebug:c,configurableRowData:f,setConfigurableRowData:p,branchInfos:C,setBranchInfos:F,branchTableGridRef:v,selectedBranches:g,setSelectedBranches:m,showSelectedBranchesLog:S,setShowSelectedBranchesLog:k,isCommitMode:x,setIsCommitMode:w,selectedBranchStatuses:B,setSelectedBranchStatuses:O,localChangesGridRef:$,untrackedChangesGridRef:V,showCommitView:T,setShowCommitView:U,sourceBranch:q,setSourceBranch:I,branchOptions:z,issueNumber:W,setIssueNumber:Y,commitMessage:J,setCommitMessage:ee,selectedLocalChanges:se,setSelectedLocalChanges:he,selectedUntrackedChanges:y,setSelectedUntrackedChanges:h,socketPayload:R,setSocketPayload:Q,postCommitData:fe,setPostCommitData:Ee,logData:le,setLogData:_},children:s})};function ue(){const{socket:s}=L(),a=t.useCallback(()=>{s==null||s.emit("titan-config-open",{})},[s]),o=t.useCallback((d,f,p,C)=>{s==null||s.emit("svn-update-single",{id:d,branch:f,version:p,folder:C})},[s]),n=t.useCallback((d,f,p,C)=>{s==null||s.emit("svn-info-single",{id:d,branch:f,version:p,folder:C})},[s]),r=t.useCallback(d=>{s==null||s.emit("svn-commit",d)},[s]),i=t.useCallback(d=>{s==null||s.emit("svn-files-revert",{filesToProcess:d})},[s]),l=t.useCallback(d=>{s==null||s.emit("svn-files-add-remove",{filesToProcess:d})},[s]),c=t.useCallback((d,f,p,C=null)=>{s==null||s.emit("trello-search-names-card",{key:d,token:f,query:p,limit:C})},[s]),u=t.useCallback((d,f,p,C)=>{s==null||s.emit("trello-update-card",{key:d,token:f,trelloData:p,commitResponses:C})},[s]);return{emitOpenConfig:a,emitUpdateSingle:o,emitInfoSingle:n,emitCommitPayload:r,emitFilesRevert:i,emitFilesAddRemove:l,emitTrelloCardNamesSearch:c,emitTrelloCardUpdate:u}}function ne(){const{toast:s}=L(),a=t.useCallback((o="",n="info",r=3e3,i=null)=>{const l=ge(o,n,r);if(s)return s(l);if(i)return i(l)},[s]);return{toast:s,RaiseClientNotificaiton:a}}function gt(){const{config:s,isDebug:a,setIsDebug:o}=L(),{emitOpenConfig:n}=ue(),{RaiseClientNotificaiton:r}=ne(),{colorMode:i,toggleColorMode:l}=qe(),c=t.useCallback(()=>{window.electron.checkForUpdates().then(d=>{console.debug("Check for updates result: ",d)}),window.electron.on("update-not-available",()=>{r("Titan is up to date","info",3e3),window.electron.removeAllListeners("update-not-available")})},[r]),u=t.useCallback(()=>{window.electron&&window.electron.getAppVersion().then(d=>{r(`Application Version: v${d}`,"info",2e3)})},[r]);return e.jsxs(Ve,{my:5,spacingY:5,justify:"space-between",children:[e.jsxs(Pe,{alignItems:"center",children:[e.jsx(_e,{onClick:u,children:e.jsx(fs,{src:dt,alt:"Titan Logo",boxSize:"100px",mr:5,borderRadius:"full"})}),e.jsx(Z,{as:"h2",size:"2xl",noOfLines:1,className:"animation-fadein-forward",children:"Welcome back"}),e.jsx(Z,{as:"h2",size:"2xl",noOfLines:1,p:2,className:"animation-handwave",children:"ðŸ‘‹"})]}),e.jsxs(Pe,{alignItems:"center",columnGap:2,children:[e.jsx(D,{label:"Toggle Light/Dark Mode",hasArrow:!0,placement:"left",children:e.jsx(H,{"aria-label":"Toggle light/dark mode",colorScheme:"yellow",icon:e.jsx(K,{as:i==="light"?ms:gs}),onClick:l})}),e.jsx(D,{label:"Check For Updates",hasArrow:!0,placement:"bottom-start",isDisabled:!window.electron,children:e.jsx(H,{"aria-label":"Check for updates",colorScheme:"yellow",icon:e.jsx(K,{as:xs}),onClick:c,isDisabled:!window.electron})}),e.jsx(D,{label:"Open Config File",hasArrow:!0,placement:"bottom-start",children:e.jsx(H,{"aria-label":"Open configuration file",colorScheme:"yellow",icon:e.jsx(K,{as:bs}),onClick:()=>n()})}),e.jsx(D,{label:`Current Debug Mode: ${a?"on":"off"}`,hasArrow:!0,placement:"right",children:e.jsx(H,{"aria-label":"Toggle Debug Mode",colorScheme:"yellow",icon:a?e.jsx(K,{as:Cs}):e.jsx(K,{as:ps}),onClick:()=>o(d=>!d)})})]})]})}function xt({isAlertOpen:s,onCloseAlert:a,cancelRef:o,removeSelectedRows:n}){return e.jsx(Ge,{isOpen:s,leastDestructiveRef:o,onClose:a,children:e.jsx(pe,{children:e.jsxs(Qe,{children:[e.jsx(Ce,{fontSize:"lg",fontWeight:"bold",children:"Delete Selected Rows"}),e.jsx(we,{children:"Are you sure you want to delete the selected rows? This action cannot be undone."}),e.jsxs(ye,{children:[e.jsx(E,{ref:o,onClick:a,children:"Cancel"}),e.jsx(E,{colorScheme:"red",onClick:n,ml:3,children:"Delete"})]})]})})})}function We(){const{innerWidth:s,innerHeight:a}=window;return{width:s,height:a}}function bt(){const[s,a]=t.useState(We());return t.useEffect(()=>{function o(){a(We())}return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),s}function Fe(s){const{icon:a,onClick:o,colorScheme:n,label:r,size:i}=s,l=t.useCallback(()=>{o&&o()},[o]);return e.jsx(D,{label:window.electron?r:"Feature must be used in desktop application",children:e.jsx(H,{"aria-label":r,size:i,icon:a,onClick:l,colorScheme:n,isDisabled:!window.electron})})}function pt({rowData:s,onRowValueChanged:a}){const{config:o,branchTableGridRef:n,updateConfig:r,isDebug:i,selectedBranches:l,setSelectedBranches:c,setSelectedBranchStatuses:u,setShowCommitView:d}=L(),f=bt(),[p,C]=t.useState(f.height>768),F=t.useCallback(x=>{const w={...x,id:String(Date.now()),"Branch Info":"Hasn't been refreshed"};r(B=>({...B,branches:ce([...B.branches,w])}))},[r]),v=t.useCallback(x=>{var B,O,$,V;const w=(O=(B=n==null?void 0:n.current)==null?void 0:B.api)==null?void 0:O.getSelectedNodes().map(T=>T.data);if(i&&console.log("SectionBranches.jsx: onSelectionChanged - event",x),i&&console.log("SectionBranches.jsx: onSelectionChanged - selectedBranches",l),(x==null?void 0:x.source)=="rowDataChanged"){const T=l.map(U=>U.id);(V=($=n==null?void 0:n.current)==null?void 0:$.api)==null||V.forEachNode(U=>{T.includes(U.data.id)&&U.setSelected(!0)});return}else["api"].includes(x==null?void 0:x.source)||(c(w),u([]),d(!1))},[i,n,l,c,d]),g=t.useCallback(x=>{const w=[];x.api.forEachNode(B=>w.push(B.data)),i&&console.debug("SectionBranches.jsx: onRowDragEnd - movedRowData",w),r(B=>({...B,branches:ce(w)}))},[r,i]),m=t.useCallback(x=>{const w=o==null?void 0:o.branchFolderColours[x.data["Branch Folder"]];return{backgroundColor:w?`${w}20`:"transparent"}},[o==null?void 0:o.branchFolderColours]),S=t.useMemo(()=>({resizable:!0,wrapText:!0,autoHeight:!0,filter:!0,suppressMovable:!0,editable:!0,wrapHeaderText:!0,autoHeaderHeight:!0}),[]),k=t.useMemo(()=>{const x=[{headerCheckboxSelection:!0,checkboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,width:25,resizable:!1,suppressMovable:!1,filter:!1,editable:!1,headerClass:"branch-table-header-cell",cellClass:"branch-table-body-cell"},{field:"Branch Folder",resizable:!1,width:130,valueFormatter:w=>w.value.toUpperCase()},{field:"Branch Version",resizable:!1,width:130},{field:"SVN Branch",flex:2},{field:"Branch Info",editable:!1,resizable:!1,width:125},{headerName:"",resizable:!0,sortable:!1,filter:!1,editable:!1,cellRenderer:w=>e.jsxs(N,{columnGap:1,children:[e.jsx(Fe,{icon:e.jsx(js,{}),onClick:()=>{var B;return(B=window.electron)==null?void 0:B.openVSCode({fullPath:w.data["SVN Branch"]})},colorScheme:"yellow",label:"Open VSCode",size:"sm"}),e.jsx(Fe,{icon:e.jsx(Ss,{}),onClick:()=>{var B;return(B=window.electron)==null?void 0:B.openTerminal({folderPath:w.data["SVN Branch"]})},colorScheme:"yellow",label:"Open Terminal",size:"sm"}),e.jsx(Fe,{icon:e.jsx(ys,{}),onClick:()=>console.warn("Unused button"),colorScheme:"yellow",label:"Script file name",size:"sm"}),e.jsx(D,{label:"Copy Row",hasArrow:!0,children:e.jsx(H,{colorScheme:"yellow","aria-label":"Copy Row",size:"sm",onClick:()=>F(w.data),icon:e.jsx(Ie,{})})})]})}];return p?[{field:"",rowDrag:!0,resizable:!1,filter:!1,suppressMovable:!1,editable:!1,width:20,cellRenderer:ws,headerClass:"branch-table-header-cell",cellClass:"branch-table-body-cell"},...x]:x},[o,p,F]);return t.useEffect(()=>{C(f.height>768)},[f]),e.jsx("div",{className:"ag-theme-balham-dark compact",style:{height:p?"auto":"428px",width:"100%"},children:e.jsx(de,{ref:n,rowData:s,defaultColDef:S,columnDefs:k,stopEditingWhenCellsLoseFocus:!0,getRowStyle:m,onRowDragEnd:g,domLayout:p?"autoHeight":"normal",suppressRowClickSelection:!0,rowSelection:"multiple",rowMultiSelectWithClick:!0,animateRows:!0,rowDragManaged:!0,onSelectionChanged:v,onRowValueChanged:a,columnMenu:"new",editType:"fullRow",deltaRowDataMode:!0,getRowNodeId:x=>x.id,immutableData:!0,suppressFlash:!0,enableCellTextSelection:!0,ensureDomOrder:!0,pagination:!p,paginationAutoPageSize:!1,paginationPageSizeSelector:!1,paginationPageSize:10})})}function Ct(){const{updateConfig:s,isDebug:a,socket:o,configurableRowData:n,setConfigurableRowData:r,branchInfos:i,config:l,setBranchInfos:c,setSelectedBranches:u,setSelectedBranchStatuses:d,showCommitView:f,setShowCommitView:p}=L(),[C,F]=t.useState([]),v=t.useCallback(g=>{a&&console.log("AG Grid: onRowValueChanged - event",g),a&&console.log("AG Grid: onRowValueChanged - rowDataBranches",C),s(m=>({...m,branches:ce(C)}))},[C,s,a]);return t.useEffect(()=>{const g=G.debounce(()=>{const m=n.map(S=>({...S,"Branch Info":i[S.id]||"Hasn't been refreshed"}));F(S=>G.isEqual(m,S)?S:m)},300);return g(),()=>g.cancel()},[n,i]),t.useEffect(()=>{r(g=>l&&l.branches&&!G.isEqual(l.branches,g)?l.branches:g)},[l]),t.useEffect(()=>{const g=m=>{c(S=>{const k={...S,[m.id]:m.info};return console.debug("branch-info-single data received:",m),console.debug("branch-info-single newBranchInfos",k),u(x=>(x.find(B=>B.id===m.id)&&f&&(d([]),p(!1)),x)),k})};return o==null||o.on("branch-info-single",g),()=>o==null?void 0:o.off("branch-info-single")},[o,f]),{rowDataBranches:C,setRowDataBranches:F,onRowValueChanged:v}}function wt(){const{socket:s,updateConfig:a,isDebug:o,setShowSelectedBranchesLog:n,configurableRowData:r,branchTableGridRef:i,selectedBranches:l,setSelectedBranches:c,isCommitMode:u,setIsCommitMode:d,setSelectedBranchStatuses:f,setShowCommitView:p}=L(),{emitUpdateSingle:C,emitInfoSingle:F}=ue(),{RaiseClientNotificaiton:v}=ne(),[g,m]=t.useState(!1),S=t.useRef(),k=()=>m(!1),{rowDataBranches:x,setRowDataBranches:w,onRowValueChanged:B}=Ct(),[O,$]=t.useState(0),[V,T]=t.useState([]),U=t.useCallback(()=>{var y,h;o&&console.log("SectionBranches.jsx: clearSelection: START"),(h=(y=i==null?void 0:i.current)==null?void 0:y.api)==null||h.deselectAll(),c([]),d(!1)},[o,i,c]),q=t.useCallback(()=>{var h,R;const y=(R=(h=i==null?void 0:i.current)==null?void 0:h.api)==null?void 0:R.getSelectedNodes().map(Q=>Q.data);c(y),m(!0)},[i,c]),I=t.useCallback(()=>{const y={id:String(Date.now()),"Branch Folder":"","Branch Version":"","SVN Branch":"","Branch Info":""};a(h=>({...h,branches:ce([...h.branches,y])}))},[a]),z=t.useCallback(()=>{l.forEach(y=>{C(y.id,y["SVN Branch"],y["Branch Version"],y["Branch Folder"])})},[l,C]),W=t.useCallback(()=>{V.forEach(y=>{C(y.id,y["SVN Branch"],y["Branch Version"],y["Branch Folder"])})},[V,C]),Y=t.useCallback(()=>{const y=l.map(R=>R.id),h=x.filter(R=>!y.includes(R.id));console.log("SectionBranches.jsx: removeSelectedRows - updatedData",h),a(R=>({...R,branches:ce(h)})),U(),k()},[l,x,a]),J=t.useCallback(()=>{n(!0)},[]),ee=t.useCallback(()=>{w(y=>{const h=[...y];return l.forEach(R=>{const Q=h.findIndex(fe=>fe.id===R.id);h[Q]["Branch Info"]="Refreshing..."}),h}),l.forEach(y=>{F(y.id,y["SVN Branch"],y["Branch Version"],y["Branch Folder"])})},[l,F]),se=t.useCallback(()=>{if(u)return;v("Refreshing all branches. Please wait until this is done!","info",3e3);const y=Date.now();r.forEach(h=>{F(h.id,h["SVN Branch"],h["Branch Version"],h["Branch Folder"])}),$(y)},[r,F,v,u]),he=t.useCallback(()=>{d(y=>!y),p(!1)},[d]);return t.useEffect(()=>{const y=x.filter(h=>String(h["Branch Info"]).toLowerCase().includes("-"));T(y)},[x]),t.useEffect(()=>{const h=Date.now();if(r.length>0){h-O>3e5&&se();const R=setInterval(()=>{se()},3e5);return()=>clearInterval(R)}},[r,O,se]),t.useEffect(()=>{const y=h=>{o&&console.debug("branch-success-single data received:",h),F(h.id,h.branch,h.version,h.folder)};return s==null||s.on("branch-success-single",y),()=>s==null?void 0:s.off("branch-success-single",y)},[o,s,F]),e.jsxs("div",{children:[e.jsxs(Ve,{mb:4,justify:"space-between",children:[e.jsxs(N,{columnGap:2,children:[e.jsx(D,{label:"Requires at least 1 branch",isDisabled:l.length>0,hasArrow:!0,children:e.jsxs(E,{onClick:ee,leftIcon:e.jsx(Be,{}),colorScheme:"yellow",isDisabled:l.length<1,children:["Refresh ",l.length>0?`${l.length} Branch`:"",l.length>1?"es":""]})}),e.jsx(D,{label:"Requires at least 1 branch",isDisabled:l.length>0,hasArrow:!0,children:e.jsxs(E,{onClick:z,leftIcon:e.jsx(K,{as:Bs}),colorScheme:"yellow",isDisabled:l.length<1,children:["Update ",l.length>0?`${l.length} Branch`:"",l.length>1?"es":""]})}),e.jsx(D,{label:"Requires at least 1 branch",isDisabled:l.length>0,hasArrow:!0,children:e.jsx(E,{onClick:he,leftIcon:e.jsx(K,{as:u?ks:Ye}),colorScheme:"yellow",isDisabled:l.length<1,children:u?"Undo Commit":"Commit"})}),e.jsx(D,{label:"Requires at least 1 branch",isDisabled:l.length>0,hasArrow:!0,children:e.jsx(E,{onClick:J,leftIcon:e.jsx(Ds,{}),colorScheme:"yellow",isDisabled:l.length<1,children:"View Logs"})})]}),e.jsx(N,{columnGap:2,children:e.jsx(D,{label:"No outdated branches to update",isDisabled:V.length>0,hasArrow:!0,children:e.jsx(E,{onClick:W,leftIcon:e.jsx(vs,{}),colorScheme:"yellow",isDisabled:V.length<1,children:"Update Outdated"})})})]}),e.jsx(pt,{rowData:x,onRowValueChanged:B}),e.jsxs(N,{columnGap:2,mt:4,children:[e.jsx(D,{label:"Please select at least 1 branch",isDisabled:l.length>0,hasArrow:!0,children:e.jsxs(E,{onClick:U,leftIcon:e.jsx(Ke,{}),colorScheme:"red",isDisabled:l.length<1,children:["Deselect ",l.length>0?`${l.length} Branch`:"",l.length>1?"es":""]})}),e.jsx(D,{label:"Please select at least 1 branch",isDisabled:l.length>0,hasArrow:!0,children:e.jsxs(E,{onClick:q,leftIcon:e.jsx(Fs,{}),colorScheme:"red",isDisabled:l.length<1,children:["Delete ",l.length>0?`${l.length} Branch`:"",l.length>1?"es":""]})}),e.jsx(E,{onClick:I,leftIcon:e.jsx(Is,{boxSize:8}),colorScheme:"green",children:"New Row"})]}),e.jsx(xt,{isAlertOpen:g,onCloseAlert:k,cancelRef:S,removeSelectedRows:Y})]})}function as(s){const{data:a,onDiffResult:o}=s,n=t.useCallback(async()=>{try{const r=await window.electron.openTortoiseSVNDiff({fullPath:a["Full Path"],branchFolder:a["Branch Folder"],branchVersion:a["Branch Version"]});o(r)}catch(r){o({success:!1,error:r.message})}},[a,o]);return e.jsx(H,{"aria-label":"Diff",size:"sm",icon:e.jsx(Rs,{}),onClick:n,colorScheme:"yellow"})}function os(){const{config:s}=L(),{emitTrelloCardNamesSearch:a,emitTrelloCardUpdate:o}=ue(),n=s==null?void 0:s.trelloIntegration,r=(n==null?void 0:n.key)||null,i=(n==null?void 0:n.token)||null,l=r&&i&&r.trim()!==""&&i.trim()!==""&&r.toUpperCase()!=="TRELLO_API_KEY"&&i.toUpperCase!=="TRELLO_TOKEN";return{key:r,token:i,isTrelloIntegrationEnabled:l,emitTrelloCardNamesSearch:a,emitTrelloCardUpdate:o}}function jt({isModalOpen:s,closeModal:a}){const{socket:o,setIsCommitMode:n,setSelectedBranchStatuses:r,setShowCommitView:i,socketPayload:l,postCommitData:c,setPostCommitData:u}=L(),{emitUpdateSingle:d,emitCommitPayload:f}=ue(),{key:p,token:C,isTrelloIntegrationEnabled:F,emitTrelloCardUpdate:v}=os(),{RaiseClientNotificaiton:g}=ne(),[m,S]=t.useState([]),{onCopy:k,value:x,setValue:w,hasCopied:B}=Oe(""),{onCopy:O,value:$,setValue:V,hasCopied:T}=Oe(""),U=t.useCallback(h=>{h.success?g("TortoiseSVN diff opened successfully","success",3e3):g(`Error opening TortoiseSVN diff: ${JSON.stringify(h.error,null,4)}`,"error",0)},[g]),q=[{title:"Review",description:"Confirm SVN changes"},{title:"Commit",description:"Commit changes"},{title:"Complete",description:"Process Completed"}],{activeStep:I,setActiveStep:z}=Ts({index:1,count:q.length}),W=t.useMemo(()=>({resizable:!1,wrapText:!0,autoHeight:!0,filter:!0,suppressMovable:!0,editable:!1,wrapHeaderText:!0,autoHeaderHeight:!0}),[]),Y=t.useMemo(()=>[{field:"Branch Folder"},{field:"Branch Version",sort:"asc"},{field:"File Path",flex:1},{field:"Local Status",headerTooltip:"Working Copy"},{headerName:"Diff",filter:!1,sortable:!1,cellRenderer:as,cellRendererParams:{onDiffResult:U},width:90}],[]),J=t.useCallback((h,R=!0)=>{const Q="â€‹".repeat(7),fe=h.includes("MarkupSupport")?`\r
${Q}`:`\r
`,le=m.sort((_,j)=>_["Branch Version"].localeCompare(j["Branch Version"])).map(_=>{const j=[];h.includes("BranchFolder")&&j.push(_["Branch Folder"]),h.includes("BranchVersion")&&j.push(_["Branch Version"]),h.includes("SVNBranch")&&j.push(_.branchPathFolder);let A=j.join(" ").trim();if(h.includes("IssueNumber")){const me=_.branchIssueNumber;A+=` Issue [${me}]`}const M=_.revision?_.revision:_.errorMessage||"Error";return A+=` Revision [${M}]`,A});return R?le.join(fe):le},[m,l]),ee=t.useCallback(h=>{const R=J(h);w(R)},[J,w]),se=t.useCallback(()=>{z(h=>h-1)},[z]),he=t.useCallback(()=>{if(c.type!=="trello"){g("Trello Autofill is not enabled for this commit","error");return}const h=c.data,R=J(["BranchFolder","BranchVersion","IssueNumber"],!1);v(p,C,h,R),g("Updating Trello card with commit information","info"),u(null)},[c,g,J]),y=t.useCallback(()=>{z(h=>{switch(h){case 1:f(l);case 2:w(""),V("");break;case 3:return k(),g("Updating selected branches! Please wait","info",1500),m.forEach(R=>{d(R.branchId,R["SVN Branch"],R["Branch Version"],R["Branch Folder"])}),n(!1),r([]),i(!1),a(),1}return h+1})},[z,f,l,w,V,k,g,m,d,n,r,i,a]);return t.useEffect(()=>{z(1),S([]),w(""),V("")},[s,S]),t.useEffect(()=>{!s||I!=0||(a(),z(1),S([]),w(""),V(""))},[I,s]),t.useEffect(()=>{!s||I!=3||(g("The commit process has been completed successfully","success",5e3),ee(["BranchFolder","BranchVersion","SVNBranch"]),V(l.commitMessage||""))},[g,I,s,ee]),t.useEffect(()=>{const h=R=>{S(Q=>[...Q,R])};return o==null||o.on("svn-commit-status-live",h),()=>o==null?void 0:o.off("svn-commit-status-live",h)},[o]),t.useEffect(()=>{if(I!=2)return;const h=setTimeout(()=>{m.length>0&&m[0].bulkCommitLength==m.length&&z(3)},3e3);return()=>clearTimeout(h)},[I,m]),t.useEffect(()=>{(B||T)&&g("Copied to Clipboard","success",1500)},[B,T,g]),!s||!l?e.jsx(e.Fragment,{}):e.jsxs(Je,{isOpen:s,onClose:a,isCentered:!0,motionPreset:"slideInBottom",scrollBehavior:"inside",size:"xl",closeOnOverlayClick:I==1,children:[e.jsx(pe,{}),e.jsxs(Xe,{maxH:"85%",maxW:"95%",children:[e.jsxs(Ce,{display:"flex",justifyContent:"space-between",maxWidth:I==1?"94%":"100%",children:[e.jsx(Z,{as:"h2",size:"lg",children:"Commit Selected Files"}),e.jsx(Ns,{index:I-1,mb:0,size:"sm",colorScheme:"yellow",children:q.map((h,R)=>e.jsxs(Ms,{children:[e.jsx(As,{children:e.jsx(Vs,{complete:e.jsx(Ls,{}),incomplete:e.jsx(ze,{}),active:e.jsx(ze,{})})}),e.jsx(b,{flexShrink:"0",children:e.jsx(Es,{children:h.title})}),e.jsx(Ps,{})]},R))})]}),I==1?e.jsx(ke,{size:"lg",py:6}):e.jsx(e.Fragment,{}),e.jsx(we,{children:e.jsxs(b,{children:[I!=1?e.jsx(e.Fragment,{}):e.jsxs(b,{children:[e.jsxs(b,{mb:4,children:[e.jsx(P,{fontWeight:600,children:"Please confirm that the following information is correct before proceeding to commit your files:"}),e.jsxs(Re,{spacing:3,children:[e.jsxs(ae,{children:[e.jsx(oe,{as:re,color:"yellow.500"}),"Source Branch: ",e.jsx(te,{children:De(l.sourceBranch["Branch Folder"],l.sourceBranch["Branch Version"],l.sourceBranch["SVN Branch"])})]}),e.jsxs(ae,{children:[e.jsx(oe,{as:re,color:"yellow.500"}),"Issue Numbers: ",e.jsx(te,{children:Object.entries(l.issueNumber).map(h=>`${h[1]} (${h[0]})`).join(", ")})]}),e.jsxs(ae,{children:[e.jsx(oe,{as:re,color:"yellow.500"}),"Commit Message: ",e.jsx(te,{children:l.commitMessage})]}),e.jsxs(ae,{children:[e.jsx(oe,{as:re,color:"yellow.500"}),"Example:"," ",e.jsxs(te,{children:["Issue ",l.issueNumber[l.sourceBranch["Branch Folder"]]," (",l.sourceBranch["Branch Folder"]," ",l.sourceBranch["Branch Version"],"): ",l.commitMessage]})]})]})]}),e.jsx(b,{children:e.jsx("div",{className:"ag-theme-balham-dark compact",style:{height:"350px",width:"100%"},children:e.jsx(de,{rowData:l.filesToProcess,defaultColDef:W,columnDefs:Y,domLayout:"normal",columnMenu:"new",pagination:!0,paginationAutoPageSize:!0})})})]}),I!=2?e.jsx(e.Fragment,{}):e.jsxs(b,{children:[e.jsxs(P,{fontWeight:600,children:["Please wait while the files are being committed to the SVN repository.",e.jsx("br",{}),"Current live status of the commit process:"]}),e.jsx(b,{children:e.jsx(Re,{spacing:3,children:m.map((h,R)=>e.jsxs(ae,{children:[e.jsx(oe,{as:h.errorMessage?Os:re,color:h.errorMessage?"red.500":"yellow.500"}),h.branchString,":Â ",e.jsx(te,{children:h.errorMessage||h.revision})]},R))})})]}),I!=3?e.jsx(e.Fragment,{}):e.jsxs(b,{children:[e.jsx(b,{mb:4,children:e.jsxs(P,{fontWeight:600,children:["The commit process has been completed successfully.",e.jsx("br",{}),"Please find your revisions here for view and copy:"]})}),e.jsxs(N,{columnGap:10,alignItems:"center",children:[e.jsxs(b,{children:[e.jsx(Z,{as:"h3",size:"md",children:"SVN Revisions"}),e.jsx(b,{children:e.jsx("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:x})})]}),e.jsx(b,{children:e.jsx(D,{hasArrow:!0,label:"Copy to clipboard",children:e.jsx(H,{"aria-label":"Copy To Clipboard",onClick:k,icon:e.jsx(Ie,{}),colorScheme:"yellow"})})})]}),e.jsxs(b,{my:4,children:[e.jsx(P,{fontWeight:600,children:"Modify the clipboard text to include..."}),e.jsx(Ze,{colorScheme:"yellow",defaultValue:["BranchFolder","BranchVersion"],onChange:ee,children:e.jsxs(Ve,{children:[e.jsx(X,{value:"BranchFolder",children:"Branch Folder"}),e.jsx(X,{value:"BranchVersion",children:"Branch Version"}),e.jsx(X,{value:"SVNBranch",children:"SVN Branch"}),e.jsx(X,{value:"IssueNumber",children:"Issue Number"}),e.jsx(X,{value:"MarkupSupport",children:"Markup Support"})]})})]}),e.jsxs(N,{columnGap:10,alignItems:"center",children:[e.jsxs(b,{children:[e.jsx(P,{fontWeight:600,children:"Here is your SVN commit message for the source branch:"}),l.sourceBranch&&l.sourceBranch["Branch Folder"]&&l.sourceBranch["Branch Version"]?e.jsx(te,{children:`Issue ${l.issueNumber[l.sourceBranch["Branch Folder"]]} (${l.sourceBranch["Branch Folder"]} ${l.sourceBranch["Branch Version"]}): ${$}`}):e.jsx(te,{children:"Source information is undefined. Please check that you have entered the correct details otherwise contact the developer!"})]}),e.jsx(D,{hasArrow:!0,label:"Copy to clipboard",children:e.jsx(H,{"aria-label":"Copy To Clipboard",onClick:O,icon:e.jsx(Ie,{}),colorScheme:"yellow"})})]})]})]})}),e.jsx(ye,{children:e.jsxs(N,{flex:1,justifyContent:"space-between",children:[e.jsx(N,{columnGap:2,children:e.jsx(D,{hasArrow:!0,label:"Cannot undo the commit currently",isDisabled:I<2,children:e.jsx(E,{onClick:se,mr:3,isDisabled:I>=2,children:I==1?"Cancel":"Previous"})})}),e.jsxs(N,{columnGap:2,children:[e.jsx(D,{hasArrow:!0,label:"Requires Trello Autofill",isDisabled:(c==null?void 0:c.type)==="trello"&&F,children:e.jsx(E,{colorScheme:"yellow",leftIcon:e.jsx(K,{as:zs}),onClick:he,isDisabled:I<3||(c==null?void 0:c.type)!="trello"||!F,children:"Update Card"})}),e.jsx(D,{hasArrow:!0,label:"Cannot undo the commit currently",isDisabled:I!=2,children:e.jsx(E,{colorScheme:"yellow",onClick:y,isDisabled:I==2,children:I==q.length?"Complete":"Next"})})]})]})})]})]})}function St({fileUpdates:s}){return e.jsx(b,{children:Object.keys(s).length>0?e.jsxs(b,{children:[e.jsx(P,{mb:4,children:"Below are the list of files which have been changed on your machine but there exists a newer version of them in the repository:"}),e.jsx(b,{maxHeight:"200px",overflowY:"auto",children:e.jsxs(Us,{children:[e.jsx(Ws,{children:e.jsxs(Ue,{children:[e.jsx(je,{children:"Branch"}),e.jsx(je,{children:"Path"}),e.jsx(je,{children:e.jsx(D,{label:"Working Copy",hasArrow:!0,children:"Local Status"})}),e.jsx(je,{children:e.jsx(D,{label:"Repository",hasArrow:!0,children:"Remote Status"})})]})}),e.jsx(Hs,{children:Object.keys(s).map(a=>e.jsx(Ae.Fragment,{children:s[a].map((o,n)=>e.jsxs(Ue,{children:[e.jsx(Se,{children:a}),e.jsx(Se,{children:o.pathDisplay}),e.jsx(Se,{children:o.wcStatus}),e.jsx(Se,{children:o.reposStatus})]},n))},a))})]})}),e.jsx(P,{mt:4,children:"If you wish to commit these files, please update the associated branches!"})]}):e.jsx(b,{children:e.jsx(P,{children:"Your selected branches do not contain any changed files for which a newer version exists in the repository."})})})}function yt({rowDataLocalChanges:s,setRowDataLocalChanges:a,defaultColDefsCommit:o}){const{localChangesGridRef:n,isDebug:r,selectedBranches:i,showCommitView:l,setSelectedLocalChanges:c,selectedLocalChanges:u}=L(),{emitFilesRevert:d}=ue(),{RaiseClientNotificaiton:f}=ne(),[p,C]=t.useState(""),F=t.useCallback(()=>{d(u)},[d,u]),v=t.useCallback(k=>{C(k.target.value)},[C]),g=t.useCallback(k=>{var B,O,$,V;if(console.debug("PanelLocalChanges.jsx: onFileViewSelectionChanged - event",k),String(k==null?void 0:k.source).toLowerCase().includes("api"))return;let x=(O=(B=n==null?void 0:n.current)==null?void 0:B.api)==null?void 0:O.getSelectedNodes().map(T=>T.data);r&&console.debug("PanelLocalChanges.jsx: onFileViewSelectionChanged - selectedBranches",x);const w=x.filter(T=>T["Local Status"].toLowerCase()==="added");(V=($=n==null?void 0:n.current)==null?void 0:$.api)==null||V.forEachNode(T=>{w.some(q=>q["File Path"].includes(T.data["File Path"])&&q["File Path"]!==T.data["File Path"])&&T.data["Local Status"].toLowerCase()==="added"&&!T.isSelected()&&(T.setSelected(!0),x.push(T.data),console.debug("PanelLocalChanges.jsx (onFileViewSelectionChanged): Adding ancestor node: ",T))}),c(x)},[n,r,c]),m=t.useCallback(k=>{k.success?f("TortoiseSVN diff opened successfully","success",3e3):f(`Error opening TortoiseSVN diff: ${JSON.stringify(k.error,null,4)}`,"error",0)},[f]),S=t.useMemo(()=>[{headerCheckboxSelection:!0,checkboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,width:20,resizable:!1,suppressMovable:!1,filter:!1,editable:!1,headerClass:"branch-table-header-cell",cellClass:"branch-table-body-cell"},{field:"Branch Folder"},{field:"Branch Version",sort:"asc",sortIndex:0},{field:"File Path",flex:1,sort:"asc",sortIndex:2},{field:"Local Status",headerTooltip:"Working Copy",sort:"asc",sortIndex:1},{headerName:"Diff",filter:!1,sortable:!1,resizable:!1,cellRenderer:as,cellRendererParams:{onDiffResult:m},width:90}],[]);return t.useEffect(()=>{i.length<1||l||(C(""),a([]),c([]))},[i,l]),e.jsx(b,{children:s.length>0?e.jsxs(b,{children:[e.jsxs(N,{mb:4,alignItems:"center",children:[e.jsx(P,{mr:2,fontWeight:"600",whiteSpace:"nowrap",children:"Quick Filter:"}),e.jsx(ie,{placeholder:"Type to search...",onInput:v,width:"100%"})]}),e.jsx("div",{className:"ag-theme-balham-dark compact",style:{height:"480px",width:"100%"},children:e.jsx(de,{ref:n,rowData:s,defaultColDef:o,columnDefs:S,onSelectionChanged:g,quickFilterText:p,domLayout:"normal",rowSelection:"multiple",suppressRowClickSelection:!0,rowMultiSelectWithClick:!0,animateRows:!0,columnMenu:"new",enableCellTextSelection:!0,ensureDomOrder:!0,pagination:!0,paginationAutoPageSize:!0})}),e.jsx(N,{mt:4,columnGap:2,justifyContent:"flex-end",children:e.jsx(D,{label:"Requires you to select at least 1 file",hasArrow:!0,isDisabled:u.length>0,children:e.jsx(E,{onClick:F,colorScheme:"red",isDisabled:u.length<1,children:"Revert Selected"})})})]}):e.jsx(b,{children:e.jsx(P,{children:"Your selected branches do not contain any files to commit."})})})}function Bt({rowDataUntrackedChanges:s,setRowDataUntrackedChanges:a,defaultColDefsCommit:o}){const{untrackedChangesGridRef:n,selectedUntrackedChanges:r,setSelectedUntrackedChanges:i,isDebug:l,selectedBranches:c,showCommitView:u}=L(),{emitFilesAddRemove:d,emitFilesRevert:f}=ue(),[p,C]=t.useState(""),F=t.useCallback(k=>{C(k.target.value)},[C]),v=t.useCallback(()=>{var x,w;const k=(w=(x=n==null?void 0:n.current)==null?void 0:x.api)==null?void 0:w.getSelectedNodes().map(B=>B.data);l&&console.debug("PanelUntrackedChanges.jsx (onUnseenFilesSelectionChanged): selectedBranches",k),i(k)},[n,l]),g=t.useCallback(()=>{d(r)},[d,r]),m=t.useCallback(()=>{f(r)},[f,r]),S=t.useMemo(()=>[{headerCheckboxSelection:!0,checkboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,width:20,resizable:!1,suppressMovable:!1,filter:!1,editable:!1,headerClass:"branch-table-header-cell",cellClass:"branch-table-body-cell"},{field:"Branch Folder"},{field:"Branch Version",sort:"asc",sortIndex:0},{field:"File Path",flex:1,sort:"asc",sortIndex:1},{field:"Local Status",headerTooltip:"Working Copy"}],[]);return t.useEffect(()=>{c.length<1||u||(C(""),a([]),i([]))},[c,u]),e.jsx(b,{children:s.length>0?e.jsxs(b,{children:[e.jsx(P,{mb:4,children:"Below are the list of files which are either unversioned or missing in the repository:"}),e.jsxs(N,{mb:4,alignItems:"center",children:[e.jsx(P,{mr:2,fontWeight:"600",whiteSpace:"nowrap",children:"Quick Filter:"}),e.jsx(ie,{placeholder:"Type to search...",onInput:F,width:"100%"})]}),e.jsx("div",{className:"ag-theme-balham-dark compact",style:{height:"390px",width:"100%"},children:e.jsx(de,{ref:n,rowData:s,defaultColDef:o,columnDefs:S,onSelectionChanged:v,quickFilterText:p,domLayout:"normal",rowSelection:"multiple",rowMultiSelectWithClick:!0,animateRows:!0,columnMenu:"new",enableCellTextSelection:!0,ensureDomOrder:!0,pagination:!0,paginationAutoPageSize:!0})}),e.jsxs(N,{mt:4,columnGap:2,justifyContent:"flex-end",children:[e.jsx(D,{label:"Requires you to select at least 1 file",hasArrow:!0,isDisabled:r.length>0,children:e.jsxs(E,{onClick:g,colorScheme:"green",isDisabled:r.length<1,children:["Add/Remove ",r.length," File",r.length>1?"s":""]})}),e.jsx(D,{label:"Requires you to select at least 1 file",hasArrow:!0,isDisabled:r.length>0,children:e.jsxs(E,{onClick:m,colorScheme:"red",isDisabled:r.length<1,children:["Revert ",r.length," File",r.length>1?"s":""]})})]})]}):e.jsx(b,{children:e.jsx(P,{children:"Your selected branches do not contain any unversioned or missing files."})})})}function Le(){const{config:s}=L();return s&&s.commitOptions?s.commitOptions:null}function He({branchFolder:s}){const{issueNumber:a,setIssueNumber:o,selectedBranches:n}=L(),r=Le(),i=t.useCallback(u=>{const d=String(u.target.value||"").trim();/^\d*$/.test(d)&&o(f=>({...f,[s]:d}))},[s,o]),l=!s,c=!s||!(r!=null&&r.useIssuePerFolder)?!0:n==null?void 0:n.map(u=>u["Branch Folder"]).includes(s);return t.useEffect(()=>(s&&o(u=>({...u,[s]:""})),()=>{s&&Object.keys(a).includes(s)&&o(u=>G.omit(u,[s]))}),[s,o]),e.jsx(D,{label:"Please select source branch first!",isDisabled:!l,hasArrow:!0,children:e.jsxs(Te,{isDisabled:l,isRequired:c,children:[e.jsx(Ne,{children:s?`Issue Number For ${s}`:"Issue Number"}),e.jsx(ie,{value:a[s]||"",onInput:i,placeholder:"Enter number"})]},s)})}function rs(){const{configurableRowData:s,sourceBranch:a,selectedBranches:o}=L(),n=t.useCallback(c=>s&&s.length>0?s.find(u=>u.id==c)["Branch Folder"]:"",[s]),r=t.useMemo(()=>{if(!(a!=null&&a.value))return[];const c=n(a.value);return[...new Set(o.filter(u=>u["Branch Folder"]!==c).map(u=>u["Branch Folder"]))]},[a,o,n]),i=t.useCallback(c=>s&&s.length>0?s.find(u=>u.id==c)["Branch Version"]:"",[s]),l=t.useCallback(c=>s&&s.length>0?s.find(u=>u.id==c)["SVN Branch"]:"",[s]);return{getBranchFolderById:n,selectedBranchFolders:r,getBranchVersionById:i,getSvnBranchById:l}}function kt({openMessageAutoFillModal:s}){const{sourceBranch:a,setSourceBranch:o,branchOptions:n,setIssueNumber:r,commitMessage:i,setCommitMessage:l,isCommitMode:c,selectedBranches:u}=L(),d=Le(),{getBranchFolderById:f,selectedBranchFolders:p}=rs(),C=t.useCallback(v=>{o(v)},[o]),F=t.useCallback(v=>{l(String(v.target.value).replace(/["`]/g,"'"))},[l]);return t.useEffect(()=>{c&&(o(null),r({}))},[c]),t.useEffect(()=>{d!=null&&d.reusePreviousCommitMessage||l("")},[d==null?void 0:d.reusePreviousCommitMessage,l,c]),t.useEffect(()=>{r(v=>Object.fromEntries(Object.entries(v).filter(([g])=>u.some(m=>m["Branch Folder"]===g))))},[u]),e.jsx(b,{children:e.jsxs(N,{columnGap:3,children:[e.jsxs(b,{flexGrow:1,children:[e.jsxs(N,{columnGap:2,mb:2,children:[e.jsx(b,{width:"50%",children:e.jsxs(Te,{isRequired:!0,children:[e.jsx(Ne,{children:"Source Branch"}),e.jsx($s,{value:a,onChange:C,options:n,placeholder:"SVN Branch you're commiting from",selectedOptionStyle:"check",selectedOptionColorScheme:"yellow",isClearable:!0,classNamePrefix:"chakra-react-select"})]})}),e.jsx(N,{width:"50%",alignItems:"flex-end",columnGap:2,children:e.jsx(He,{branchFolder:a&&a.value?f(a.value):null})})]}),e.jsxs(N,{columnGap:2,height:"auto",children:[e.jsxs(Te,{width:d!=null&&d.useIssuePerFolder?"50%":"100%",isRequired:!0,children:[e.jsx(Ne,{children:"Commit Message"}),e.jsx(qs,{placeholder:"Enter Commit Message",height:"76%",resize:"none",onInput:F,value:i})]}),d!=null&&d.useIssuePerFolder?a!=null&&a.value?e.jsx(N,{width:"50%",flexDir:"column",rowGap:2,children:p.map(v=>e.jsx(He,{branchFolder:v},v))}):e.jsx(b,{width:"50%",textAlign:"center",m:"auto",children:e.jsx(P,{fontSize:"lg",fontWeight:"600",color:"yellow.500",children:"Please select source branch first!"})}):null]})]}),e.jsx(b,{pt:8,children:e.jsx(D,{label:a!=null&&a.value?"Auto Fill Message":"Please select source branch first!",hasArrow:!0,placement:"bottom-end",children:e.jsx(H,{colorScheme:"yellow","aria-label":"Auto Fill Message",size:"md",onClick:()=>s(),icon:e.jsx(es,{}),isDisabled:!(a!=null&&a.value)})})})]})})}function Dt({openCommitModal:s}){const{setShowCommitView:a,selectedLocalChanges:o,sourceBranch:n,issueNumber:r,commitMessage:i,setSocketPayload:l,configurableRowData:c,selectedBranches:u}=L(),{RaiseClientNotificaiton:d}=ne(),f=Le(),{selectedBranchFolders:p}=rs(),C=t.useCallback(()=>{a(!1)},[a]),F=t.useCallback(()=>{if(!n||n.value===""){d("Please select the source branch to proceed!","error");return}const v=c.find(S=>S.id==n.value),g=f!=null&&f.useIssuePerFolder?p.every(S=>r[S]&&r[S]!==""):!0,m=f!=null&&f.useIssuePerFolder&&!u.some(S=>S["Branch Folder"]===v["Branch Folder"])||r[v["Branch Folder"]];if(!r||G.isEmpty(r)||!g||!m){d("Please provide the issue number to proceed!","error");return}if(!i||i.trim()===""){d("Please provide the commit message to proceed!","error");return}l({sourceBranch:v,issueNumber:r,commitMessage:i,filesToProcess:o,commitOptions:f}),s()},[d,n,c,f,p,r,u,i,o]);return e.jsx(b,{children:e.jsxs(N,{columnGap:2,justifyContent:"center",children:[e.jsx(E,{onClick:C,leftIcon:e.jsx(Be,{}),colorScheme:"yellow",children:"Refresh Process"}),e.jsx(D,{label:"Select at least 1 file",hasArrow:!0,isDisabled:o.length>0,children:e.jsxs(E,{onClick:F,leftIcon:e.jsx(K,{as:Ye}),colorScheme:"yellow",isDisabled:o.length<1,children:["Commit ",o.length>0?`${o.length} File`:"",o.length>1?"s":""]})})]})})}function vt(){const{selectedBranches:s,logData:a,setLogData:o}=L(),[n,r]=t.useState([]),[i,l]=t.useState(""),c=t.useCallback(f=>{l(f.target.value)},[l]),u=t.useCallback(()=>{o([])},[o]),d=a.length===s.length;return t.useEffect(()=>{if(a.length===0)return;const f=a.map(p=>p.logs).flat();r(p=>G.isEqual(p,f)?p:f)},[a]),{rowDataLogs:n,quickFilterLogsText:i,setQuickFilterLogsText:l,onQuickFilterLogsInputChanged:c,refreshLogs:u,areLogsFetched:d}}function Ft({rowDataLogs:s,quickFilterLogsText:a,setAutoFillSelection:o=null,isAutofill:n=!1}){const r=t.useMemo(()=>({sortable:!0,resizable:!1,wrapText:!0,autoHeight:!0,filter:!0,suppressMovable:!0,editable:!1,wrapHeaderText:!0,autoHeaderHeight:!0}),[]),i=t.useMemo(()=>{const u=[{field:"revision",headerName:"Revision",sort:"desc",width:130},{field:"date",headerName:"Date",sortable:!1},{field:"branchFolder",headerName:"Branch Folder",width:135},{field:"branchVersion",headerName:"Branch Version",width:125},{field:"author",headerName:"Author"},{field:"message",headerName:"Message",flex:1}];return n?[{checkboxSelection:!0,width:20,resizable:!1,suppressMovable:!1,filter:!1,editable:!1,headerClass:"branch-table-header-cell",cellClass:"branch-table-body-cell"},...u]:u},[n]),l=t.useRef(null),c=t.useCallback(()=>{var u,d;if(o){const f=(d=(u=l==null?void 0:l.current)==null?void 0:u.api)==null?void 0:d.getSelectedNodes().map(p=>p.data);o(f[0]||null)}},[o]);return e.jsx("div",{className:"ag-theme-balham-dark compact",style:{height:n?"90%":"85%",width:"100%"},children:e.jsx(de,{ref:l,rowData:s,defaultColDef:r,columnDefs:i,onSelectionChanged:c,quickFilterText:a,domLayout:"normal",columnMenu:"new",rowSelection:"single",suppressRowClickSelection:!n,animateRows:!1,immutableData:!0,suppressFlash:!0,enableCellTextSelection:!0,ensureDomOrder:!0,pagination:!0,paginationAutoPageSize:!0})})}function is({setAutoFillSelection:s=!1,isAutofill:a=!1}){const{selectedBranches:o,logData:n}=L(),{rowDataLogs:r,quickFilterLogsText:i,onQuickFilterLogsInputChanged:l,refreshLogs:c,areLogsFetched:u}=vt();return u?e.jsxs(b,{h:"100%",children:[e.jsxs(N,{mb:4,width:"100%",alignItems:"center",columnGap:4,children:[e.jsxs(N,{alignItems:"center",width:"100%",children:[e.jsx(P,{mr:2,fontWeight:"600",whiteSpace:"nowrap",children:"Quick Filter:"}),e.jsx(ie,{placeholder:"Type to search...",onInput:l,width:"100%"})]}),e.jsx(b,{children:e.jsx(D,{label:"Refresh",hasArrow:!0,children:e.jsx(H,{onClick:c,icon:e.jsx(Be,{}),colorScheme:"yellow","aria-label":"Refresh"})})})]}),e.jsx(Ft,{rowDataLogs:r,quickFilterLogsText:i,setAutoFillSelection:s,isAutofill:a})]}):e.jsxs(b,{children:[e.jsxs(b,{mb:4,children:[e.jsx(P,{fontWeight:600,children:"Showing SVN Log for the following branches:"}),e.jsx(Re,{spacing:3,children:o.map(d=>{const f=n.find(p=>p.id===d.id);return e.jsxs(ae,{display:"flex",alignItems:"center",children:[e.jsx(oe,{w:30,h:30,as:f?re:_s,color:"yellow.500"}),De(d["Branch Folder"],d["Branch Version"],d["SVN Branch"])]},d.branchId)})})]}),e.jsx(N,{justifyContent:"center",children:e.jsx(Gs,{value:n.length/o.length*360,color:"yellow.300",size:"100px",children:e.jsxs(Qs,{children:[n.length," / ",o.length]})})})]})}function It(s){const{data:a}=s,o=async()=>{window.open(a.url,"_blank")};return e.jsx(H,{"aria-label":"Diff",size:"sm",icon:e.jsx(Ys,{}),onClick:o,colorScheme:"yellow"})}function Rt({rowDataTrello:s,quickFilterTrelloText:a,setAutoFillSelection:o}){const n=t.useMemo(()=>({sortable:!0,resizable:!1,wrapText:!0,autoHeight:!0,filter:!0,suppressMovable:!0,editable:!1,wrapHeaderText:!0,autoHeaderHeight:!0}),[]),r=t.useMemo(()=>[{checkboxSelection:!0,width:20,resizable:!1,suppressMovable:!1,filter:!1,editable:!1,headerClass:"branch-table-header-cell",cellClass:"branch-table-body-cell"},{field:"name",headerName:"Name",flex:1},{field:"lastActivityDate",headerName:"Last Activity Date"},{field:"url",headerName:"Goto Trello",filter:!1,sortable:!1,resizable:!1,cellRenderer:It,width:120}],[]),i=t.useRef(null),l=t.useCallback(()=>{var u,d;const c=(d=(u=i==null?void 0:i.current)==null?void 0:u.api)==null?void 0:d.getSelectedNodes().map(f=>f.data);o(c[0]||null)},[o]);return e.jsx("div",{className:"ag-theme-balham-dark compact",style:{height:"80%",width:"100%"},children:e.jsx(de,{ref:i,rowData:s,defaultColDef:n,columnDefs:r,onSelectionChanged:l,quickFilterText:a,domLayout:"normal",columnMenu:"new",rowSelection:"single",suppressRowClickSelection:!1,animateRows:!1,enableCellTextSelection:!0,pagination:!0,paginationAutoPageSize:!0})})}function Tt({setAutoFillSelection:s}){const{socket:a}=L(),{key:o,token:n,isTrelloIntegrationEnabled:r,emitTrelloCardNamesSearch:i}=os(),[l,c]=t.useState(""),[u,d]=t.useState(""),[f,p]=t.useState([]),C=t.useCallback(G.debounce(m=>{m.trim()!==""&&i(o,n,m)},400),[o,n,i]),F=t.useCallback(m=>{c(String(m.target.value).trim())},[c]),v=t.useCallback(()=>{l.trim()!==""&&i(o,n,l)},[l,o,n,i]),g=t.useCallback(m=>{d(m.target.value)},[]);return t.useEffect(()=>(C(l),()=>C.cancel()),[l,C]),t.useEffect(()=>{const m=S=>{p(S&&S.length>0?S:[])};return a==null||a.on("trello-result-search-names-card",m),()=>a==null?void 0:a.off("trello-result-search-names-card",m)},[a]),r?e.jsxs(b,{h:"100%",children:[e.jsxs(N,{mb:4,width:"100%",alignItems:"center",columnGap:4,children:[e.jsxs(N,{alignItems:"center",width:"100%",children:[e.jsx(P,{mr:2,fontWeight:"600",whiteSpace:"nowrap",children:"Trello Query:"}),e.jsx(ie,{placeholder:"Type to search...",onInput:F,width:"100%"})]}),e.jsx(b,{children:e.jsx(D,{label:"Resubmit Query",hasArrow:!0,children:e.jsx(H,{onClick:v,icon:e.jsx(Be,{}),colorScheme:"yellow","aria-label":"Resubmit"})})})]}),e.jsx(N,{mb:4,width:"100%",alignItems:"center",columnGap:4,children:e.jsxs(N,{alignItems:"center",width:"100%",children:[e.jsx(P,{mr:2,fontWeight:"600",whiteSpace:"nowrap",children:"Quick Filter:"}),e.jsx(ie,{placeholder:"Type to search...",onInput:g,width:"100%"})]})}),e.jsx(Rt,{rowDataTrello:f,quickFilterTrelloText:u,setAutoFillSelection:s})]}):e.jsx(b,{h:"100%",p:4,children:e.jsxs(P,{fontSize:"lg",fontWeight:"600",color:"red.500",children:["You need to"," ",e.jsxs(_e,{href:"https://help.merge.dev/en/articles/8757597-trello-how-do-i-link-my-account",isExternal:!0,color:"yellow.500",children:["set up Trello Integration ",e.jsx(es,{mx:"2px"})]})," ","in the configuration file to use this feature."]})})}function Nt({isModalOpen:s,closeModal:a}){const{setIssueNumber:o,setCommitMessage:n,setPostCommitData:r}=L(),[i,l]=t.useState(0),[c,u]=t.useState([null,null]),[d,f]=t.useState(!0),p=t.useCallback(g=>{l(g),u(g===0?m=>[m[0],null]:m=>[null,m[1]])},[l]),C=t.useCallback(g=>{u(m=>[g,...m.slice(1)])},[u]),F=t.useCallback(g=>{u(m=>[m[0],g])},[u]),v=t.useCallback(()=>{console.debug("Selected tab index:",i),console.debug("Selected autofill selection:",JSON.stringify(c,null,4));let g=c[i];if(i===0){const m=g.message,S=m.match(/\s*(Issue)*\s*(\d+)\s*/),k=S?S[2]:null,x=m.replace(/\s*(Issue)*\s*(\d+)?\s*(\([^\)]+\))*\s?:?\s*/,"");k&&o(w=>Object.fromEntries(Object.keys(w).map(B=>[B,k]))),x.trim()!==""&&n(x)}else{const m=g.name,S=m.match(/\s*(Issue)*\s*(\d+)\s*/),k=S?S[2]:null,x=m.replace(/\s*(Issue)*\s*(\d+)/,"");k&&o(w=>Object.fromEntries(Object.keys(w).map(B=>[B,k]))),x.trim()!==""&&n(x),r({type:"trello",data:g})}a()},[i,c,o,n,r,a]);return t.useEffect(()=>{f(!(c.length==2&&(c[0]||c[1])))},[c]),t.useEffect(()=>{u([null,null]),l(0)},[s]),e.jsxs(Je,{isOpen:s,onClose:a,isCentered:!0,motionPreset:"slideInBottom",scrollBehavior:"inside",size:"xl",closeOnOverlayClick:!0,children:[e.jsx(pe,{}),e.jsxs(Xe,{maxH:"95%",maxW:"95%",children:[e.jsx(Ce,{children:e.jsx(Z,{as:"h2",size:"lg",children:"Autofill Commit Message"})}),e.jsx(ke,{size:"lg"}),e.jsx(we,{children:e.jsx(b,{height:"70vh",children:e.jsxs(ss,{variant:"solid-rounded",colorScheme:"yellow",defaultIndex:0,isLazy:!0,h:"100%",onChange:g=>p(g),children:[e.jsxs(ts,{children:[e.jsx(xe,{children:"SVN Logs"}),e.jsx(xe,{children:"Trello"})]}),e.jsxs(ns,{h:"90%",children:[e.jsx(be,{px:0,pb:0,h:"100%",children:e.jsx(is,{setAutoFillSelection:C,isAutofill:!0})}),e.jsx(be,{px:0,pb:0,h:"100%",children:e.jsx(Tt,{setAutoFillSelection:F})})]})]})})}),e.jsxs(ye,{children:[e.jsx(E,{mr:3,onClick:()=>a(),children:"Cancel"}),e.jsx(D,{hasArrow:!0,label:"Please select exactly one row!",placement:"top-start",isDisabled:!d,children:e.jsx(E,{colorScheme:"yellow",onClick:v,isDisabled:d,children:"Select"})})]})]})]})}function Mt(){const{config:s,updateConfig:a,setSourceBranch:o,setIssueNumber:n}=L(),[r,i]=t.useState({}),l=t.useCallback((c,u)=>{i(d=>({...d,[c]:u}))},[i]);return t.useEffect(()=>{!s||G.isEmpty(s)||(s.commitOptions?i(s.commitOptions):a(c=>({...c,commitOptions:{useFolderOnlySource:!1,useIssuePerFolder:!1,reusePreviousCommitMessage:!1}})))},[s]),t.useEffect(()=>{G.isEmpty(r)||a(c=>G.isEqual(c.commitOptions,r)?c:{...c,commitOptions:r})},[r]),t.useEffect(()=>{o(null)},[r==null?void 0:r.useFolderOnlySource,o]),t.useEffect(()=>{n({})},[r==null?void 0:r.useIssuePerFolder,n]),e.jsxs(b,{mb:4,children:[e.jsx(Z,{as:"h6",size:"sm",children:"Commit Options"}),e.jsx(Ze,{colorScheme:"yellow",children:e.jsxs(Ks,{direction:"row",spacing:4,mt:2,children:[e.jsx(X,{isChecked:r.useFolderOnlySource,onChange:c=>l("useFolderOnlySource",c.target.checked),children:e.jsx(D,{label:"Removes extra branch details from source branch.",hasArrow:!0,placement:"bottom-start",children:"Use Folder Only Source Branch?"})}),e.jsx(X,{isChecked:r.useIssuePerFolder,onChange:c=>l("useIssuePerFolder",c.target.checked),children:e.jsx(D,{label:"Allows users to input issue number for each branch folder.",hasArrow:!0,placement:"bottom-start",children:"Use 1 Issue Per Folder?"})}),e.jsx(X,{isChecked:r.reusePreviousCommitMessage,onChange:c=>l("reusePreviousCommitMessage",c.target.checked),children:e.jsx(D,{label:"Reuses the commit message from the previous commit made in Titan.",hasArrow:!0,children:"Reuse Previous Commit Message?"})})]})})]})}function At(){const{isDebug:s,setIsCommitMode:a,selectedBranchStatuses:o,showCommitView:n,setShowCommitView:r,selectedBranches:i,configurableRowData:l}=L(),[c,u]=t.useState({}),[d,f]=t.useState([]),[p,C]=t.useState([]),{isOpen:F,onOpen:v,onClose:g}=Me(),{isOpen:m,onOpen:S,onClose:k}=Me(),x=t.useMemo(()=>({resizable:!0,wrapText:!0,autoHeight:!0,filter:!0,suppressMovable:!0,editable:!1,wrapHeaderText:!0,autoHeaderHeight:!0}),[]);t.useEffect(()=>{if(i.length<1||n){i.length<1&&a(!1);return}u({})},[i,n]),t.useEffect(()=>{s&&(console.debug("Branch Status Rows:",o),console.debug("Selected Rows:",i))},[s,o,i]),t.useEffect(()=>{o.length===i.length&&(o.forEach(V=>{let T=V.id,U=V.status.filesToCommit,q=V.status.filesToUpdate;const I=l.find(z=>z.id===T);if(q.length>0){const z=De(I["Branch Folder"],I["Branch Version"],I["SVN Branch"]);u(W=>({...W,[z]:[...W[z]||[],...q]}))}if(U.length>0){const z=U.map(W=>({branchId:T,"Branch Folder":I["Branch Folder"],"Branch Version":I["Branch Version"],"SVN Branch":I["SVN Branch"],"Full Path":W.path,"File Path":`${ut(V.status.branch)}\\${W.pathDisplay}`,"Local Status":W.wcStatus}));f(W=>[...W,...z.filter(Y=>!["unversioned","missing"].includes(Y["Local Status"]))]),C(W=>[...W,...z.filter(Y=>["unversioned","missing"].includes(Y["Local Status"]))])}}),r(!0))},[o,i,l]);const w=Object.keys(c).length>0,B=d.length>0,O=p.length>0,$=w||B||O;return e.jsxs(b,{children:[e.jsx(Mt,{}),e.jsx(b,{mb:6,children:e.jsx(kt,{openMessageAutoFillModal:S})}),e.jsx(Js,{isLoaded:n&&$,startColor:"yelow.500",endColor:"yellow.500",children:e.jsxs(ss,{variant:"solid-rounded",colorScheme:"yellow",defaultIndex:w?0:B?1:2,isLazy:!1,children:[e.jsxs(ts,{children:[e.jsx(xe,{isDisabled:!w,children:e.jsx(D,{label:"No files to update!",hasArrow:!0,isDisabled:w,children:"Files to Update"})}),e.jsx(xe,{isDisabled:!B,children:e.jsx(D,{label:"No files to commit!",hasArrow:!0,isDisabled:B,children:"Local Changes"})}),e.jsx(xe,{isDisabled:!O,children:e.jsx(D,{label:"No unversioned/missing files!",hasArrow:!0,isDisabled:O,children:"Untracked Changes"})})]}),e.jsxs(ns,{children:[e.jsx(be,{px:0,children:e.jsx(St,{fileUpdates:c})}),e.jsx(be,{px:0,children:e.jsx(yt,{rowDataLocalChanges:d,setRowDataLocalChanges:f,defaultColDefsCommit:x})}),e.jsx(be,{px:0,children:e.jsx(Bt,{rowDataUntrackedChanges:p,setRowDataUntrackedChanges:C,defaultColDefsCommit:x})})]})]})}),n&&!$?e.jsxs(P,{mt:4,className:"animation-pulse",fontWeight:600,textAlign:"center",children:["No changes have been spotted!",e.jsx("br",{}),"Please use the refresh button ðŸ‘‡ if you have recently made a change"]}):e.jsx(e.Fragment,{}),e.jsx(b,{mt:6,children:e.jsx(Dt,{openCommitModal:v})}),e.jsx(jt,{isModalOpen:F,closeModal:g}),e.jsx(Nt,{isModalOpen:m,closeModal:k})]})}function Vt(){const{showSelectedBranchesLog:s,setShowSelectedBranchesLog:a}=L();return e.jsxs(Xs,{isOpen:s,onClose:()=>a(!1),placement:"left",size:"full",children:[e.jsx(pe,{}),e.jsxs(Zs,{children:[e.jsx(ke,{size:"lg"}),e.jsx(Ce,{children:"Selected Branches: SVN Log"}),e.jsx(we,{children:e.jsx(b,{height:"100%",children:e.jsx(is,{})})})]})]})}function Lt(){const{toast:s,RaiseClientNotificaiton:a}=ne(),{isOpen:o,onOpen:n,onClose:r}=Me(),i=t.useRef(),[l,c]=t.useState(!1);t.useEffect(()=>{if(!window.electron){a("Electron context is not available. Updates cannot be checked.","warning",5e3);return}return window.electron.on("update-available",()=>{s.closeAll(),n()}),window.electron.on("update-error",f=>{a(`An error occurred while checking for updates: ${f}`,"error",5e3),c(!1)}),()=>{window.electron.removeAllListeners("update-available"),window.electron.removeAllListeners("update-error")}},[s,n]);const u=t.useCallback(()=>{r(),a("You may update the application later by manually triggering an update check or wait until Titan does this","info",5e3)},[r,a]),d=t.useCallback(()=>{if(l){a("Update is already in progress. Please wait.","info",5e3);return}window.electron?(c(!0),window.electron.downloadUpdate().catch(f=>{c(!1),a(`An error occurred while downloading the update: ${f}`,"error",5e3)}),window.electron.on("update-downloaded",()=>{a("Update has been downloaded successfully. Titan will now restart to apply the update.","info",5e3),window.electron.removeAllListeners("update-downloaded"),r()}),window.electron.on("update-not-available",()=>{a("Titan is up to date","info",3e3),window.electron.removeAllListeners("update-not-available"),c(!1),r()})):a("Cannot update Titan in a non-desktop application environment","error",5e3)},[l,a,c,r]);return e.jsx(Ge,{isOpen:o,leastDestructiveRef:i,onClose:r,motionPreset:"slideInBottom",closeOnOverlayClick:!l,children:e.jsx(pe,{children:e.jsxs(Qe,{children:[e.jsx(Ce,{fontSize:"lg",fontWeight:"bold",children:"Update Available"}),l?e.jsx(e.Fragment,{}):e.jsx(ke,{}),e.jsx(we,{children:"A new version of Titan is available. Would you like to download and install the update?"}),e.jsxs(ye,{children:[e.jsx(E,{colorScheme:"red",ref:i,onClick:u,isDisabled:l,children:"Cancel"}),e.jsx(E,{colorScheme:"yellow",onClick:d,ml:3,isDisabled:l,children:"Confirm"})]})]})})})}function Et(){if(!window.electron)return e.jsx(e.Fragment,{});const{colorMode:s}=qe(),a=t.useCallback(()=>{window.electron.minimizeWindow()},[]),o=t.useCallback(()=>{window.electron.maximizeWindow()},[]),n=t.useCallback(()=>{window.electron.closeWindow()},[]);return e.jsx(et.header,{w:"100%",position:"fixed",bgColor:s==="light"?"white":"#121212",className:"titanHead",zIndex:9999999,top:0,children:e.jsxs(N,{justifyContent:"space-between",alignItems:"center",p:2,position:"static",children:[e.jsx(Z,{as:"h6",size:"sm",noOfLines:1,className:"animation-fadein-left-forward",children:"Titan"}),e.jsxs(N,{alignItems:"center",columnGap:2,flexWrap:"nowrap",wrap:"nowrap",children:[e.jsx(H,{"aria-label":"Minimize",size:"xs",icon:e.jsx(st,{}),onClick:a,colorScheme:"gray",_hover:{bg:"#FAF089",color:"#1A202C"}}),e.jsx(H,{"aria-label":"Maximize",size:"xs",icon:e.jsx(tt,{}),onClick:o,colorScheme:"gray",_hover:{bg:"#FAF089",color:"#1A202C"}}),e.jsx(H,{"aria-label":"Close",size:"xs",icon:e.jsx(Ke,{}),onClick:n,colorScheme:"gray",_hover:{bg:"#FEB2B2",color:"#1A202C"}})]})]})})}function Pt(){const{isCommitMode:s,selectedBranches:a,configurableRowData:o}=L(),{RaiseClientNotificaiton:n}=ne();return t.useEffect(()=>{if(window.electron)return window.electron.onAppClosing(()=>{n("App is closing, performing cleanup...","info",0),window.electron.closeWindow()}),()=>{window.electron.removeAppClosingListener()};console.warn("Electron specific logic is not available in browser mode.")},[]),e.jsxs(b,{className:"titanBody",children:[e.jsx(Et,{}),e.jsxs(b,{p:10,children:[e.jsx(gt,{}),e.jsx(Lt,{}),e.jsxs(N,{rowGap:4,flexDirection:"column",children:[e.jsx(b,{children:e.jsx(wt,{})}),e.jsx(nt,{in:s,animateOpacity:!0,children:e.jsxs(b,{id:"sectionCommit",children:[e.jsxs(Z,{as:"h2",size:"lg",noOfLines:1,mb:4,className:"animation-pulse",lineHeight:"1.4",children:["Committing ",a.length==o.length?"All":`${a.length}/${o.length}`," Branch",a.length==1?"":"es"]}),e.jsx(At,{})]})})]}),e.jsx(Vt,{})]})]})}const{definePartsStyle:cs,defineMultiStyleConfig:ds}=it(ct.keys),Ot=cs({overlay:{bg:"blackAlpha.900"},dialog:{bg:"gray.900",color:"white",boxShadow:"rgba(255, 255, 255, 0.07) 0px 0px 20px 7px"},header:{bg:"gray.900",color:"white",borderRadius:"20px",p:4},body:{p:4,color:"white"},footer:{bg:"gray.900",p:4,color:"white",borderRadius:"20px"}}),zt=ds({baseStyle:Ot}),Ut=cs({overlay:{bg:"blackAlpha.900"},dialog:{mt:ft,bg:"gray.900",color:"white",boxShadow:"rgba(255, 255, 255, 0.07) 0px 0px 20px 7px"},header:{bg:"gray.900",color:"white",borderRadius:"20px",p:4},body:{p:4,color:"white"},footer:{bg:"gray.900",p:2,color:"white",borderRadius:"20px"}}),Wt=ds({baseStyle:Ut}),Ht={initialColorMode:"dark",useSystemColorMode:!1},$e=lt({config:Ht,components:{Modal:zt,Drawer:Wt}});at.createRoot(document.getElementById("root")).render(e.jsx(Ae.StrictMode,{children:e.jsxs(ot,{theme:$e,children:[e.jsx(rt,{initialColorMode:$e.config.initialColorMode}),e.jsx(mt,{children:e.jsx(Pt,{})})]})}));
